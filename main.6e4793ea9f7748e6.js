"use strict";(self.webpackChunkweb_portfolio=self.webpackChunkweb_portfolio||[]).push([[179],{291:()=>{function Tt(n){return"function"==typeof n}function Mo(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const da=Mo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function So(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Fn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(Tt(i))try{i()}catch(s){e=s instanceof da?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{ha(s)}catch(o){e=e??[],o instanceof da?e=[...e,...o.errors]:e.push(o)}}if(e)throw new da(e)}}add(e){var t;if(e&&e!==this)if(this.closed)ha(e);else{if(e instanceof Fn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&So(t,e)}remove(e){const{_finalizers:t}=this;t&&So(t,e),e instanceof Fn&&e._removeParent(this)}}Fn.EMPTY=(()=>{const n=new Fn;return n.closed=!0,n})();const Uu=Fn.EMPTY;function _f(n){return n instanceof Fn||n&&"closed"in n&&Tt(n.remove)&&Tt(n.add)&&Tt(n.unsubscribe)}function ha(n){Tt(n)?n():n.unsubscribe()}const Co={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Mc={setTimeout(n,e,...t){const{delegate:i}=Mc;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Mc;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function S_(n){Mc.setTimeout(()=>{const{onUnhandledError:e}=Co;if(!e)throw n;e(n)})}function fa(){}const C_=Vu("C",void 0,void 0);function Vu(n,e,t){return{kind:n,value:e,error:t}}let Hs=null;function ys(n){if(Co.useDeprecatedSynchronousErrorHandling){const e=!Hs;if(e&&(Hs={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=Hs;if(Hs=null,t)throw i}}else n()}class Sc extends Fn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,_f(e)&&e.add(this)):this.destination=zu}static create(e,t,i){return new zs(e,t,i)}next(e){this.isStopped?Hu(function T_(n){return Vu("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Hu(function E_(n){return Vu("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Hu(C_,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const vf=Function.prototype.bind;function Cc(n,e){return vf.call(n,e)}class yf{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){fr(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){fr(i)}else fr(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){fr(t)}}}class zs extends Sc{constructor(e,t,i){let r;if(super(),Tt(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&Co.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Cc(e.next,s),error:e.error&&Cc(e.error,s),complete:e.complete&&Cc(e.complete,s)}):r=e}this.destination=new yf(r)}}function fr(n){Co.useDeprecatedSynchronousErrorHandling?function D_(n){Co.useDeprecatedSynchronousErrorHandling&&Hs&&(Hs.errorThrown=!0,Hs.error=n)}(n):S_(n)}function Hu(n,e){const{onStoppedNotification:t}=Co;t&&Mc.setTimeout(()=>t(n,e))}const zu={closed:!0,next:fa,error:function bf(n){throw n},complete:fa},Gu="function"==typeof Symbol&&Symbol.observable||"@@observable";function Jr(n){return n}function xf(n){return 0===n.length?Jr:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let rn=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const s=function I_(n){return n&&n instanceof Sc||function A_(n){return n&&Tt(n.next)&&Tt(n.error)&&Tt(n.complete)}(n)&&_f(n)}(t)?t:new zs(t,i,r);return ys(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=Mf(i))((r,s)=>{const o=new zs({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[Gu](){return this}pipe(...t){return xf(t)(this)}toPromise(t){return new(t=Mf(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function Mf(n){var e;return null!==(e=n??Co.Promise)&&void 0!==e?e:Promise}const R_=Mo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Wt=(()=>{class n extends rn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new Sf(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new R_}next(t){ys(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){ys(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){ys(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:s}=this;return i||r?Uu:(this.currentObservers=null,s.push(t),new Fn(()=>{this.currentObservers=null,So(s,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){const t=new rn;return t.source=this,t}}return n.create=(e,t)=>new Sf(e,t),n})();class Sf extends Wt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:Uu}}function ju(n){return Tt(n?.lift)}function wn(n){return e=>{if(ju(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function dn(n,e,t,i,r){return new O_(n,e,t,i,r)}class O_ extends Sc{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function kt(n,e){return wn((t,i)=>{let r=0;t.subscribe(dn(i,s=>{i.next(n.call(e,s,r++))}))})}function Ji(n){return this instanceof Ji?(this.v=n,this):new Ji(n)}function Zi(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function Ln(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){!function r(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}(a,c,(o=n[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const B_=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Tx(n){return Tt(n?.then)}function Dx(n){return Tt(n[Gu])}function Ax(n){return Symbol.asyncIterator&&Tt(n?.[Symbol.asyncIterator])}function Ix(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Rx=function $L(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Ox(n){return Tt(n?.[Rx])}function Px(n){return function pa(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(h){i[h]&&(r[h]=function(f){return new Promise(function(p,_){s.push([h,f,p,_])>1||a(h,f)})})}function a(h,f){try{!function c(h){h.value instanceof Ji?Promise.resolve(h.value.v).then(l,u):d(s[0][2],h)}(i[h](f))}catch(p){d(s[0][3],p)}}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield Ji(t.read());if(r)return yield Ji(void 0);yield yield Ji(i)}}finally{t.releaseLock()}})}function Nx(n){return Tt(n?.getReader)}function Zn(n){if(n instanceof rn)return n;if(null!=n){if(Dx(n))return function qL(n){return new rn(e=>{const t=n[Gu]();if(Tt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(B_(n))return function YL(n){return new rn(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Tx(n))return function XL(n){return new rn(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,S_)})}(n);if(Ax(n))return Fx(n);if(Ox(n))return function JL(n){return new rn(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Nx(n))return function ZL(n){return Fx(Px(n))}(n)}throw Ix(n)}function Fx(n){return new rn(e=>{(function KL(n,e){var t,i,r,s;return function K(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{l(i.next(u))}catch(d){o(d)}}function c(u){try{l(i.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,c)}l((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=Zi(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Gs(n,e,t,i=0,r=!1){const s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function Kn(n,e,t=1/0){return Tt(e)?Kn((i,r)=>kt((s,o)=>e(i,s,r,o))(Zn(n(i,r))),t):("number"==typeof e&&(t=e),wn((i,r)=>function QL(n,e,t,i,r,s,o,a){const c=[];let l=0,u=0,d=!1;const h=()=>{d&&!c.length&&!l&&e.complete()},f=_=>l<i?p(_):c.push(_),p=_=>{s&&e.next(_),l++;let m=!1;Zn(t(_,u++)).subscribe(dn(e,g=>{r?.(g),s?f(g):e.next(g)},()=>{m=!0},void 0,()=>{if(m)try{for(l--;c.length&&l<i;){const g=c.shift();o?Gs(e,o,()=>p(g)):p(g)}h()}catch(g){e.error(g)}}))};return n.subscribe(dn(e,f,()=>{d=!0,h()})),()=>{a?.()}}(i,r,n,t)))}function Dc(n=1/0){return Kn(Jr,n)}const Rr=new rn(n=>n.complete());function Lx(n){return n&&Tt(n.schedule)}function U_(n){return n[n.length-1]}function Df(n){return Tt(U_(n))?n.pop():void 0}function $u(n){return Lx(U_(n))?n.pop():void 0}function kx(n,e=0){return wn((t,i)=>{t.subscribe(dn(i,r=>Gs(i,n,()=>i.next(r),e),()=>Gs(i,n,()=>i.complete(),e),r=>Gs(i,n,()=>i.error(r),e)))})}function Bx(n,e=0){return wn((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function Ux(n,e){if(!n)throw new Error("Iterable cannot be null");return new rn(t=>{Gs(t,e,()=>{const i=n[Symbol.asyncIterator]();Gs(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function ai(n,e){return e?function ak(n,e){if(null!=n){if(Dx(n))return function nk(n,e){return Zn(n).pipe(Bx(e),kx(e))}(n,e);if(B_(n))return function rk(n,e){return new rn(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(Tx(n))return function ik(n,e){return Zn(n).pipe(Bx(e),kx(e))}(n,e);if(Ax(n))return Ux(n,e);if(Ox(n))return function sk(n,e){return new rn(t=>{let i;return Gs(t,e,()=>{i=n[Rx](),Gs(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>Tt(i?.return)&&i.return()})}(n,e);if(Nx(n))return function ok(n,e){return Ux(Px(n),e)}(n,e)}throw Ix(n)}(n,e):Zn(n)}class Or extends Wt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function ot(...n){return ai(n,$u(n))}function Hx(n={}){const{connector:e=(()=>new Wt),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,c,l=0,u=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=c=void 0,u=d=!1},p=()=>{const _=o;f(),_?.unsubscribe()};return wn((_,m)=>{l++,!d&&!u&&h();const g=c=c??e();m.add(()=>{l--,0===l&&!d&&!u&&(a=V_(p,r))}),g.subscribe(m),!o&&l>0&&(o=new zs({next:b=>g.next(b),error:b=>{d=!0,h(),a=V_(f,t,b),g.error(b)},complete:()=>{u=!0,h(),a=V_(f,i),g.complete()}}),Zn(_).subscribe(o))})(s)}}function V_(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new zs({next:()=>{i.unsubscribe(),n()}});return Zn(e(...t)).subscribe(i)}function Zr(n,e){return wn((t,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();t.subscribe(dn(i,c=>{r?.unsubscribe();let l=0;const u=s++;Zn(n(c,u)).subscribe(r=dn(i,d=>i.next(e?e(c,d,u,l++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function ck(n,e){return n===e}function Qt(n){for(let e in n)if(n[e]===Qt)return e;throw Error("Could not find renamed property on target object.")}function Qn(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Qn).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function H_(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const lk=Qt({__forward_ref__:Qt});function yt(n){return n.__forward_ref__=yt,n.toString=function(){return Qn(this())},n}function ut(n){return z_(n)?n():n}function z_(n){return"function"==typeof n&&n.hasOwnProperty(lk)&&n.__forward_ref__===yt}function G_(n){return n&&!!n.\u0275providers}const Gx="https://g.co/ng/security#xss";class ue extends Error{constructor(e,t){super(function If(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function pt(n){return"string"==typeof n?n:null==n?"":String(n)}function j_(n,e){throw new ue(-201,!1)}function Pr(n,e){null==n&&function at(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function Le(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function sn(n){return{providers:n.providers||[],imports:n.imports||[]}}function Rf(n){return jx(n,Pf)||jx(n,Wx)}function jx(n,e){return n.hasOwnProperty(e)?n[e]:null}function Of(n){return n&&(n.hasOwnProperty(W_)||n.hasOwnProperty(_k))?n[W_]:null}const Pf=Qt({\u0275prov:Qt}),W_=Qt({\u0275inj:Qt}),Wx=Qt({ngInjectableDef:Qt}),_k=Qt({ngInjectorDef:Qt});var Rt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Rt||{});let $_;function Ki(n){const e=$_;return $_=n,e}function qx(n,e,t){const i=Rf(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&Rt.Optional?null:void 0!==e?e:void j_(Qn(n))}const hn=globalThis,qu={},Z_="__NG_DI_FLAG__",Nf="ngTempTokenPath",bk=/\n/gm,Xx="__source";let Ac;function To(n){const e=Ac;return Ac=n,e}function Mk(n,e=Rt.Default){if(void 0===Ac)throw new ue(-203,!1);return null===Ac?qx(n,void 0,e):Ac.get(n,e&Rt.Optional?null:void 0,e)}function Ue(n,e=Rt.Default){return(function $x(){return $_}()||Mk)(ut(n),e)}function Ve(n,e=Rt.Default){return Ue(n,Ff(e))}function Ff(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function K_(n){const e=[];for(let t=0;t<n.length;t++){const i=ut(n[t]);if(Array.isArray(i)){if(0===i.length)throw new ue(900,!1);let r,s=Rt.Default;for(let o=0;o<i.length;o++){const a=i[o],c=Sk(a);"number"==typeof c?-1===c?r=a.token:s|=c:r=a}e.push(Ue(r,s))}else e.push(Ue(i))}return e}function Yu(n,e){return n[Z_]=e,n.prototype[Z_]=e,n}function Sk(n){return n[Z_]}function js(n){return{toString:n}.toString()}var Lf=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Lf||{}),Kr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Kr||{});const bs={},Ht=[],kf=Qt({\u0275cmp:Qt}),Q_=Qt({\u0275dir:Qt}),e0=Qt({\u0275pipe:Qt}),Zx=Qt({\u0275mod:Qt}),Ws=Qt({\u0275fac:Qt}),Xu=Qt({__NG_ELEMENT_ID__:Qt}),Kx=Qt({__NG_ENV_ID__:Qt});function Qx(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}function t0(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{const s=r,o=t[++i];tM(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function eM(n){return 3===n||4===n||6===n}function tM(n){return 64===n.charCodeAt(0)}function Ju(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||nM(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function nM(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}const iM="ng-template";function Tk(n,e,t){let i=0,r=!0;for(;i<n.length;){let s=n[i++];if("string"==typeof s&&r){const o=n[i++];if(t&&"class"===s&&-1!==Qx(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;i<n.length&&"string"==typeof(s=n[i++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(r=!1)}}return!1}function rM(n){return 4===n.type&&n.value!==iM}function Dk(n,e,t){return e===(4!==n.type||t?n.value:iM)}function Ak(n,e,t){let i=4;const r=n.attrs||[],s=function Ok(n){for(let e=0;e<n.length;e++)if(eM(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&i){if(i=2|1&i,""!==c&&!Dk(n,c,t)||""===c&&1===e.length){if(Qr(i))return!1;o=!0}}else{const l=8&i?c:e[++a];if(8&i&&null!==n.attrs){if(!Tk(n.attrs,l,t)){if(Qr(i))return!1;o=!0}continue}const d=Ik(8&i?"class":c,r,rM(n),t);if(-1===d){if(Qr(i))return!1;o=!0;continue}if(""!==l){let h;h=d>s?"":r[d+1].toLowerCase();const f=8&i?h:null;if(f&&-1!==Qx(f,l,0)||2&i&&l!==h){if(Qr(i))return!1;o=!0}}}}else{if(!o&&!Qr(i)&&!Qr(c))return!1;if(o&&Qr(c))continue;o=!1,i=c|1&i}}return Qr(i)||o}function Qr(n){return 0==(1&n)}function Ik(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function Pk(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function sM(n,e,t=!1){for(let i=0;i<e.length;i++)if(Ak(n,e[i],t))return!0;return!1}function Nk(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function oM(n,e){return n?":not("+e.trim()+")":e}function Fk(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!Qr(o)&&(e+=oM(s,r),r=""),i=o,s=s||!Qr(i);t++}return""!==r&&(e+=oM(s,r)),e}function ci(n){return js(()=>{const e=cM(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Lf.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Kr.Emulated,styles:n.styles||Ht,_:null,schemas:n.schemas||null,tView:null,id:""};lM(t);const i=n.dependencies;return t.directiveDefs=Bf(i,!1),t.pipeDefs=Bf(i,!0),t.id=function Gk(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function Uk(n){return Bt(n)||mi(n)}function Vk(n){return null!==n}function an(n){return js(()=>({type:n.type,bootstrap:n.bootstrap||Ht,declarations:n.declarations||Ht,imports:n.imports||Ht,exports:n.exports||Ht,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function aM(n,e){if(null==n)return bs;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}function Te(n){return js(()=>{const e=cM(n);return lM(e),e})}function Bt(n){return n[kf]||null}function mi(n){return n[Q_]||null}function Fi(n){return n[e0]||null}function gr(n,e){const t=n[Zx]||null;if(!t&&!0===e)throw new Error(`Type ${Qn(n)} does not have '\u0275mod' property.`);return t}function cM(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||bs,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Ht,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:aM(n.inputs,e),outputs:aM(n.outputs)}}function lM(n){n.features?.forEach(e=>e(n))}function Bf(n,e){if(!n)return null;const t=e?Fi:Uk;return()=>("function"==typeof n?n():n).map(i=>t(i)).filter(Vk)}const Tn=0,ke=1,bt=2,yn=3,es=4,Zu=5,Ai=6,Rc=7,kn=8,Do=9,Oc=10,gt=11,Ku=12,uM=13,Pc=14,Bn=15,Qu=16,Nc=17,ws=18,ed=19,dM=20,Ao=21,$s=22,td=23,nd=24,Ot=25,n0=1,hM=2,xs=7,Fc=9,_i=11;function er(n){return Array.isArray(n)&&"object"==typeof n[n0]}function Li(n){return Array.isArray(n)&&!0===n[n0]}function r0(n){return 0!=(4&n.flags)}function _a(n){return n.componentOffset>-1}function Vf(n){return 1==(1&n.flags)}function ts(n){return!!n.template}function s0(n){return 0!=(512&n[bt])}function va(n,e){return n.hasOwnProperty(Ws)?n[Ws]:null}let vi=null,Hf=!1;function Nr(n){const e=vi;return vi=n,e}const gM={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function _M(n){if(!rd(n)||n.dirty){if(!n.producerMustRecompute(n)&&!bM(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function yM(n){n.dirty=!0,function vM(n){if(void 0===n.liveConsumerNode)return;const e=Hf;Hf=!0;try{for(const t of n.liveConsumerNode)t.dirty||yM(t)}finally{Hf=e}}(n),n.consumerMarkedDirty?.(n)}function a0(n){return n&&(n.nextProducerIndex=0),Nr(n)}function c0(n,e){if(Nr(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(rd(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)zf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function bM(n){Lc(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(_M(t),i!==t.version))return!0}return!1}function wM(n){if(Lc(n),rd(n))for(let e=0;e<n.producerNode.length;e++)zf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function zf(n,e){if(function MM(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),Lc(n),1===n.liveConsumerNode.length)for(let i=0;i<n.producerNode.length;i++)zf(n.producerNode[i],n.producerIndexOfThis[i]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];Lc(r),r.producerIndexOfThis[i]=e}}function rd(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Lc(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let SM=null;const DM=()=>{},n3=(()=>({...gM,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:DM}))();class i3{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function yi(){return AM}function AM(n){return n.type.prototype.ngOnChanges&&(n.setInput=s3),r3}function r3(){const n=RM(this),e=n?.current;if(e){const t=n.previous;if(t===bs)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function s3(n,e,t,i){const r=this.declaredInputs[t],s=RM(n)||function o3(n,e){return n[IM]=e}(n,{previous:bs,current:null}),o=s.current||(s.current={}),a=s.previous,c=a[r];o[r]=new i3(c&&c.currentValue,e,a===bs),n[i]=e}yi.ngInherit=!0;const IM="__ngSimpleChanges__";function RM(n){return n[IM]||null}const Ms=function(n,e,t){};function fn(n){for(;Array.isArray(n);)n=n[Tn];return n}function tr(n,e){return fn(e[n.index])}function NM(n,e){return n.data[e]}function mr(n,e){const t=e[n];return er(t)?t:t[Tn]}function Ro(n,e){return null==e?null:n[e]}function FM(n){n[Nc]=0}function h3(n){1024&n[bt]||(n[bt]|=1024,kM(n,1))}function LM(n){1024&n[bt]&&(n[bt]&=-1025,kM(n,-1))}function kM(n,e){let t=n[yn];if(null===t)return;t[Zu]+=e;let i=t;for(t=t[yn];null!==t&&(1===e&&1===i[Zu]||-1===e&&0===i[Zu]);)t[Zu]+=e,i=t,t=t[yn]}const ct={lFrame:YM(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function VM(){return ct.bindingsEnabled}function Bc(){return null!==ct.skipHydrationRootTNode}function oe(){return ct.lFrame.lView}function Ut(){return ct.lFrame.tView}function ki(n){return ct.lFrame.contextLView=n,n[kn]}function Bi(n){return ct.lFrame.contextLView=null,n}function bi(){let n=HM();for(;null!==n&&64===n.type;)n=n.parent;return n}function HM(){return ct.lFrame.currentTNode}function Ss(n,e){const t=ct.lFrame;t.currentTNode=n,t.isParent=e}function f0(){return ct.lFrame.isParent}function p0(){ct.lFrame.isParent=!1}function Ui(){const n=ct.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Uc(){return ct.lFrame.bindingIndex++}function Ys(n){const e=ct.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function S3(n,e){const t=ct.lFrame;t.bindingIndex=t.bindingRootIndex=n,g0(e)}function g0(n){ct.lFrame.currentDirectiveIndex=n}function WM(){return ct.lFrame.currentQueryIndex}function _0(n){ct.lFrame.currentQueryIndex=n}function E3(n){const e=n[ke];return 2===e.type?e.declTNode:1===e.type?n[Ai]:null}function $M(n,e,t){if(t&Rt.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&Rt.Host||(r=E3(s),null===r||(s=s[Pc],10&r.type))););if(null===r)return!1;e=r,n=s}const i=ct.lFrame=qM();return i.currentTNode=e,i.lView=n,!0}function v0(n){const e=qM(),t=n[ke];ct.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function qM(){const n=ct.lFrame,e=null===n?null:n.child;return null===e?YM(n):e}function YM(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function XM(){const n=ct.lFrame;return ct.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const JM=XM;function y0(){const n=XM();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Vi(){return ct.lFrame.selectedIndex}function ya(n){ct.lFrame.selectedIndex=n}function xn(){const n=ct.lFrame;return NM(n.tView,n.selectedIndex)}let KM=!0;function jf(){return KM}function Oo(n){KM=n}function Wf(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),null!=u&&(n.destroyHooks??=[]).push(t,u)}}function $f(n,e,t){QM(n,e,3,t)}function qf(n,e,t,i){(3&n[bt])===t&&QM(n,e,t,i)}function b0(n,e){let t=n[bt];(3&t)===e&&(t&=8191,t+=1,n[bt]=t)}function QM(n,e,t,i){const s=i??-1,o=e.length-1;let a=0;for(let c=void 0!==i?65535&n[Nc]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=i&&a>=i)break}else e[c]<0&&(n[Nc]+=65536),(a<s||-1==s)&&(N3(n,t,e,c),n[Nc]=(4294901760&n[Nc])+c+2),c++}function eS(n,e){Ms(4,n,e);const t=Nr(null);try{e.call(n)}finally{Nr(t),Ms(5,n,e)}}function N3(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];r?n[bt]>>13<n[Nc]>>16&&(3&n[bt])===e&&(n[bt]+=8192,eS(a,s)):eS(a,s)}const Vc=-1;class od{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function x0(n){return n!==Vc}function ad(n){return 32767&n}function cd(n,e){let t=function B3(n){return n>>16}(n),i=e;for(;t>0;)i=i[Pc],t--;return i}let M0=!0;function Yf(n){const e=M0;return M0=n,e}const tS=255,nS=5;let U3=0;const Cs={};function Xf(n,e){const t=iS(n,e);if(-1!==t)return t;const i=e[ke];i.firstCreatePass&&(n.injectorIndex=e.length,S0(i.data,n),S0(e,null),S0(i.blueprint,null));const r=Jf(n,e),s=n.injectorIndex;if(x0(r)){const o=ad(r),a=cd(r,e),c=a[ke].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=r,s}function S0(n,e){n.push(0,0,0,0,0,0,0,0,e)}function iS(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Jf(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=uS(r),null===i)return Vc;if(t++,r=r[Pc],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return Vc}function C0(n,e,t){!function V3(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Xu)&&(i=t[Xu]),null==i&&(i=t[Xu]=U3++);const r=i&tS;e.data[n+(r>>nS)]|=1<<r}(n,e,t)}function rS(n,e,t){if(t&Rt.Optional||void 0!==n)return n;j_()}function sS(n,e,t,i){if(t&Rt.Optional&&void 0===i&&(i=null),!(t&(Rt.Self|Rt.Host))){const r=n[Do],s=Ki(void 0);try{return r?r.get(e,i,t&Rt.Optional):qx(e,i,t&Rt.Optional)}finally{Ki(s)}}return rS(i,0,t)}function oS(n,e,t,i=Rt.Default,r){if(null!==n){if(2048&e[bt]&&!(i&Rt.Self)){const o=function $3(n,e,t,i,r){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[bt]&&!(512&o[bt]);){const a=aS(s,o,t,i|Rt.Self,Cs);if(a!==Cs)return a;let c=s.parent;if(!c){const l=o[dM];if(l){const u=l.get(t,Cs,i);if(u!==Cs)return u}c=uS(o),o=o[Pc]}s=c}return r}(n,e,t,i,Cs);if(o!==Cs)return o}const s=aS(n,e,t,i,Cs);if(s!==Cs)return s}return sS(e,t,i,r)}function aS(n,e,t,i,r){const s=function G3(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Xu)?n[Xu]:void 0;return"number"==typeof e?e>=0?e&tS:W3:e}(t);if("function"==typeof s){if(!$M(e,n,i))return i&Rt.Host?rS(r,0,i):sS(e,t,i,r);try{let o;if(o=s(i),null!=o||i&Rt.Optional)return o;j_()}finally{JM()}}else if("number"==typeof s){let o=null,a=iS(n,e),c=Vc,l=i&Rt.Host?e[Bn][Ai]:null;for((-1===a||i&Rt.SkipSelf)&&(c=-1===a?Jf(n,e):e[a+8],c!==Vc&&lS(i,!1)?(o=e[ke],a=ad(c),e=cd(c,e)):a=-1);-1!==a;){const u=e[ke];if(cS(s,a,u.data)){const d=z3(a,e,t,o,i,l);if(d!==Cs)return d}c=e[a+8],c!==Vc&&lS(i,e[ke].data[a+8]===l)&&cS(s,a,e)?(o=u,a=ad(c),e=cd(c,e)):a=-1}}return r}function z3(n,e,t,i,r,s){const o=e[ke],a=o.data[n+8],u=Zf(a,o,t,null==i?_a(a)&&M0:i!=o&&0!=(3&a.type),r&Rt.Host&&s===a);return null!==u?ba(e,o,u,a):Cs}function Zf(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,u=s>>20,h=r?a+u:n.directiveEnd;for(let f=i?a:a+u;f<h;f++){const p=o[f];if(f<c&&t===p||f>=c&&p.type===t)return f}if(r){const f=o[c];if(f&&ts(f)&&f.type===t)return c}return null}function ba(n,e,t,i){let r=n[t];const s=e.data;if(function F3(n){return n instanceof od}(r)){const o=r;o.resolving&&function uk(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ue(-200,`Circular dependency in DI detected for ${n}${t}`)}(function $t(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():pt(n)}(s[t]));const a=Yf(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Ki(o.injectImpl):null;$M(n,i,Rt.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function P3(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=AM(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}r&&(t.preOrderHooks??=[]).push(0-n,r),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==l&&Ki(l),Yf(a),o.resolving=!1,JM()}}return r}function cS(n,e,t){return!!(t[e+(n>>nS)]&1<<n)}function lS(n,e){return!(n&Rt.Self||n&Rt.Host&&e)}class Hi{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return oS(this._tNode,this._lView,e,Ff(i),t)}}function W3(){return new Hi(bi(),oe())}function E0(n){return z_(n)?()=>{const e=E0(ut(n));return e&&e()}:va(n)}function uS(n){const e=n[ke],t=e.type;return 2===t?e.declTNode:1===t?n[Ai]:null}const zc="__parameters__";function jc(n,e,t){return js(()=>{const i=function T0(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(c,l,u){const d=c.hasOwnProperty(zc)?c[zc]:Object.defineProperty(c,zc,{value:[]})[zc];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}function $c(n,e){n.forEach(t=>Array.isArray(t)?$c(t,e):e(t))}function hS(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Kf(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function dd(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function _r(n,e,t){let i=qc(n,e);return i>=0?n[1|i]=t:(i=~i,function Q3(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function D0(n,e){const t=qc(n,e);if(t>=0)return n[1|t]}function qc(n,e){return function fS(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const ep=Yu(jc("Optional"),8),tp=Yu(jc("SkipSelf"),4);function op(n){return 128==(128&n.flags)}var Po=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Po||{});const P0=new Map;let MB=0;const F0="__ngContext__";function Ii(n,e){er(e)?(n[F0]=e[ed],function CB(n){P0.set(n[ed],n)}(e)):n[F0]=e}let L0;function k0(n,e){return L0(n,e)}function pd(n){const e=n[yn];return Li(e)?e[yn]:e}function PS(n){return FS(n[Ku])}function NS(n){return FS(n[es])}function FS(n){for(;null!==n&&!Li(n);)n=n[es];return n}function Jc(n,e,t,i,r){if(null!=i){let s,o=!1;Li(i)?s=i:er(i)&&(o=!0,i=i[Tn]);const a=fn(i);0===n&&null!==t?null==r?US(e,t,a):xa(e,t,a,r||null,!0):1===n&&null!==t?xa(e,t,a,r||null,!0):2===n?function fp(n,e,t){const i=dp(n,e);i&&function jB(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function qB(n,e,t,i,r){const s=t[xs];s!==fn(t)&&Jc(e,n,i,s,r);for(let a=_i;a<t.length;a++){const c=t[a];md(c[ke],c,n,e,i,s)}}(e,n,s,t,r)}}function lp(n,e,t){return n.createElement(e,t)}function kS(n,e){const t=n[Fc],i=t.indexOf(e);LM(e),t.splice(i,1)}function up(n,e){if(n.length<=_i)return;const t=_i+e,i=n[t];if(i){const r=i[Qu];null!==r&&r!==n&&kS(r,i),e>0&&(n[t-1][es]=i[es]);const s=Kf(n,_i+e);!function LB(n,e){md(n,e,e[gt],2,null,null),e[Tn]=null,e[Ai]=null}(i[ke],i);const o=s[ws];null!==o&&o.detachView(s[ke]),i[yn]=null,i[es]=null,i[bt]&=-129}return i}function U0(n,e){if(!(256&e[bt])){const t=e[gt];e[td]&&wM(e[td]),e[nd]&&wM(e[nd]),t.destroyNode&&md(n,e,t,3,null,null),function UB(n){let e=n[Ku];if(!e)return V0(n[ke],n);for(;e;){let t=null;if(er(e))t=e[Ku];else{const i=e[_i];i&&(t=i)}if(!t){for(;e&&!e[es]&&e!==n;)er(e)&&V0(e[ke],e),e=e[yn];null===e&&(e=n),er(e)&&V0(e[ke],e),t=e&&e[es]}e=t}}(e)}}function V0(n,e){if(!(256&e[bt])){e[bt]&=-129,e[bt]|=256,function GB(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof od)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],c=s[o+1];Ms(4,a,c);try{c.call(a)}finally{Ms(5,a,c)}}else{Ms(4,r,s);try{s.call(r)}finally{Ms(5,r,s)}}}}}(n,e),function zB(n,e){const t=n.cleanup,i=e[Rc];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else t[s].call(i[t[s+1]]);null!==i&&(e[Rc]=null);const r=e[Ao];if(null!==r){e[Ao]=null;for(let s=0;s<r.length;s++)(0,r[s])()}}(n,e),1===e[ke].type&&e[gt].destroy();const t=e[Qu];if(null!==t&&Li(e[yn])){t!==e[yn]&&kS(t,e);const i=e[ws];null!==i&&i.detachView(n)}!function EB(n){P0.delete(n[ed])}(e)}}function H0(n,e,t){return function BS(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[Tn];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=n.data[i.directiveStart+r];if(s===Kr.None||s===Kr.Emulated)return null}return tr(i,t)}}(n,e.parent,t)}function xa(n,e,t,i,r){n.insertBefore(e,t,i,r)}function US(n,e,t){n.appendChild(e,t)}function VS(n,e,t,i,r){null!==i?xa(n,e,t,i,r):US(n,e,t)}function dp(n,e){return n.parentNode(e)}function HS(n,e,t){return GS(n,e,t)}let z0,$0,gp,GS=function zS(n,e,t){return 40&n.type?tr(n,t):null};function hp(n,e,t,i){const r=H0(n,i,e),s=e[gt],a=HS(i.parent||e[Ai],i,e);if(null!=r)if(Array.isArray(t))for(let c=0;c<t.length;c++)VS(s,r,t[c],a,!1);else VS(s,r,t,a,!1);void 0!==z0&&z0(s,i,e,t,r)}function gd(n,e){if(null!==e){const t=e.type;if(3&t)return tr(e,n);if(4&t)return G0(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return gd(n,i);{const r=n[e.index];return Li(r)?G0(-1,r):fn(r)}}if(32&t)return k0(e,n)()||fn(n[e.index]);{const i=WS(n,e);return null!==i?Array.isArray(i)?i[0]:gd(pd(n[Bn]),i):gd(n,e.next)}}return null}function WS(n,e){return null!==e?n[Bn][Ai].projection[e.projection]:null}function G0(n,e){const t=_i+n+1;if(t<e.length){const i=e[t],r=i[ke].firstChild;if(null!==r)return gd(i,r)}return e[xs]}function j0(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],c=t.type;if(o&&0===e&&(a&&Ii(fn(a),i),t.flags|=2),32!=(32&t.flags))if(8&c)j0(n,e,t.child,i,r,s,!1),Jc(e,n,r,a,s);else if(32&c){const l=k0(t,i);let u;for(;u=l();)Jc(e,n,r,u,s);Jc(e,n,r,a,s)}else 16&c?qS(n,e,i,t,r,s):Jc(e,n,r,a,s);t=o?t.projectionNext:t.next}}function md(n,e,t,i,r,s){j0(t,i,n.firstChild,e,r,s,!1)}function qS(n,e,t,i,r,s){const o=t[Bn],c=o[Ai].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)Jc(e,n,r,c[l],s);else{let l=c;const u=o[yn];op(i)&&(l.flags|=128),j0(n,e,l,u,r,s,!0)}}function YS(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function XS(n,e,t){const{mergedAttrs:i,classes:r,styles:s}=t;null!==i&&t0(n,e,i),null!==r&&YS(n,e,r),null!==s&&function XB(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function KS(n){return function q0(){if(void 0===gp&&(gp=null,hn.trustedTypes))try{gp=hn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return gp}()?.createScriptURL(n)||n}class QS{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Gx})`}}function No(n){return n instanceof QS?n.changingThisBreaksApplicationSecurity:n}function _d(n,e){const t=function sU(n){return n instanceof QS&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Gx})`)}return t===e}const lU=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Qc=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Qc||{});function vr(n){const e=yd();return e?e.sanitize(Qc.URL,n)||"":_d(n,"URL")?No(n):function Y0(n){return(n=String(n)).match(lU)?n:"unsafe:"+n}(pt(n))}function oC(n){const e=yd();if(e)return KS(e.sanitize(Qc.RESOURCE_URL,n)||"");if(_d(n,"ResourceURL"))return KS(No(n));throw new ue(904,!1)}function yd(){const n=oe();return n&&n[Oc].sanitizer}class qe{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Le({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const bd=new qe("ENVIRONMENT_INITIALIZER"),cC=new qe("INJECTOR",-1),lC=new qe("INJECTOR_DEF_TYPES");class K0{get(e,t=qu){if(t===qu){const i=new Error(`NullInjectorError: No provider for ${Qn(e)}!`);throw i.name="NullInjectorError",i}return t}}function xU(...n){return{\u0275providers:dC(0,n),\u0275fromNgModule:!0}}function dC(n,...e){const t=[],i=new Set;let r;const s=o=>{t.push(o)};return $c(e,o=>{const a=o;_p(a,s,[],i)&&(r||=[],r.push(a))}),void 0!==r&&hC(r,s),t}function hC(n,e){for(let t=0;t<n.length;t++){const{ngModule:i,providers:r}=n[t];Q0(r,s=>{e(s,i)})}}function _p(n,e,t,i){if(!(n=ut(n)))return!1;let r=null,s=Of(n);const o=!s&&Bt(n);if(s||o){if(o&&!o.standalone)return!1;r=n}else{const c=n.ngModule;if(s=Of(c),!s)return!1;r=c}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of c)_p(l,e,t,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;i.add(r);try{$c(s.imports,u=>{_p(u,e,t,i)&&(l||=[],l.push(u))})}finally{}void 0!==l&&hC(l,e)}if(!a){const l=va(r)||(()=>new r);e({provide:r,useFactory:l,deps:Ht},r),e({provide:lC,useValue:r,multi:!0},r),e({provide:bd,useValue:()=>Ue(r),multi:!0},r)}const c=s.providers;if(null!=c&&!a){const l=n;Q0(c,u=>{e(u,l)})}}}return r!==n&&void 0!==n.providers}function Q0(n,e){for(let t of n)G_(t)&&(t=t.\u0275providers),Array.isArray(t)?Q0(t,e):e(t)}const MU=Qt({provide:String,useValue:Qt});function ev(n){return null!==n&&"object"==typeof n&&MU in n}function Ma(n){return"function"==typeof n}const tv=new qe("Set Injector scope."),vp={},CU={};let nv;function yp(){return void 0===nv&&(nv=new K0),nv}class ir{}class bp extends ir{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,rv(e,o=>this.processProvider(o)),this.records.set(cC,el(void 0,this)),r.has("environment")&&this.records.set(ir,el(void 0,this));const s=this.records.get(tv);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(lC.multi,Ht,Rt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=To(this),i=Ki(void 0);try{return e()}finally{To(t),Ki(i)}}get(e,t=qu,i=Rt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Kx))return e[Kx](this);i=Ff(i);const s=To(this),o=Ki(void 0);try{if(!(i&Rt.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function IU(n){return"function"==typeof n||"object"==typeof n&&n instanceof qe}(e)&&Rf(e);c=l&&this.injectableDefInScope(l)?el(iv(e),vp):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(i&Rt.Self?yp():this.parent).get(e,t=i&Rt.Optional&&t===qu?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Nf]=a[Nf]||[]).unshift(Qn(e)),s)throw a;return function Ck(n,e,t,i){const r=n[Nf];throw e[Xx]&&r.unshift(e[Xx]),n.message=function Ek(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=Qn(e);if(Array.isArray(e))r=e.map(Qn).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Qn(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(bk,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[Nf]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Ki(o),To(s)}}resolveInjectorInitializers(){const e=To(this),t=Ki(void 0);try{const r=this.get(bd.multi,Ht,Rt.Self);for(const s of r)s()}finally{To(e),Ki(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(Qn(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ue(205,!1)}processProvider(e){let t=Ma(e=ut(e))?e:ut(e&&e.provide);const i=function TU(n){return ev(n)?el(void 0,n.useValue):el(function gC(n,e,t){let i;if(Ma(n)){const r=ut(n);return va(r)||iv(r)}if(ev(n))i=()=>ut(n.useValue);else if(function pC(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...K_(n.deps||[]));else if(function fC(n){return!(!n||!n.useExisting)}(n))i=()=>Ue(ut(n.useExisting));else{const r=ut(n&&(n.useClass||n.provide));if(!function DU(n){return!!n.deps}(n))return va(r)||iv(r);i=()=>new r(...K_(n.deps))}return i}(n),vp)}(e);if(Ma(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=el(void 0,vp,!0),r.factory=()=>K_(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===vp&&(t.value=CU,t.value=t.factory()),"object"==typeof t.value&&t.value&&function AU(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=ut(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function iv(n){const e=Rf(n),t=null!==e?e.factory:va(n);if(null!==t)return t;if(n instanceof qe)throw new ue(204,!1);if(n instanceof Function)return function EU(n){const e=n.length;if(e>0)throw dd(e,"?"),new ue(204,!1);const t=function mk(n){return n&&(n[Pf]||n[Wx])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new ue(204,!1)}function el(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function rv(n,e){for(const t of n)Array.isArray(t)?rv(t,e):t&&G_(t)?rv(t.\u0275providers,e):e(t)}const wp=new qe("AppId",{providedIn:"root",factory:()=>RU}),RU="ng",mC=new qe("Platform Initializer"),tl=new qe("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),_C=new qe("CSP nonce",{providedIn:"root",factory:()=>function Kc(){if(void 0!==$0)return $0;if(typeof document<"u")return document;throw new ue(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let vC=(n,e,t)=>null;function hv(n,e,t=!1){return vC(n,e,t)}class HU{}class wC{}class GU{resolveComponentFactory(e){throw function zU(n){const e=Error(`No component factory found for ${Qn(n)}.`);return e.ngComponent=n,e}(e)}}let Tp=(()=>{class n{static#e=this.NULL=new GU}return n})();function jU(){return rl(bi(),oe())}function rl(n,e){return new qt(tr(n,e))}let qt=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=jU}return n})();function WU(n){return n instanceof qt?n.nativeElement:n}class gv{}let yr=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function $U(){const n=oe(),t=mr(bi().index,n);return(er(t)?t:n)[gt]}()}return n})(),qU=(()=>{class n{static#e=this.\u0275prov=Le({token:n,providedIn:"root",factory:()=>null})}return n})();class Md{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const YU=new Md("16.2.7"),mv={};function EC(n,e=null,t=null,i){const r=TC(n,e,t,i);return r.resolveInjectorInitializers(),r}function TC(n,e=null,t=null,i,r=new Set){const s=[t||Ht,xU(n)];return i=i||("object"==typeof n?void 0:Qn(n)),new bp(s,e||yp(),i||null,r)}let wi=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=qu;static#t=this.NULL=new K0;static create(t,i){if(Array.isArray(t))return EC({name:""},i,t,"");{const r=t.name??"";return EC({name:r},t.parent,t.providers,r)}}static#n=this.\u0275prov=Le({token:n,providedIn:"any",factory:()=>Ue(cC)});static#i=this.__NG_ELEMENT_ID__=-1}return n})();function vv(n){return n.ngOriginalError}class Js{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&vv(e);for(;t&&vv(t);)t=vv(t);return t||null}}function bv(n){return e=>{setTimeout(n,void 0,e)}}const et=class tV extends Wt{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&"object"==typeof e){const c=e;r=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=bv(s),r&&(r=bv(r)),o&&(o=bv(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof Fn&&e.add(a),a}};function AC(...n){}class Ft{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new et(!1),this.onMicrotaskEmpty=new et(!1),this.onStable=new et(!1),this.onError=new et(!1),typeof Zone>"u")throw new ue(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function nV(){const n="function"==typeof hn.requestAnimationFrame;let e=hn[n?"requestAnimationFrame":"setTimeout"],t=hn[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function sV(n){const e=()=>{!function rV(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(hn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,xv(n),n.isCheckStableRunning=!0,wv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),xv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{if(function aV(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(r,s,o,a);try{return IC(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),RC(n)}},onInvoke:(t,i,r,s,o,a,c)=>{try{return IC(n),t.invoke(r,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),RC(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,xv(n),wv(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ft.isInAngularZone())throw new ue(909,!1)}static assertNotInAngularZone(){if(Ft.isInAngularZone())throw new ue(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,iV,AC,AC);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const iV={};function wv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function xv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function IC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function RC(n){n._nesting--,wv(n)}class oV{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new et,this.onMicrotaskEmpty=new et,this.onStable=new et,this.onError=new et}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const OC=new qe("",{providedIn:"root",factory:PC});function PC(){const n=Ve(Ft);let e=!0;return function Vx(...n){const e=$u(n),t=function tk(n,e){return"number"==typeof U_(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?Zn(i[0]):Dc(t)(ai(i,e)):Rr}(new rn(r=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{r.next(e),r.complete()})}),new rn(r=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{Ft.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,r.next(!0))})})});const o=n.onUnstable.subscribe(()=>{Ft.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{r.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(Hx()))}function Zs(n){return n instanceof Function?n():n}let Mv=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Le({token:n,providedIn:"root",factory:()=>new n})}return n})();function Sd(n){for(;n;){n[bt]|=64;const e=pd(n);if(s0(n)&&!e)return n;n=e}return null}const BC=new qe("",{providedIn:"root",factory:()=>!1});let Ap=null;function zC(n,e){return n[e]??WC()}function GC(n,e){const t=WC();t.producerNode?.length&&(n[e]=Ap,t.lView=n,Ap=jC())}const _V={...gM,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Sd(n.lView)},lView:null};function jC(){return Object.create(_V)}function WC(){return Ap??=jC(),Ap}const vt={};function _e(n){$C(Ut(),oe(),Vi()+n,!1)}function $C(n,e,t,i){if(!i)if(3==(3&e[bt])){const s=n.preOrderCheckHooks;null!==s&&$f(e,s,t)}else{const s=n.preOrderHooks;null!==s&&qf(e,s,0,t)}ya(t)}function U(n,e=Rt.Default){const t=oe();return null===t?Ue(n,e):oS(bi(),t,ut(n),e)}function Ip(n,e,t,i,r,s,o,a,c,l,u){const d=e.blueprint.slice();return d[Tn]=r,d[bt]=140|i,(null!==l||n&&2048&n[bt])&&(d[bt]|=2048),FM(d),d[yn]=d[Pc]=n,d[kn]=t,d[Oc]=o||n&&n[Oc],d[gt]=a||n&&n[gt],d[Do]=c||n&&n[Do]||null,d[Ai]=s,d[ed]=function SB(){return MB++}(),d[$s]=u,d[dM]=l,d[Bn]=2==e.type?n[Bn]:d,d}function al(n,e,t,i,r){let s=n.data[e];if(null===s)s=function Sv(n,e,t,i,r){const s=HM(),o=f0(),c=n.data[e]=function CV(n,e,t,i,r,s){let o=e?e.injectorIndex:-1,a=0;return Bc()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c,c.prev=s)),c}(n,e,t,i,r),function M3(){return ct.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function sd(){const n=ct.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Ss(s,!0),s}function Cd(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function YC(n,e,t,i,r){const s=zC(e,td),o=Vi(),a=2&i;try{ya(-1),a&&e.length>Ot&&$C(n,e,Ot,!1),Ms(a?2:0,r);const l=a?s:null,u=a0(l);try{null!==l&&(l.dirty=!1),t(i,r)}finally{c0(l,u)}}finally{a&&null===e[td]&&GC(e,td),ya(o),Ms(a?3:1,r)}}function Cv(n,e,t){if(r0(e)){const i=Nr(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{Nr(i)}}}function Ev(n,e,t){VM()&&(function OV(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;_a(t)&&function UV(n,e,t){const i=tr(e,n),r=XC(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=Rp(n,Ip(n,r,null,o,i,e,null,n[Oc].rendererFactory.createRenderer(i,t),null,null,null));n[e.index]=a}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Xf(t,e),Ii(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const c=n.data[a],l=ba(e,n,a,t);Ii(l,e),null!==o&&VV(0,a-r,l,c,0,o),ts(c)&&(mr(t.index,e)[kn]=ba(e,n,a,t))}}(n,e,t,tr(t,e)),64==(64&t.flags)&&eE(n,e,t))}function Tv(n,e,t=tr){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function XC(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Dv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Dv(n,e,t,i,r,s,o,a,c,l,u){const d=Ot+i,h=d+r,f=function yV(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:vt);return t}(d,h),p="function"==typeof l?l():l;return f[ke]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}let JC=n=>null;function ZC(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=null===t?{}:t;const s=n[r];null===i?KC(t,e,r,s):i.hasOwnProperty(r)&&KC(t,e,i[r],s)}return t}function KC(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function Av(n,e,t,i){if(VM()){const r=null===i?null:{"":-1},s=function NV(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(sM(e,o.selectors,!1))if(i||(i=[]),ts(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o),Iv(n,e,a.length)}else i.unshift(o),Iv(n,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&QC(n,e,t,o,r,a),r&&function FV(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new ue(-301,!1);i.push(e[r],s)}}}(t,i,r)}t.mergedAttrs=Ju(t.mergedAttrs,t.attrs)}function QC(n,e,t,i,r,s){for(let l=0;l<i.length;l++)C0(Xf(t,e),n,i[l].type);!function kV(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let l=0;l<i.length;l++){const u=i[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=Cd(n,e,i.length,null);for(let l=0;l<i.length;l++){const u=i[l];t.mergedAttrs=Ju(t.mergedAttrs,u.hostAttrs),BV(n,t,e,c,u),LV(c,u,r),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function EV(n,e,t){const r=e.directiveEnd,s=n.data,o=e.attrs,a=[];let c=null,l=null;for(let u=e.directiveStart;u<r;u++){const d=s[u],h=t?t.get(d):null,p=h?h.outputs:null;c=ZC(d.inputs,u,c,h?h.inputs:null),l=ZC(d.outputs,u,l,p);const _=null===c||null===o||rM(e)?null:HV(c,u,o);a.push(_)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(n,t,s)}function eE(n,e,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,o=function C3(){return ct.lFrame.currentDirectiveIndex}();try{ya(s);for(let a=i;a<r;a++){const c=n.data[a],l=e[a];g0(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&PV(c,l)}}finally{ya(-1),g0(o)}}function PV(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Iv(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function LV(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;ts(e)&&(t[""]=n)}}function BV(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=va(r.type)),o=new od(s,ts(r),U);n.blueprint[i]=o,t[i]=o,function IV(n,e,t,i,r){const s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function RV(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,i,s)}}(n,e,i,Cd(n,t,r.hostVars,vt),r)}function Es(n,e,t,i,r,s){const o=tr(n,e);!function Rv(n,e,t,i,r,s,o){if(null==s)n.removeAttribute(e,r,t);else{const a=null==o?pt(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}(e[gt],o,s,n.value,t,i,r)}function VV(n,e,t,i,r,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)tE(i,t,o[a++],o[a++],o[a++])}function tE(n,e,t,i,r){const s=Nr(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(i)&&(r=o[i].call(e,r)),null!==n.setInput?n.setInput(e,r,t,i):e[i]=r}finally{Nr(s)}}function HV(n,e,t){let i=null,r=0;for(;r<t.length;){const s=t[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===i&&(i=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){i.push(s,o[a+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function nE(n,e,t,i){return[n,!0,!1,e,null,0,i,t,null,null,null]}function iE(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const s=t[i+1];if(-1!==s){const o=n.data[s];_0(t[i]),o.contentQueries(2,e[s],s)}}}function Rp(n,e){return n[Ku]?n[uM][es]=e:n[Ku]=e,n[uM]=e,e}function Ov(n,e,t){_0(0);const i=Nr(null);try{e(n,t)}finally{Nr(i)}}function rE(n){return n[Rc]||(n[Rc]=[])}function sE(n){return n.cleanup||(n.cleanup=[])}function aE(n,e){const t=n[Do],i=t?t.get(Js,null):null;i&&i.handleError(e)}function Pv(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];tE(n.data[o],e[o],i,a,r)}}function zV(n,e){const t=mr(e,n),i=t[ke];!function GV(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(i,t);const r=t[Tn];null!==r&&null===t[$s]&&(t[$s]=hv(r,t[Do])),Nv(i,t,t[kn])}function Nv(n,e,t){v0(e);try{const i=n.viewQuery;null!==i&&Ov(1,i,t);const r=n.template;null!==r&&YC(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&iE(n,e),n.staticViewQueries&&Ov(2,n.viewQuery,t);const s=n.components;null!==s&&function jV(n,e){for(let t=0;t<e.length;t++)zV(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[bt]&=-5,y0()}}let cE=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,i,r){const s=typeof Zone>"u"?null:Zone.current,o=function t3(n,e,t){const i=Object.create(n3);t&&(i.consumerAllowSignalWrites=!0),i.fn=n,i.schedule=e;const r=o=>{i.cleanupFn=o};return i.ref={notify:()=>yM(i),run:()=>{if(i.dirty=!1,i.hasRun&&!bM(i))return;i.hasRun=!0;const o=a0(i);try{i.cleanupFn(),i.cleanupFn=DM,i.fn(r)}finally{c0(i,o)}},cleanup:()=>i.cleanupFn()},i.ref}(t,l=>{this.all.has(l)&&this.queue.set(l,s)},r);let a;this.all.add(o),o.notify();const c=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=i?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[t,i]of this.queue)this.queue.delete(t),i?i.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Le({token:n,providedIn:"root",factory:()=>new n})}return n})();function Op(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=H_(r,a):2==s&&(i=H_(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function Ed(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];null!==s&&i.push(fn(s)),Li(s)&&lE(s,i);const o=t.type;if(8&o)Ed(n,e,t.child,i);else if(32&o){const a=k0(t,e);let c;for(;c=a();)i.push(c)}else if(16&o){const a=WS(e,t);if(Array.isArray(a))i.push(...a);else{const c=pd(e[Bn]);Ed(c[ke],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function lE(n,e){for(let t=_i;t<n.length;t++){const i=n[t],r=i[ke].firstChild;null!==r&&Ed(i[ke],i,r,e)}n[xs]!==n[Tn]&&e.push(n[xs])}function Pp(n,e,t,i=!0){const r=e[Oc],s=r.rendererFactory,o=r.afterRenderEventManager;s.begin?.(),o?.begin();try{uE(n,e,n.template,t)}catch(c){throw i&&aE(e,c),c}finally{s.end?.(),r.effectManager?.flush(),o?.end()}}function uE(n,e,t,i){const r=e[bt];if(256!=(256&r)){e[Oc].effectManager?.flush(),v0(e);try{FM(e),function GM(n){return ct.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&YC(n,e,t,2,i);const o=3==(3&r);if(o){const l=n.preOrderCheckHooks;null!==l&&$f(e,l,null)}else{const l=n.preOrderHooks;null!==l&&qf(e,l,0,null),b0(e,0)}if(function qV(n){for(let e=PS(n);null!==e;e=NS(e)){if(!e[hM])continue;const t=e[Fc];for(let i=0;i<t.length;i++){h3(t[i])}}}(e),dE(e,2),null!==n.contentQueries&&iE(n,e),o){const l=n.contentCheckHooks;null!==l&&$f(e,l)}else{const l=n.contentHooks;null!==l&&qf(e,l,1),b0(e,1)}!function vV(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const i=zC(e,nd);try{for(let r=0;r<t.length;r++){const s=t[r];if(s<0)ya(~s);else{const o=s,a=t[++r],c=t[++r];S3(a,o),i.dirty=!1;const l=a0(i);try{c(2,e[o])}finally{c0(i,l)}}}}finally{null===e[nd]&&GC(e,nd),ya(-1)}}(n,e);const a=n.components;null!==a&&fE(e,a,0);const c=n.viewQuery;if(null!==c&&Ov(2,c,i),o){const l=n.viewCheckHooks;null!==l&&$f(e,l)}else{const l=n.viewHooks;null!==l&&qf(e,l,2),b0(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[bt]&=-73,LM(e)}finally{y0()}}}function dE(n,e){for(let t=PS(n);null!==t;t=NS(t))for(let i=_i;i<t.length;i++)hE(t[i],e)}function YV(n,e,t){hE(mr(e,n),t)}function hE(n,e){if(!function u3(n){return 128==(128&n[bt])}(n))return;const t=n[ke],i=n[bt];if(80&i&&0===e||1024&i||2===e)uE(t,n,t.template,n[kn]);else if(n[Zu]>0){dE(n,1);const r=t.components;null!==r&&fE(n,r,1)}}function fE(n,e,t){for(let i=0;i<e.length;i++)YV(n,e[i],t)}class Td{get rootNodes(){const e=this._lView,t=e[ke];return Ed(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[kn]}set context(e){this._lView[kn]=e}get destroyed(){return 256==(256&this._lView[bt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[yn];if(Li(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(up(e,i),Kf(t,i))}this._attachedToViewContainer=!1}U0(this._lView[ke],this._lView)}onDestroy(e){!function BM(n,e){if(256==(256&n[bt]))throw new ue(911,!1);null===n[Ao]&&(n[Ao]=[]),n[Ao].push(e)}(this._lView,e)}markForCheck(){Sd(this._cdRefInjectingView||this._lView)}detach(){this._lView[bt]&=-129}reattach(){this._lView[bt]|=128}detectChanges(){Pp(this._lView[ke],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ue(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function BB(n,e){md(n,e,e[gt],2,null,null)}(this._lView[ke],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ue(902,!1);this._appRef=e}}class XV extends Td{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Pp(e[ke],e,e[kn],!1)}checkNoChanges(){}get context(){return null}}class pE extends Tp{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Bt(e);return new Dd(t,this.ngModule)}}function gE(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class ZV{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=Ff(i);const r=this.injector.get(e,mv,i);return r!==mv||t===mv?r:this.parentInjector.get(e,t,i)}}class Dd extends wC{get inputs(){const e=this.componentDef,t=e.inputTransforms,i=gE(e.inputs);if(null!==t)for(const r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return gE(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Lk(n){return n.map(Fk).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let s=(r=r||this.ngModule)instanceof ir?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new ZV(e,s):e,a=o.get(gv,null);if(null===a)throw new ue(407,!1);const d={rendererFactory:a,sanitizer:o.get(qU,null),effectManager:o.get(cE,null),afterRenderEventManager:o.get(Mv,null)},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",p=i?function bV(n,e,t,i){const s=i.get(BC,!1)||t===Kr.ShadowDom,o=n.selectRootElement(e,s);return function wV(n){JC(n)}(o),o}(h,i,this.componentDef.encapsulation,o):lp(h,f,function JV(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(f)),g=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let b=null;null!==p&&(b=hv(p,o,!0));const w=Dv(0,null,null,1,0,null,null,null,null,null,null),x=Ip(null,w,null,g,null,null,d,h,o,null,b);let S,T;v0(x);try{const E=this.componentDef;let O,C=null;E.findHostDirectiveDefs?(O=[],C=new Map,E.findHostDirectiveDefs(E,O,C),O.push(E)):O=[E];const I=function QV(n,e){const t=n[ke],i=Ot;return n[i]=e,al(t,i,2,"#host",null)}(x,p),V=function e4(n,e,t,i,r,s,o){const a=r[ke];!function t4(n,e,t,i){for(const r of n)e.mergedAttrs=Ju(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(Op(e,e.mergedAttrs,!0),null!==t&&XS(i,t,e))}(i,n,e,o);let c=null;null!==e&&(c=hv(e,r[Do]));const l=s.rendererFactory.createRenderer(e,t);let u=16;t.signals?u=4096:t.onPush&&(u=64);const d=Ip(r,XC(t),null,u,r[n.index],n,s,l,null,null,c);return a.firstCreatePass&&Iv(a,n,i.length-1),Rp(r,d),r[n.index]=d}(I,p,E,O,x,d,h);T=NM(w,Ot),p&&function i4(n,e,t,i){if(i)t0(n,t,["ng-version",YU.full]);else{const{attrs:r,classes:s}=function kk(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!Qr(r))break;r=s}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&t0(n,t,r),s&&s.length>0&&YS(n,t,s.join(" "))}}(h,E,p,i),void 0!==t&&function r4(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const s=t[r];i.push(null!=s?Array.from(s):null)}}(T,this.ngContentSelectors,t),S=function n4(n,e,t,i,r,s){const o=bi(),a=r[ke],c=tr(o,r);QC(a,r,o,t,null,i);for(let u=0;u<t.length;u++)Ii(ba(r,a,o.directiveStart+u,o),r);eE(a,r,o),c&&Ii(c,r);const l=ba(r,a,o.directiveStart+o.componentOffset,o);if(n[kn]=r[kn]=l,null!==s)for(const u of s)u(l,e);return Cv(a,o,n),l}(V,E,O,C,x,[s4]),Nv(w,x,null)}finally{y0()}return new KV(this.componentType,S,rl(T,x),x,T)}}class KV extends HU{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new XV(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;Pv(s[ke],s,r,e,t),this.previousInputValues.set(e,t),Sd(mr(this._tNode.index,s))}}get injector(){return new Hi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function s4(){const n=bi();Wf(oe()[ke],n)}function bE(n){const e=n.inputConfig,t={};for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];Array.isArray(r)&&r[2]&&(t[i]=r[2])}n.inputTransforms=t}function Fv(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ts(n,e,t){return n[e]=t}function Ri(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Xt(n,e,t,i){const r=oe();return Ri(r,Uc(),e)&&(Ut(),Es(xn(),r,n,e,t,i)),Xt}function Oe(n,e,t,i,r,s,o,a){const c=oe(),l=Ut(),u=n+Ot,d=l.firstCreatePass?function P4(n,e,t,i,r,s,o,a,c){const l=e.consts,u=al(e,n,4,o||null,Ro(l,a));Av(e,t,u,Ro(l,c)),Wf(e,u);const d=u.tView=Dv(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,l,c,e,t,i,r,s,o):l.data[u];Ss(d,!1);const h=PE(l,c,d,n);jf()&&hp(l,c,h,d),Ii(h,c),Rp(c,c[u]=nE(h,c,h,d)),Vf(d)&&Ev(l,c,d),null!=o&&Tv(c,d,a)}let PE=function NE(n,e,t,i){return Oo(!0),e[gt].createComment("")};function fe(n,e,t){const i=oe();return Ri(i,Uc(),e)&&function br(n,e,t,i,r,s,o,a){const c=tr(e,t);let u,l=e.inputs;!a&&null!=l&&(u=l[i])?(Pv(n,t,u,i,r),_a(e)&&function DV(n,e){const t=mr(e,n);16&t[bt]||(t[bt]|=64)}(t,e.index)):3&e.type&&(i=function TV(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(c,i,r))}(Ut(),xn(),i,n,e,i[gt],t,!1),fe}function Hv(n,e,t,i,r){const o=r?"class":"style";Pv(n,t,e.inputs[o],o,i)}function v(n,e,t,i){const r=oe(),s=Ut(),o=Ot+n,a=r[gt],c=s.firstCreatePass?function k4(n,e,t,i,r,s){const o=e.consts,c=al(e,n,2,i,Ro(o,r));return Av(e,t,c,Ro(o,s)),null!==c.attrs&&Op(c,c.attrs,!1),null!==c.mergedAttrs&&Op(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,r,e,t,i):s.data[o],l=FE(s,r,c,a,e,n);r[o]=l;const u=Vf(c);return Ss(c,!0),XS(a,l,c),32!=(32&c.flags)&&jf()&&hp(s,r,l,c),0===function p3(){return ct.lFrame.elementDepthCount}()&&Ii(l,r),function g3(){ct.lFrame.elementDepthCount++}(),u&&(Ev(s,r,c),Cv(s,c,r)),null!==i&&Tv(r,c),v}function y(){let n=bi();f0()?p0():(n=n.parent,Ss(n,!1));const e=n;(function _3(n){return ct.skipHydrationRootTNode===n})(e)&&function w3(){ct.skipHydrationRootTNode=null}(),function m3(){ct.lFrame.elementDepthCount--}();const t=Ut();return t.firstCreatePass&&(Wf(t,n),r0(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function L3(n){return 0!=(8&n.flags)}(e)&&Hv(t,e,oe(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function k3(n){return 0!=(16&n.flags)}(e)&&Hv(t,e,oe(),e.stylesWithoutHost,!1),y}function P(n,e,t,i){return v(n,e,t,i),y(),P}let FE=(n,e,t,i,r,s)=>(Oo(!0),lp(i,r,function ZM(){return ct.lFrame.currentNamespace}()));function rr(){return oe()}function Nd(n){return!!n&&"function"==typeof n.then}function BE(n){return!!n&&"function"==typeof n.subscribe}function pe(n,e,t,i){const r=oe(),s=Ut(),o=bi();return function VE(n,e,t,i,r,s,o){const a=Vf(i),l=n.firstCreatePass&&sE(n),u=e[kn],d=rE(e);let h=!0;if(3&i.type||o){const _=tr(i,e),m=o?o(_):_,g=d.length,b=o?x=>o(fn(x[i.index])):i.index;let w=null;if(!o&&a&&(w=function G4(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[Rc],c=r[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==w)(w.__ngLastListenerFn__||w).__ngNextListenerFn__=s,w.__ngLastListenerFn__=s,h=!1;else{s=zE(i,e,u,s,!1);const x=t.listen(m,r,s);d.push(s,x),l&&l.push(r,b,g,g+1)}}else s=zE(i,e,u,s,!1);const f=i.outputs;let p;if(h&&null!==f&&(p=f[r])){const _=p.length;if(_)for(let m=0;m<_;m+=2){const S=e[p[m]][p[m+1]].subscribe(s),T=d.length;d.push(s,S),l&&l.push(r,i.index,T,-(T+1))}}}(s,r,r[gt],o,n,e,i),pe}function HE(n,e,t,i){try{return Ms(6,e,t),!1!==t(i)}catch(r){return aE(n,r),!1}finally{Ms(7,e,t)}}function zE(n,e,t,i,r){return function s(o){if(o===Function)return i;Sd(n.componentOffset>-1?mr(n.index,e):e);let c=HE(e,t,i,o),l=s.__ngNextListenerFn__;for(;l;)c=HE(e,t,l,o)&&c,l=l.__ngNextListenerFn__;return r&&!1===c&&o.preventDefault(),c}}function rt(n=1){return function T3(n){return(ct.lFrame.contextLView=function D3(n,e){for(;n>0;)e=e[Pc],n--;return e}(n,ct.lFrame.contextLView))[kn]}(n)}function j4(n,e){let t=null;const i=function Rk(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?sM(n,s,!0):Nk(i,s))return r}else t=r}return t}function Hp(n,e){return n<<17|e<<2}function Fo(n){return n>>17&32767}function Wv(n){return 2|n}function Ca(n){return(131068&n)>>2}function $v(n,e){return-131069&n|e<<2}function qv(n){return 1|n}function QE(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?Fo(s):Ca(s),c=!1;for(;0!==a&&(!1===c||o);){const u=n[a+1];J4(n[a],e)&&(c=!0,n[a+1]=i?qv(u):Wv(u)),a=i?Fo(u):Ca(u)}c&&(n[t+1]=i?Wv(s):qv(s))}function J4(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&qc(n,e)>=0}const ti={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function eT(n){return n.substring(ti.key,ti.keyEnd)}function tT(n,e){const t=ti.textEnd;return t===e?-1:(e=ti.keyEnd=function eH(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,ti.key=e,t),_l(n,e,t))}function _l(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function zt(n,e){return function ns(n,e,t,i){const r=oe(),s=Ut(),o=Ys(2);s.firstUpdatePass&&cT(s,n,o,i),e!==vt&&Ri(r,o,e)&&uT(s,s.data[Vi()],r,r[gt],n,r[o+1]=function dH(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Qn(No(n)))),n}(e,t),i,o)}(n,e,null,!0),zt}function Ea(n){!function is(n,e,t,i){const r=Ut(),s=Ys(2);r.firstUpdatePass&&cT(r,null,s,i);const o=oe();if(t!==vt&&Ri(o,s,t)){const a=r.data[Vi()];if(hT(a,i)&&!aT(r,s)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(t=H_(c,t||"")),Hv(r,a,o,t,i)}else!function uH(n,e,t,i,r,s,o,a){r===vt&&(r=Ht);let c=0,l=0,u=0<r.length?r[0]:null,d=0<s.length?s[0]:null;for(;null!==u||null!==d;){const h=c<r.length?r[c+1]:void 0,f=l<s.length?s[l+1]:void 0;let _,p=null;u===d?(c+=2,l+=2,h!==f&&(p=d,_=f)):null===d||null!==u&&u<d?(c+=2,p=u):(l+=2,p=d,_=f),null!==p&&uT(n,e,t,i,p,_,o,a),u=c<r.length?r[c]:null,d=l<s.length?s[l]:null}}(r,a,o,o[gt],o[s+1],o[s+1]=function cH(n,e,t){if(null==t||""===t)return Ht;const i=[],r=No(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,s)}}(lH,Is,n,!0)}function Is(n,e){for(let t=function K4(n){return function iT(n){ti.key=0,ti.keyEnd=0,ti.value=0,ti.valueEnd=0,ti.textEnd=n.length}(n),tT(n,_l(n,0,ti.textEnd))}(e);t>=0;t=tT(e,t))_r(n,eT(e),!0)}function aT(n,e){return e>=n.expandoStartIndex}function cT(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[Vi()],o=aT(n,t);hT(s,i)&&null===e&&!o&&(e=!1),e=function rH(n,e,t,i){const r=function m0(n){const e=ct.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=Fd(t=Yv(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=Yv(r,n,e,t,i),null===s){let c=function sH(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==Ca(i))return n[Fo(i)]}(n,e,i);void 0!==c&&Array.isArray(c)&&(c=Yv(null,n,e,c[1],i),c=Fd(c,e.attrs,i),function oH(n,e,t,i){n[Fo(t?e.classBindings:e.styleBindings)]=i}(n,e,i,c))}else s=function aH(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=Fd(i,n[s].hostAttrs,t);return Fd(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function Y4(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Fo(o),c=Ca(o);n[i]=t;let u,l=!1;if(Array.isArray(t)?(u=t[1],(null===u||qc(t,u)>0)&&(l=!0)):u=t,r)if(0!==c){const h=Fo(n[a+1]);n[i+1]=Hp(h,a),0!==h&&(n[h+1]=$v(n[h+1],i)),n[a+1]=function $4(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=Hp(a,0),0!==a&&(n[a+1]=$v(n[a+1],i)),a=i;else n[i+1]=Hp(c,0),0===a?a=i:n[c+1]=$v(n[c+1],i),c=i;l&&(n[i+1]=Wv(n[i+1])),QE(n,u,i,!0),QE(n,u,i,!1),function X4(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&qc(s,e)>=0&&(t[i+1]=qv(t[i+1]))}(e,u,n,i,s),o=Hp(a,c),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}function Yv(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=Fd(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function Fd(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),_r(n,o,!!t||e[++s]))}return void 0===n?null:n}function lH(n,e,t){const i=String(e);""!==i&&!i.includes(" ")&&_r(n,i,t)}function uT(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const c=n.data,l=c[a+1],u=function q4(n){return 1==(1&n)}(l)?dT(c,e,t,r,Ca(l),o):void 0;zp(u)||(zp(s)||function W4(n){return 2==(2&n)}(l)&&(s=dT(c,null,t,r,a,o)),function YB(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=-1===i.indexOf("-")?void 0:Po.DashCase;null==r?n.removeStyle(t,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Po.Important),n.setStyle(t,i,r,s))}}(i,o,function Gf(n,e){return fn(e[n])}(Vi(),t),r,s))}function dT(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const c=n[r],l=Array.isArray(c),u=l?c[1]:c,d=null===u;let h=t[r+1];h===vt&&(h=d?Ht:void 0);let f=d?D0(h,i):u===i?h:void 0;if(l&&!zp(f)&&(f=D0(c,i)),zp(f)&&(a=f,o))return a;const p=n[r+1];r=o?Fo(p):Ca(p)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=D0(c,i))}return a}function zp(n){return void 0!==n}function hT(n,e){return 0!=(n.flags&(e?8:16))}function M(n,e=""){const t=oe(),i=Ut(),r=n+Ot,s=i.firstCreatePass?al(i,r,1,e,null):i.data[r],o=fT(i,t,s,e,n);t[r]=o,jf()&&hp(i,t,o,s),Ss(s,!1)}let fT=(n,e,t,i,r)=>(Oo(!0),function cp(n,e){return n.createText(e)}(e[gt],i));const bl="en-US";let NT=bl;class Da{}class oD{}class ty extends Da{constructor(e,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new pE(this);const r=gr(e);this._bootstrapComponents=Zs(r.bootstrap),this._r3Injector=TC(e,t,[{provide:Da,useValue:this},{provide:Tp,useValue:this.componentFactoryResolver},...i],Qn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class ny extends oD{constructor(e){super(),this.moduleType=e}create(e){return new ty(this.moduleType,e,[])}}class aD extends Da{constructor(e){super(),this.componentFactoryResolver=new pE(this),this.instance=null;const t=new bp([...e.providers,{provide:Da,useValue:this},{provide:Tp,useValue:this.componentFactoryResolver}],e.parent||yp(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function iy(n,e,t=null){return new aD({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let N5=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const i=dC(0,t.type),r=i.length>0?iy([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Le({token:n,providedIn:"environment",factory:()=>new n(Ue(ir))})}return n})();function Br(n){n.getStandaloneInjector=e=>e.get(N5).getOrCreateStandaloneInjector(n)}function Dn(n,e,t){const i=Ui()+n,r=oe();return r[i]===vt?Ts(r,i,t?e.call(t):e()):function Id(n,e){return n[e]}(r,i)}function Ur(n,e,t,i,r){return function gD(n,e,t,i,r,s,o){const a=e+t;return function Sa(n,e,t,i){const r=Ri(n,e,t);return Ri(n,e+1,i)||r}(n,a,r,s)?Ts(n,a+2,o?i.call(o,r,s):i(r,s)):function Gd(n,e){const t=n[e];return t===vt?void 0:t}(n,a+2)}(oe(),Ui(),n,e,t,i,r)}function nz(){return this._results[Symbol.iterator]()}class oy{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new et)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=oy.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=nz)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=function Fr(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function Z3(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function rz(n,e,t,i=!0){const r=e[ke];if(function VB(n,e,t,i){const r=_i+i,s=t.length;i>0&&(t[r-1][es]=e),i<s-_i?(e[es]=t[r],hS(t,_i+i,e)):(t.push(e),e[es]=null),e[yn]=t;const o=e[Qu];null!==o&&t!==o&&function HB(n,e){const t=n[Fc];e[Bn]!==e[yn][yn][Bn]&&(n[hM]=!0),null===t?n[Fc]=[e]:t.push(e)}(o,e);const a=e[ws];null!==a&&a.insertView(n),e[bt]|=128}(r,e,n,t),i){const s=G0(t,n),o=e[gt],a=dp(o,n[xs]);null!==a&&function kB(n,e,t,i,r,s){i[Tn]=r,i[Ai]=e,md(n,i,t,1,r,s)}(r,n[Ai],o,e,a,s)}}let Mn=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=az}return n})();const sz=Mn,oz=class extends sz{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){const r=function iz(n,e,t,i){const r=e.tView,a=Ip(n,r,t,4096&n[bt]?4096:16,null,e,null,null,null,i?.injector??null,i?.hydrationInfo??null);a[Qu]=n[e.index];const l=n[ws];return null!==l&&(a[ws]=l.createEmbeddedView(r)),Nv(r,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:i});return new Td(r)}};function az(){return qp(bi(),oe())}function qp(n,e){return 4&n.type?new oz(e,n,rl(n,e)):null}let Vr=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=fz}return n})();function fz(){return CD(bi(),oe())}const pz=Vr,MD=class extends pz{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return rl(this._hostTNode,this._hostLView)}get injector(){return new Hi(this._hostTNode,this._hostLView)}get parentInjector(){const e=Jf(this._hostTNode,this._hostLView);if(x0(e)){const t=cd(e,this._hostLView),i=ad(e);return new Hi(t[ke].data[i+8],t)}return new Hi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=SD(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-_i}createEmbeddedView(e,t,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,r,false),a}createComponent(e,t,i,r,s){const o=e&&!function ud(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const _=t||{};a=_.index,i=_.injector,r=_.projectableNodes,s=_.environmentInjector||_.ngModuleRef}const c=o?e:new Dd(Bt(e)),l=i||this.parentInjector;if(!s&&null==c.ngModule){const m=(o?l:this.parentInjector).get(ir,null);m&&(s=m)}Bt(c.componentType??{});const f=c.create(l,r,null,s);return this.insertImpl(f.hostView,a,false),f}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,i){const r=e._lView;if(function d3(n){return Li(n[yn])}(r)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const l=r[yn],u=new MD(l,l[Ai],l[yn]);u.detach(u.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return rz(a,r,o,!i),e.attachToViewContainerRef(),hS(ay(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=SD(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=up(this._lContainer,t);i&&(Kf(ay(this._lContainer),t),U0(i[ke],i))}detach(e){const t=this._adjustIndex(e,-1),i=up(this._lContainer,t);return i&&null!=Kf(ay(this._lContainer),t)?new Td(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function SD(n){return n[8]}function ay(n){return n[8]||(n[8]=[])}function CD(n,e){let t;const i=e[n.index];return Li(i)?t=i:(t=nE(i,e,null,n),e[n.index]=t,Rp(e,t)),ED(t,e,n,i),new MD(t,n,e)}let ED=function TD(n,e,t,i){if(n[xs])return;let r;r=8&t.type?fn(i):function gz(n,e){const t=n[gt],i=t.createComment(""),r=tr(e,n);return xa(t,dp(t,r),i,function WB(n,e){return n.nextSibling(e)}(t,r),!1),i}(e,t),n[xs]=r};class cy{constructor(e){this.queryList=e,this.matches=null}clone(){return new cy(this.queryList)}setDirty(){this.queryList.setDirty()}}class ly{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new ly(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==OD(e,t).matches&&this.queries[t].setDirty()}}class DD{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class uy{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new uy(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class dy{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new dy(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,vz(t,s)),this.matchTNodeWithReadOption(e,t,Zf(t,e,s,!1,!1))}else i===Mn?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Zf(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===qt||r===Vr||r===Mn&&4&t.type)this.addMatch(t.index,-2);else{const s=Zf(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function vz(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function bz(n,e,t,i){return-1===t?function yz(n,e){return 11&n.type?rl(n,e):4&n.type?qp(n,e):null}(e,n):-2===t?function wz(n,e,t){return t===qt?rl(e,n):t===Mn?qp(e,n):t===Vr?CD(e,n):void 0}(n,e,i):ba(n,n[ke],t,e)}function AD(n,e,t,i){const r=e[ws].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let c=0;c<o.length;c+=2){const l=o[c];a.push(l<0?null:bz(e,s[l],o[c+1],t.metadata.read))}r.matches=a}return r.matches}function hy(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=AD(n,e,r,t);for(let a=0;a<s.length;a+=2){const c=s[a];if(c>0)i.push(o[a/2]);else{const l=s[a+1],u=e[-c];for(let d=_i;d<u.length;d++){const h=u[d];h[Qu]===h[yn]&&hy(h[ke],h,l,i)}if(null!==u[Fc]){const d=u[Fc];for(let h=0;h<d.length;h++){const f=d[h];hy(f[ke],f,l,i)}}}}}return i}function en(n){const e=oe(),t=Ut(),i=WM();_0(i+1);const r=OD(t,i);if(n.dirty&&function l3(n){return 4==(4&n[bt])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?hy(t,e,i,[]):AD(t,e,r,i);n.reset(s,WU),n.notifyOnChanges()}return!0}return!1}function Aa(n,e,t){const i=Ut();i.firstCreatePass&&(function RD(n,e,t){null===n.queries&&(n.queries=new uy),n.queries.track(new dy(e,t))}(i,new DD(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),function ID(n,e,t){const i=new oy(4==(4&t));(function SV(n,e,t,i){const r=rE(e);r.push(t),n.firstCreatePass&&sE(n).push(i,r.length-1)})(n,e,i,i.destroy),null===e[ws]&&(e[ws]=new ly),e[ws].queries.push(new cy(i))}(i,oe(),e)}function OD(n,e){return n.queries.getByIndex(e)}const vy=new qe("Application Initializer");let yy=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=Ve(vy,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const r of this.appInits){const s=r();if(Nd(s))t.push(s);else if(BE(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),XD=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const ss=new qe("LocaleId",{providedIn:"root",factory:()=>Ve(ss,Rt.Optional|Rt.SkipSelf)||function jz(){return typeof $localize<"u"&&$localize.locale||bl}()});let JD=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Or(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class qz{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let ZD=(()=>{class n{compileModuleSync(t){return new ny(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=Zs(gr(t).declarations).reduce((o,a)=>{const c=Bt(a);return c&&o.push(new Dd(c)),o},[]);return new qz(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const tA=new qe(""),Zp=new qe("");let Sy,xy=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Sy||(function fG(n){Sy=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ft.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}static#e=this.\u0275fac=function(i){return new(i||n)(Ue(Ft),Ue(My),Ue(Zp))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})(),My=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return Sy?.findTestabilityInTree(this,t,i)??null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Lo=null;const nA=new qe("AllowMultipleToken"),Cy=new qe("PlatformDestroyListeners"),Ey=new qe("appBootstrapListener");class rA{constructor(e,t){this.name=e,this.token=t}}function oA(n,e,t=[]){const i=`Platform: ${e}`,r=new qe(i);return(s=[])=>{let o=Ty();if(!o||o.injector.get(nA,!1)){const a=[...t,...s,{provide:r,useValue:!0}];n?n(a):function mG(n){if(Lo&&!Lo.get(nA,!1))throw new ue(400,!1);(function iA(){!function Jk(n){SM=n}(()=>{throw new ue(600,!1)})})(),Lo=n;const e=n.get(cA);(function sA(n){n.get(mC,null)?.forEach(t=>t())})(n)}(function aA(n=[],e){return wi.create({name:e,providers:[{provide:tv,useValue:"platform"},{provide:Cy,useValue:new Set([()=>Lo=null])},...n]})}(a,i))}return function vG(n){const e=Ty();if(!e)throw new ue(401,!1);return e}()}}function Ty(){return Lo?.get(cA)??null}let cA=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function yG(n="zone.js",e){return"noop"===n?new oV:"zone.js"===n?new Ft(e):n}(i?.ngZone,function lA(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return r.run(()=>{const s=function P5(n,e,t){return new ty(n,e,t)}(t.moduleType,this.injector,function pA(n){return[{provide:Ft,useFactory:n},{provide:bd,multi:!0,useFactory:()=>{const e=Ve(wG,{optional:!0});return()=>e.initialize()}},{provide:fA,useFactory:bG},{provide:OC,useFactory:PC}]}(()=>r)),o=s.injector.get(Js,null);return r.runOutsideAngular(()=>{const a=r.onError.subscribe({next:c=>{o.handleError(c)}});s.onDestroy(()=>{Kp(this._modules,s),a.unsubscribe()})}),function uA(n,e,t){try{const i=t();return Nd(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(o,r,()=>{const a=s.injector.get(yy);return a.runInitializers(),a.donePromise.then(()=>(function FT(n){Pr(n,"Expected localeId to be defined"),"string"==typeof n&&(NT=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(ss,bl)||bl),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,i=[]){const r=dA({},i);return function pG(n,e,t){const i=new ny(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(ko);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new ue(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ue(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(Cy,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(i){return new(i||n)(Ue(wi))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function dA(n,e){return Array.isArray(e)?e.reduce(dA,n):{...n,...e}}let ko=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ve(fA),this.zoneIsStable=Ve(OC),this.componentTypes=[],this.components=[],this.isStable=Ve(JD).hasPendingTasks.pipe(Zr(t=>t?ot(!1):this.zoneIsStable),function zx(n,e=Jr){return n=n??ck,wn((t,i)=>{let r,s=!0;t.subscribe(dn(i,o=>{const a=e(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}(),Hx()),this._injector=Ve(ir)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof wC;if(!this._injector.get(yy).done)throw!r&&function Ic(n){const e=Bt(n)||mi(n)||Fi(n);return null!==e&&e.standalone}(t),new ue(405,!1);let o;o=r?t:this._injector.get(Tp).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function gG(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Da),l=o.create(wi.NULL,[],i||o.selector,a),u=l.location.nativeElement,d=l.injector.get(tA,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),Kp(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new ue(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;Kp(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(Ey,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Kp(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ue(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Kp(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const fA=new qe("",{providedIn:"root",factory:()=>Ve(Js).handleError.bind(void 0)});function bG(){const n=Ve(Ft),e=Ve(Js);return t=>n.runOutsideAngular(()=>e.handleError(t))}let wG=(()=>{class n{constructor(){this.zone=Ve(Ft),this.applicationRef=Ve(ko)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let os=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=MG}return n})();function MG(n){return function SG(n,e,t){if(_a(n)&&!t){const i=mr(n.index,e);return new Td(i,i)}return 47&n.type?new Td(e[Bn],e):null}(bi(),oe(),16==(16&n))}class wA{constructor(){}supports(e){return e instanceof Map||Fv(e)}create(){return new PG}}class PG{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Fv(e)))throw new ue(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new NG(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class NG{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function MA(){return new qd([new wA])}let qd=(()=>{class n{static#e=this.\u0275prov=Le({token:n,providedIn:"root",factory:MA});constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||MA()),deps:[[n,new tp,new ep]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new ue(901,!1)}}return n})();const kG=oA(null,"core",[]);let BG=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(i){return new(i||n)(Ue(ko))};static#t=this.\u0275mod=an({type:n});static#n=this.\u0275inj=sn({})}return n})();function Ml(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function Py(n,e){const t=Bt(n),i=e.elementInjector||yp();return new Dd(t).create(i,e.projectableNodes,e.hostElement,e.environmentInjector)}let Ny=null;function Bo(){return Ny}class KG{}const ni=new qe("DocumentToken");let Fy=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Le({token:n,factory:function(){return Ve(e8)},providedIn:"platform"})}return n})();const QG=new qe("Location Initialized");let e8=(()=>{class n extends Fy{constructor(){super(),this._doc=Ve(ni),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Bo().getBaseHref(this._doc)}onPopState(t){const i=Bo().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Bo().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Le({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function Ly(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function OA(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function eo(n){return n&&"?"!==n[0]?"?"+n:n}let Ra=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Le({token:n,factory:function(){return Ve(NA)},providedIn:"root"})}return n})();const PA=new qe("appBaseHref");let NA=(()=>{class n extends Ra{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Ve(ni).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ly(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+eo(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+eo(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+eo(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||n)(Ue(Fy),Ue(PA,8))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),t8=(()=>{class n extends Ra{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=Ly(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+eo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+eo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||n)(Ue(Fy),Ue(PA,8))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})(),ky=(()=>{class n{constructor(t){this._subject=new et,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function r8(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(OA(FA(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+eo(i))}normalize(t){return n.stripTrailingSlash(function i8(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,FA(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+eo(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+eo(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static#e=this.normalizeQueryParams=eo;static#t=this.joinWithSlash=Ly;static#n=this.stripTrailingSlash=OA;static#i=this.\u0275fac=function(i){return new(i||n)(Ue(Ra))};static#r=this.\u0275prov=Le({token:n,factory:function(){return function n8(){return new ky(Ue(Ra))}()},providedIn:"root"})}return n})();function FA(n){return n.replace(/\/index.html$/,"")}let Vo=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new G8,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){XA("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){XA("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(U(Vr),U(Mn))};static#t=this.\u0275dir=Te({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class G8{constructor(){this.$implicit=null,this.ngIf=null}}function XA(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Qn(e)}'.`)}let Zy=(()=>{class n{constructor(t,i,r){this._ngEl=t,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){const[r,s]=t.split("."),o=-1===r.indexOf("-")?void 0:Po.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}static#e=this.\u0275fac=function(i){return new(i||n)(U(qt),U(qd),U(yr))};static#t=this.\u0275dir=Te({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}return n})(),g6=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=an({type:n});static#n=this.\u0275inj=sn({})}return n})();function QA(n){return"server"===n}let y6=(()=>{class n{static#e=this.\u0275prov=Le({token:n,providedIn:"root",factory:()=>new b6(Ue(ni),window)})}return n})();class b6{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function w6(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class W6 extends KG{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class nb extends W6{static makeCurrent(){!function ZG(n){Ny||(Ny=n)}(new nb)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function $6(){return Zd=Zd||document.querySelector("base"),Zd?Zd.getAttribute("href"):null}();return null==t?null:function q6(n){gg=gg||document.createElement("a"),gg.setAttribute("href",n);const e=gg.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Zd=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function U8(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let gg,Zd=null,X6=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();const ib=new qe("EventManagerPlugins");let rI=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new ue(5101,!1);return this._eventNameToPlugin.set(t,i),i}static#e=this.\u0275fac=function(i){return new(i||n)(Ue(ib),Ue(Ft))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();class sI{constructor(e){this._doc=e}}const rb="ng-app-id";let oI=(()=>{class n{constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=QA(s),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${rb}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){const r=this.styleRef;if(r.has(t)){const s=r.get(t);return s.usage+=i,s.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===t)return r.delete(i),s.removeAttribute(rb),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(rb,this.appId),o}}addStyleToHost(t,i){const r=this.getStyleElement(t,i);t.appendChild(r);const s=this.styleRef,o=s.get(i)?.elements;o?o.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||n)(Ue(ni),Ue(wp),Ue(_C,8),Ue(tl))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();const sb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ob=/%COMP%/g,Q6=new qe("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function cI(n,e){return e.map(t=>t.replace(ob,n))}let lI=(()=>{class n{constructor(t,i,r,s,o,a,c,l=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=QA(a),this.defaultRenderer=new ab(t,o,c,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Kr.ShadowDom&&(i={...i,encapsulation:Kr.Emulated});const r=this.getOrCreateRenderer(t,i);return r instanceof dI?r.applyToHost(t):r instanceof cb&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case Kr.Emulated:s=new dI(c,l,i,this.appId,u,o,a,d);break;case Kr.ShadowDom:return new ij(c,l,t,i,o,a,this.nonce,d);default:s=new cb(c,l,i,u,o,a,d)}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||n)(Ue(rI),Ue(oI),Ue(wp),Ue(Q6),Ue(ni),Ue(tl),Ue(Ft),Ue(_C))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();class ab{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(sb[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(uI(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(uI(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new ue(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=sb[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=sb[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Po.DashCase|Po.Important)?e.style.setProperty(t,i,r&Po.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Po.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){if("string"==typeof e&&!(e=Bo().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function uI(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class ij extends ab{constructor(e,t,i,r,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=cI(r.id,r.styles);for(const u of l){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class cb extends ab{constructor(e,t,i,r,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=c?cI(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class dI extends cb{constructor(e,t,i,r,s,o,a,c){const l=r+"-"+i.id;super(e,t,i,s,o,a,c,l),this.contentAttr=function ej(n){return"_ngcontent-%COMP%".replace(ob,n)}(l),this.hostAttr=function tj(n){return"_nghost-%COMP%".replace(ob,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let rj=(()=>{class n extends sI{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||n)(Ue(ni))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();const hI=["alt","control","meta","shift"],sj={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},oj={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let aj=(()=>{class n extends sI{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Bo().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),hI.forEach(l=>{const u=i.indexOf(l);u>-1&&(i.splice(u,1),o+=l+".")}),o+=s,0!=i.length||0===s.length)return null;const c={};return c.domEventName=r,c.fullKey=o,c}static matchEventFullKeyCode(t,i){let r=sj[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),hI.forEach(o=>{o!==r&&(0,oj[o])(t)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(i){return new(i||n)(Ue(ni))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();const dj=oA(kG,"browser",[{provide:tl,useValue:"browser"},{provide:mC,useValue:function cj(){nb.makeCurrent()},multi:!0},{provide:ni,useFactory:function uj(){return function QB(n){$0=n}(document),document},deps:[]}]),hj=new qe(""),gI=[{provide:Zp,useClass:class Y6{addToWindow(e){hn.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new ue(5103,!1);return s},hn.getAllAngularTestabilities=()=>e.getAllTestabilities(),hn.getAllAngularRootElements=()=>e.getAllRootElements(),hn.frameworkStabilizers||(hn.frameworkStabilizers=[]),hn.frameworkStabilizers.push(i=>{const r=hn.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(c){o=o||c,s--,0==s&&i(o)};r.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?Bo().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:tA,useClass:xy,deps:[Ft,My,Zp]},{provide:xy,useClass:xy,deps:[Ft,My,Zp]}],mI=[{provide:tv,useValue:"root"},{provide:Js,useFactory:function lj(){return new Js},deps:[]},{provide:ib,useClass:rj,multi:!0,deps:[ni,Ft,tl]},{provide:ib,useClass:aj,multi:!0,deps:[ni]},lI,oI,rI,{provide:gv,useExisting:lI},{provide:class x6{},useClass:X6,deps:[]},[]];let fj=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:wp,useValue:t.appId}]}}static#e=this.\u0275fac=function(i){return new(i||n)(Ue(hj,12))};static#t=this.\u0275mod=an({type:n});static#n=this.\u0275inj=sn({providers:[...mI,...gI],imports:[g6,BG]})}return n})(),_I=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(i){return new(i||n)(Ue(ni))};static#t=this.\u0275prov=Le({token:n,factory:function(i){let r=null;return r=i?new i:function gj(){return new _I(Ue(ni))}(),r},providedIn:"root"})}return n})();typeof window<"u"&&window;const{isArray:wj}=Array,{getPrototypeOf:xj,prototype:Mj,keys:Sj}=Object;const{isArray:Ej}=Array;function ub(n){return kt(e=>function Tj(n,e){return Ej(e)?n(...e):n(e)}(n,e))}function db(...n){const e=$u(n),t=Df(n),{args:i,keys:r}=function wI(n){if(1===n.length){const e=n[0];if(wj(e))return{args:e,keys:null};if(function Cj(n){return n&&"object"==typeof n&&xj(n)===Mj}(e)){const t=Sj(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}(n);if(0===i.length)return ai([],e);const s=new rn(function Dj(n,e,t=Jr){return i=>{MI(e,()=>{const{length:r}=n,s=new Array(r);let o=r,a=r;for(let c=0;c<r;c++)MI(e,()=>{const l=ai(n[c],e);let u=!1;l.subscribe(dn(i,d=>{s[c]=d,u||(u=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>function xI(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}(r,o):Jr));return t?s.pipe(ub(t)):s}function MI(n,e,t){n?Gs(t,n,e):e()}const mg=Mo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Kd(...n){return function Aj(){return Dc(1)}()(ai(n,$u(n)))}function SI(n){return new rn(e=>{Zn(n()).subscribe(e)})}function Qd(n,e){const t=Tt(n)?n:()=>n,i=r=>r.error(t());return new rn(e?r=>e.schedule(i,0,r):i)}function hb(){return wn((n,e)=>{let t=null;n._refCount++;const i=dn(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class CI extends rn{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ju(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Fn;const t=this.getSubject();e.add(this.source.subscribe(dn(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Fn.EMPTY)}return e}refCount(){return hb()(this)}}function xi(n){return n<=0?()=>Rr:wn((e,t)=>{let i=0;e.subscribe(dn(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function ui(n,e){return wn((t,i)=>{let r=0;t.subscribe(dn(i,s=>n.call(e,s,r++)&&i.next(s)))})}function _g(n){return wn((e,t)=>{let i=!1;e.subscribe(dn(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function TI(n=Ij){return wn((e,t)=>{let i=!1;e.subscribe(dn(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function Ij(){return new mg}function Oa(n,e){const t=arguments.length>=2;return i=>i.pipe(n?ui((r,s)=>n(r,s,i)):Jr,xi(1),t?_g(e):TI(()=>new mg))}function eh(n,e){return Tt(e)?Kn(n,e,1):Kn(n,1)}function di(n,e,t){const i=Tt(n)||e||t?{next:n,error:e,complete:t}:n;return i?wn((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(dn(s,c=>{var l;null===(l=i.next)||void 0===l||l.call(i,c),s.next(c)},()=>{var c;a=!1,null===(c=i.complete)||void 0===c||c.call(i),s.complete()},c=>{var l;a=!1,null===(l=i.error)||void 0===l||l.call(i,c),s.error(c)},()=>{var c,l;a&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(l=i.finalize)||void 0===l||l.call(i)}))}):Jr}function Pa(n){return wn((e,t)=>{let s,i=null,r=!1;i=e.subscribe(dn(t,void 0,void 0,o=>{s=Zn(n(o,Pa(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function fb(n){return n<=0?()=>Rr:wn((e,t)=>{let i=[];e.subscribe(dn(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function pb(n){return wn((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Hn(n){return wn((e,t)=>{Zn(n).subscribe(dn(t,()=>t.complete(),fa)),!t.closed&&e.subscribe(t)})}const xt="primary",th=Symbol("RouteTitle");class Nj{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function El(n){return new Nj(n)}function Fj(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Rs(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!AI(n[r],e[r]))return!1;return!0}function AI(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function II(n){return n.length>0?n[n.length-1]:null}function zo(n){return function bj(n){return!!n&&(n instanceof rn||Tt(n.lift)&&Tt(n.subscribe))}(n)?n:Nd(n)?ai(Promise.resolve(n)):ot(n)}const kj={exact:function PI(n,e,t){if(!Na(n.segments,e.segments)||!vg(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!PI(n.children[i],e.children[i],t))return!1;return!0},subset:NI},RI={exact:function Bj(n,e){return Rs(n,e)},subset:function Uj(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>AI(n[t],e[t]))},ignored:()=>!0};function OI(n,e,t){return kj[t.paths](n.root,e.root,t.matrixParams)&&RI[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function NI(n,e,t){return FI(n,e,e.segments,t)}function FI(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!Na(r,t)||e.hasChildren()||!vg(r,t,i))}if(n.segments.length===t.length){if(!Na(n.segments,t)||!vg(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!NI(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Na(n.segments,r)&&vg(n.segments,r,i)&&n.children[xt])&&FI(n.children[xt],e,s,i)}}function vg(n,e,t){return e.every((i,r)=>RI[t](n[r].parameters,i.parameters))}class Tl{constructor(e=new nn([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=El(this.queryParams)),this._queryParamMap}toString(){return zj.serialize(this)}}class nn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return yg(this)}}class nh{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=El(this.parameters)),this._parameterMap}toString(){return BI(this)}}function Na(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let ih=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Le({token:n,factory:function(){return new gb},providedIn:"root"})}return n})();class gb{parse(e){const t=new Qj(e);return new Tl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${rh(e.root,!0)}`,i=function Wj(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${bg(t)}=${bg(r)}`).join("&"):`${bg(t)}=${bg(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function Gj(n){return encodeURI(n)}(e.fragment)}`:""}`}}const zj=new gb;function yg(n){return n.segments.map(e=>BI(e)).join("/")}function rh(n,e){if(!n.hasChildren())return yg(n);if(e){const t=n.children[xt]?rh(n.children[xt],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==xt&&i.push(`${r}:${rh(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function Hj(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===xt&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==xt&&(t=t.concat(e(r,i)))}),t}(n,(i,r)=>r===xt?[rh(n.children[xt],!1)]:[`${r}:${rh(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[xt]?`${yg(n)}/${t[0]}`:`${yg(n)}/(${t.join("//")})`}}function LI(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function bg(n){return LI(n).replace(/%3B/gi,";")}function mb(n){return LI(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function wg(n){return decodeURIComponent(n)}function kI(n){return wg(n.replace(/\+/g,"%20"))}function BI(n){return`${mb(n.path)}${function jj(n){return Object.keys(n).map(e=>`;${mb(e)}=${mb(n[e])}`).join("")}(n.parameters)}`}const $j=/^[^\/()?;#]+/;function _b(n){const e=n.match($j);return e?e[0]:""}const qj=/^[^\/()?;=#]+/,Xj=/^[^=?&#]+/,Zj=/^[^&#]+/;class Qj{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new nn([],{}):new nn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[xt]=new nn(e,t)),i}parseSegment(){const e=_b(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new ue(4009,!1);return this.capture(e),new nh(wg(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Yj(n){const e=n.match(qj);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=_b(this.remaining);r&&(i=r,this.capture(i))}e[wg(t)]=wg(i)}parseQueryParam(e){const t=function Jj(n){const e=n.match(Xj);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function Kj(n){const e=n.match(Zj);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=kI(t),s=kI(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=_b(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new ue(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=xt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[xt]:new nn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new ue(4011,!1)}}function UI(n){return n.segments.length>0?new nn([],{[xt]:n}):n}function VI(n){const e={};for(const i of Object.keys(n.children)){const s=VI(n.children[i]);if(i===xt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function eW(n){if(1===n.numberOfChildren&&n.children[xt]){const e=n.children[xt];return new nn(n.segments.concat(e.segments),e.children)}return n}(new nn(n.segments,e))}function Fa(n){return n instanceof Tl}function HI(n){let e;const r=UI(function t(s){const o={};for(const c of s.children){const l=t(c);o[c.outlet]=l}const a=new nn(s.url,o);return s===n&&(e=a),a}(n.root));return e??r}function zI(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(0===e.length)return vb(r,r,r,t,i);const s=function nW(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new jI(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new jI(t,e,i)}(e);if(s.toRoot())return vb(r,r,new nn([],{}),t,i);const o=function iW(n,e,t){if(n.isAbsolute)return new Mg(e,!0,0);if(!t)return new Mg(e,!1,NaN);if(null===t.parent)return new Mg(t,!0,0);const i=xg(n.commands[0])?0:1;return function rW(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new ue(4005,!1);r=i.segments.length}return new Mg(i,!1,r-s)}(t,t.segments.length-1+i,n.numberOfDoubleDots)}(s,r,n),a=o.processChildren?oh(o.segmentGroup,o.index,s.commands):WI(o.segmentGroup,o.index,s.commands);return vb(r,o.segmentGroup,a,t,i)}function xg(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function sh(n){return"object"==typeof n&&null!=n&&n.outlets}function vb(n,e,t,i,r){let o,s={};i&&Object.entries(i).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),o=n===e?t:GI(n,e,t);const a=UI(VI(o));return new Tl(a,s,r)}function GI(n,e,t){const i={};return Object.entries(n.children).forEach(([r,s])=>{i[r]=s===e?t:GI(s,e,t)}),new nn(n.segments,i)}class jI{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&xg(i[0]))throw new ue(4003,!1);const r=i.find(sh);if(r&&r!==II(i))throw new ue(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Mg{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function WI(n,e,t){if(n||(n=new nn([],{})),0===n.segments.length&&n.hasChildren())return oh(n,e,t);const i=function oW(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if(sh(a))break;const c=`${a}`,l=i<t.length-1?t[i+1]:null;if(r>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!qI(c,l,o))return s;i+=2}else{if(!qI(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new nn(n.segments.slice(0,i.pathIndex),{});return s.children[xt]=new nn(n.segments.slice(i.pathIndex),n.children),oh(s,0,r)}return i.match&&0===r.length?new nn(n.segments,{}):i.match&&!n.hasChildren()?yb(n,e,t):i.match?oh(n,0,r):yb(n,e,t)}function oh(n,e,t){if(0===t.length)return new nn(n.segments,{});{const i=function sW(n){return sh(n[0])?n[0].outlets:{[xt]:n}}(t),r={};if(Object.keys(i).some(s=>s!==xt)&&n.children[xt]&&1===n.numberOfChildren&&0===n.children[xt].segments.length){const s=oh(n.children[xt],e,t);return new nn(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(r[s]=WI(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===i[s]&&(r[s]=o)}),new nn(n.segments,r)}}function yb(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(sh(s)){const c=aW(s.outlets);return new nn(i,c)}if(0===r&&xg(t[0])){i.push(new nh(n.segments[e].path,$I(t[0]))),r++;continue}const o=sh(s)?s.outlets[xt]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&xg(a)?(i.push(new nh(o,$I(a))),r+=2):(i.push(new nh(o,{})),r++)}return new nn(i,{})}function aW(n){const e={};return Object.entries(n).forEach(([t,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(e[t]=yb(new nn([],{}),0,i))}),e}function $I(n){const e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function qI(n,e,t){return n==t.path&&Rs(e,t.parameters)}const ah="imperative";class Os{constructor(e,t){this.id=e,this.url=t}}class Sg extends Os{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Go extends Os{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ch extends Os{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Dl extends Os{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=16}}class Cg extends Os{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class YI extends Os{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cW extends Os{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lW extends Os{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class uW extends Os{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dW extends Os{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hW{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class fW{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class pW{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gW{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mW{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _W{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class XI{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class bb{}class wb{constructor(e){this.url=e}}class vW{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new lh,this.attachRef=null}}let lh=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new vW,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class JI{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=xb(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=xb(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Mb(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Mb(e,this._root).map(t=>t.value)}}function xb(n,e){if(n===e.value)return e;for(const t of e.children){const i=xb(n,t);if(i)return i}return null}function Mb(n,e){if(n===e.value)return[e];for(const t of e.children){const i=Mb(n,t);if(i.length)return i.unshift(e),i}return[]}class io{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Al(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class ZI extends JI{constructor(e,t){super(e),this.snapshot=t,Sb(this,e)}toString(){return this.snapshot.toString()}}function KI(n,e){const t=function yW(n,e){const o=new Eg([],{},{},"",{},xt,e,null,{});return new eR("",new io(o,[]))}(0,e),i=new Or([new nh("",{})]),r=new Or({}),s=new Or({}),o=new Or({}),a=new Or(""),c=new Il(i,r,o,a,s,xt,e,t.root);return c.snapshot=t.root,new ZI(new io(c,[]),t)}class Il{constructor(e,t,i,r,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(kt(l=>l[th]))??ot(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(kt(e=>El(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(kt(e=>El(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function QI(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function bW(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class Eg{get title(){return this.data?.[th]}constructor(e,t,i,r,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=El(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=El(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class eR extends JI{constructor(e,t){super(t),this.url=e,Sb(this,t)}toString(){return tR(this._root)}}function Sb(n,e){e.value._routerState=n,e.children.forEach(t=>Sb(n,t))}function tR(n){const e=n.children.length>0?` { ${n.children.map(tR).join(", ")} } `:"";return`${n.value}${e}`}function Cb(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Rs(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Rs(e.params,t.params)||n.paramsSubject.next(t.params),function Lj(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Rs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Rs(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Eb(n,e){const t=Rs(n.params,e.params)&&function Vj(n,e){return Na(n,e)&&n.every((t,i)=>Rs(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Eb(n.parent,e.parent))}let Tb=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=xt,this.activateEvents=new et,this.deactivateEvents=new et,this.attachEvents=new et,this.detachEvents=new et,this.parentContexts=Ve(lh),this.location=Ve(Vr),this.changeDetector=Ve(os),this.environmentInjector=Ve(ir),this.inputBinder=Ve(Tg,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ue(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ue(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ue(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new ue(4013,!1);this._activatedRoute=t;const r=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new wW(t,a,r.injector);this.activated=r.createComponent(o,{index:r.length,injector:c,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=Te({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[yi]})}return n})();class wW{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Il?this.route:e===lh?this.childContexts:this.parent.get(e,t)}}const Tg=new qe("");let nR=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:i}=t,r=db([i.queryParams,i.params,i.data]).pipe(Zr(([s,o,a],c)=>(a={...s,...o,...a},0===c?ot(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(t);const o=function JG(n){const e=Bt(n);if(!e)return null;const t=new Dd(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(i.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,r)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();function uh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function MW(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return uh(n,i,r);return uh(n,i)})}(n,e,t);return new io(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>uh(n,a)),o}}const i=function SW(n){return new Il(new Or(n.url),new Or(n.params),new Or(n.queryParams),new Or(n.fragment),new Or(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>uh(n,s));return new io(i,r)}}const Db="ngNavigationCancelingError";function iR(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=Fa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=rR(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function rR(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[Db]=!0,i.cancellationCode=e,t&&(i.url=t),i}function sR(n){return n&&n[Db]}let oR=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=ci({type:n,selectors:[["ng-component"]],standalone:!0,features:[Br],decls:1,vars:0,template:function(i,r){1&i&&P(0,"router-outlet")},dependencies:[Tb],encapsulation:2})}return n})();function Ab(n){const e=n.children&&n.children.map(Ab),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==xt&&(t.component=oR),t}function ls(n){return n.outlet||xt}function dh(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class OW{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Cb(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Al(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Al(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Al(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){const r=Al(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new _W(s.value.snapshot))}),e.children.length&&this.forwardEvent(new gW(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(Cb(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Cb(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=dh(r.snapshot);o.attachRef=null,o.route=r,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class aR{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Dg{constructor(e,t){this.component=e,this.route=t}}function PW(n,e,t){const i=n._root;return hh(i,e?e._root:null,t,[i.value])}function Rl(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function gk(n){return null!==Rf(n)}(n)?e.get(n):n:i}function hh(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Al(e);return n.children.forEach(o=>{(function FW(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function LW(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Na(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Na(n.url,e.url)||!Rs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Eb(n,e)||!Rs(n.queryParams,e.queryParams);default:return!Eb(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new aR(i)):(s.data=o.data,s._resolvedData=o._resolvedData),hh(n,e,s.component?a?a.children:null:t,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Dg(a.outlet.component,o))}else o&&fh(e,a,r),r.canActivateChecks.push(new aR(i)),hh(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>fh(a,t.getContext(o),r)),r}function fh(n,e,t){const i=Al(n),r=n.value;Object.entries(i).forEach(([s,o])=>{fh(o,r.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new Dg(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function ph(n){return"function"==typeof n}function cR(n){return n instanceof mg||"EmptyError"===n?.name}const Ag=Symbol("INITIAL_VALUE");function Ol(){return Zr(n=>db(n.map(e=>e.pipe(xi(1),function EI(...n){const e=$u(n);return wn((t,i)=>{(e?Kd(n,t,e):Kd(n,t)).subscribe(i)})}(Ag)))).pipe(kt(e=>{for(const t of e)if(!0!==t){if(t===Ag)return Ag;if(!1===t||t instanceof Tl)return t}return!0}),ui(e=>e!==Ag),xi(1)))}function lR(n){return function wf(...n){return xf(n)}(di(e=>{if(Fa(e))throw iR(0,e)}),kt(e=>!0===e))}class Ig{constructor(e){this.segmentGroup=e||null}}class uR{constructor(e){this.urlTree=e}}function Pl(n){return Qd(new Ig(n))}function dR(n){return Qd(new uR(n))}class n9{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new ue(4002,!1)}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return ot(i);if(r.numberOfChildren>1||!r.children[xt])return Qd(new ue(4e3,!1));r=r.children[xt]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new Tl(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Object.entries(e).forEach(([r,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);i[r]=t[a]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,i,r)}),new nn(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new ue(4001,!1);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}const Ib={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function i9(n,e,t,i,r){const s=Rb(n,e,t);return s.matched?(i=function EW(n,e){return n.providers&&!n._injector&&(n._injector=iy(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,i),function QW(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?ot(r.map(o=>{const a=Rl(o,n);return zo(function zW(n){return n&&ph(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Ol(),lR()):ot(!0)}(i,e,t).pipe(kt(o=>!0===o?s:{...Ib}))):ot(s)}function Rb(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Ib}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||Fj)(t,n,e);if(!r)return{...Ib};const s={};Object.entries(r.posParams??{}).forEach(([a,c])=>{s[a]=c.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function hR(n,e,t,i){return t.length>0&&function o9(n,e,t){return t.some(i=>Rg(n,e,i)&&ls(i)!==xt)}(n,t,i)?{segmentGroup:new nn(e,s9(i,new nn(t,n.children))),slicedSegments:[]}:0===t.length&&function a9(n,e,t){return t.some(i=>Rg(n,e,i))}(n,t,i)?{segmentGroup:new nn(n.segments,r9(n,0,t,i,n.children)),slicedSegments:t}:{segmentGroup:new nn(n.segments,n.children),slicedSegments:t}}function r9(n,e,t,i,r){const s={};for(const o of i)if(Rg(n,t,o)&&!r[ls(o)]){const a=new nn([],{});s[ls(o)]=a}return{...r,...s}}function s9(n,e){const t={};t[xt]=e;for(const i of n)if(""===i.path&&ls(i)!==xt){const r=new nn([],{});t[ls(i)]=r}return t}function Rg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class d9{constructor(e,t,i,r,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new n9(this.urlSerializer,this.urlTree)}noMatchError(e){return new ue(4002,!1)}recognize(){const e=hR(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,xt).pipe(Pa(t=>{if(t instanceof uR)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof Ig?this.noMatchError(t):t}),kt(t=>{const i=new Eg([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},xt,this.rootComponentType,null,{}),r=new io(i,t),s=new eR("",r),o=function tW(n,e,t=null,i=null){return zI(HI(n),e,t,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,xt).pipe(Pa(i=>{throw i instanceof Ig?this.noMatchError(i):i}))}inheritParamsAndData(e){const t=e.value,i=QI(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r,!0)}processChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return ai(r).pipe(eh(s=>{const o=i.children[s],a=function IW(n,e){const t=n.filter(i=>ls(i)===e);return t.push(...n.filter(i=>ls(i)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),function Oj(n,e){return wn(function Rj(n,e,t,i,r){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(dn(o,u=>{const d=l++;c=a?n(c,u,d):(a=!0,u),i&&o.next(c)},r&&(()=>{a&&o.next(c),o.complete()})))}}(n,e,arguments.length>=2,!0))}((s,o)=>(s.push(...o),s)),_g(null),function Pj(n,e){const t=arguments.length>=2;return i=>i.pipe(n?ui((r,s)=>n(r,s,i)):Jr,fb(1),t?_g(e):TI(()=>new mg))}(),Kn(s=>{if(null===s)return Pl(i);const o=fR(s);return function h9(n){n.sort((e,t)=>e.value.outlet===xt?-1:t.value.outlet===xt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),ot(o)}))}processSegment(e,t,i,r,s,o){return ai(t).pipe(eh(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,i,r,s,o).pipe(Pa(c=>{if(c instanceof Ig)return ot(null);throw c}))),Oa(a=>!!a),Pa(a=>{if(cR(a))return function l9(n,e,t){return 0===e.length&&!n.children[t]}(i,r,s)?ot([]):Pl(i);throw a}))}processSegmentAgainstRoute(e,t,i,r,s,o,a){return function c9(n,e,t,i){return!!(ls(n)===i||i!==xt&&Rg(e,t,n))&&("**"===n.path||Rb(e,n,t).matched)}(i,r,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,r,i,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o):Pl(r):Pl(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?dR(s):this.applyRedirects.lineralizeSegments(i,s).pipe(Kn(o=>{const a=new nn(o,{});return this.processSegment(e,t,a,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){const{matched:a,consumedSegments:c,remainingSegments:l,positionalParamSegments:u}=Rb(t,r,s);if(!a)return Pl(t);const d=this.applyRedirects.applyRedirectCommands(c,r.redirectTo,u);return r.redirectTo.startsWith("/")?dR(d):this.applyRedirects.lineralizeSegments(r,d).pipe(Kn(h=>this.processSegment(e,i,t,h.concat(l),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s,o){let a;if("**"===i.path){const c=r.length>0?II(r).parameters:{};a=ot({snapshot:new Eg(r,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,pR(i),ls(i),i.component??i._loadedComponent??null,i,gR(i)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=i9(t,i,r,e).pipe(kt(({matched:c,consumedSegments:l,remainingSegments:u,parameters:d})=>c?{snapshot:new Eg(l,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,pR(i),ls(i),i.component??i._loadedComponent??null,i,gR(i)),consumedSegments:l,remainingSegments:u}:null));return a.pipe(Zr(c=>null===c?Pl(t):this.getChildConfig(e=i._injector??e,i,r).pipe(Zr(({routes:l})=>{const u=i._loadedInjector??e,{snapshot:d,consumedSegments:h,remainingSegments:f}=c,{segmentGroup:p,slicedSegments:_}=hR(t,h,f,l);if(0===_.length&&p.hasChildren())return this.processChildren(u,l,p).pipe(kt(g=>null===g?null:[new io(d,g)]));if(0===l.length&&0===_.length)return ot([new io(d,[])]);const m=ls(i)===s;return this.processSegment(u,l,p,_,m?xt:s,!0).pipe(kt(g=>[new io(d,g)]))}))))}getChildConfig(e,t,i){return t.children?ot({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ot({routes:t._loadedRoutes,injector:t._loadedInjector}):function KW(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?ot(!0):ot(r.map(o=>{const a=Rl(o,n);return zo(function BW(n){return n&&ph(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Ol(),lR())}(e,t,i).pipe(Kn(r=>r?this.configLoader.loadChildren(e,t).pipe(di(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function t9(n){return Qd(rR(!1,3))}())):ot({routes:[],injector:e})}}function f9(n){const e=n.value.routeConfig;return e&&""===e.path}function fR(n){const e=[],t=new Set;for(const i of n){if(!f9(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=fR(i.children);e.push(new io(i.value,r))}return e.filter(i=>!t.has(i))}function pR(n){return n.data||{}}function gR(n){return n.resolve||{}}function g9(n,e){return Kn(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return ot(t);let s=0;return ai(r).pipe(eh(o=>function m9(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!mR(r)&&(s[th]=r.title),function _9(n,e,t,i){const r=function v9(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return ot({});const s={};return ai(r).pipe(Kn(o=>function y9(n,e,t,i){const r=dh(e)??i,s=Rl(n,r);return zo(s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t)))}(n[o],e,t,i).pipe(Oa(),di(a=>{s[o]=a}))),fb(1),function DI(n){return kt(()=>n)}(s),Pa(o=>cR(o)?Rr:Qd(o)))}(s,n,e,i).pipe(kt(o=>(n._resolvedData=o,n.data=QI(n,t).resolve,r&&mR(r)&&(n.data[th]=r.title),null)))}(o.route,i,n,e)),di(()=>s++),fb(1),Kn(o=>s===r.length?ot(t):Rr))})}function mR(n){return"string"==typeof n.title||null===n.title}function Ob(n){return Zr(e=>{const t=n(e);return t?ai(t).pipe(kt(()=>e)):ot(e)})}const Nl=new qe("ROUTES");let Pb=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Ve(ZD)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ot(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=zo(t.loadComponent()).pipe(kt(_R),di(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),pb(()=>{this.componentLoaders.delete(t)})),r=new CI(i,()=>new Wt).pipe(hb());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ot({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=function b9(n,e,t,i){return zo(n.loadChildren()).pipe(kt(_R),Kn(r=>r instanceof oD||Array.isArray(r)?ot(r):ai(e.compileModuleAsync(r))),kt(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,!0):(s=r.create(t).injector,o=s.get(Nl,[],{optional:!0,self:!0}).flat()),{routes:o.map(Ab),injector:s}}))}(i,this.compiler,t,this.onLoadEndListener).pipe(pb(()=>{this.childrenLoaders.delete(i)})),o=new CI(s,()=>new Wt).pipe(hb());return this.childrenLoaders.set(i,o),o}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _R(n){return function w9(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Og=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Wt,this.transitionAbortSubject=new Wt,this.configLoader=Ve(Pb),this.environmentInjector=Ve(ir),this.urlSerializer=Ve(ih),this.rootContexts=Ve(lh),this.inputBindingEnabled=null!==Ve(Tg,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ot(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new fW(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new hW(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t,i,r){return this.transitions=new Or({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:t.urlHandlingStrategy.extract(i),urlAfterRedirects:t.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ah,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ui(s=>0!==s.id),kt(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),Zr(s=>{this.currentTransition=s;let o=!1,a=!1;return ot(s).pipe(di(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Zr(c=>{const l=c.currentBrowserUrl.toString(),u=!t.navigated||c.extractedUrl.toString()!==l||l!==c.currentUrlTree.toString();if(!u&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const h="";return this.events.next(new Dl(c.id,this.urlSerializer.serialize(c.rawUrl),h,0)),c.resolve(null),Rr}if(t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return ot(c).pipe(Zr(h=>{const f=this.transitions?.getValue();return this.events.next(new Sg(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?Rr:Promise.resolve(h)}),function p9(n,e,t,i,r,s){return Kn(o=>function u9(n,e,t,i,r,s,o="emptyOnly"){return new d9(n,e,t,i,r,o,s).recognize()}(n,e,t,i,o.extractedUrl,r,s).pipe(kt(({state:a,tree:c})=>({...o,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),di(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:h.urlAfterRedirects};const f=new YI(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(u&&t.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:h,extractedUrl:f,source:p,restoredState:_,extras:m}=c,g=new Sg(h,this.urlSerializer.serialize(f),p,_);this.events.next(g);const b=KI(0,this.rootComponentType).snapshot;return this.currentTransition=s={...c,targetSnapshot:b,urlAfterRedirects:f,extras:{...m,skipLocationChange:!1,replaceUrl:!1}},ot(s)}{const h="";return this.events.next(new Dl(c.id,this.urlSerializer.serialize(c.extractedUrl),h,1)),c.resolve(null),Rr}}),di(c=>{const l=new cW(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),kt(c=>(this.currentTransition=s={...c,guards:PW(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},s)),function jW(n,e){return Kn(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?ot({...t,guardsResult:!0}):function WW(n,e,t,i){return ai(n).pipe(Kn(r=>function ZW(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?ot(s.map(a=>{const c=dh(e)??r,l=Rl(a,c);return zo(function HW(n){return n&&ph(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,i):c.runInContext(()=>l(n,e,t,i))).pipe(Oa())})).pipe(Ol()):ot(!0)}(r.component,r.route,t,e,i)),Oa(r=>!0!==r,!0))}(o,i,r,n).pipe(Kn(a=>a&&function kW(n){return"boolean"==typeof n}(a)?function $W(n,e,t,i){return ai(e).pipe(eh(r=>Kd(function YW(n,e){return null!==n&&e&&e(new pW(n)),ot(!0)}(r.route.parent,i),function qW(n,e){return null!==n&&e&&e(new mW(n)),ot(!0)}(r.route,i),function JW(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function NW(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>SI(()=>ot(o.guards.map(c=>{const l=dh(o.node)??t,u=Rl(c,l);return zo(function VW(n){return n&&ph(n.canActivateChild)}(u)?u.canActivateChild(i,n):l.runInContext(()=>u(i,n))).pipe(Oa())})).pipe(Ol())));return ot(s).pipe(Ol())}(n,r.path,t),function XW(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return ot(!0);const r=i.map(s=>SI(()=>{const o=dh(e)??t,a=Rl(s,o);return zo(function UW(n){return n&&ph(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Oa())}));return ot(r).pipe(Ol())}(n,r.route,t))),Oa(r=>!0!==r,!0))}(i,s,n,e):ot(a)),kt(a=>({...t,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),di(c=>{if(s.guardsResult=c.guardsResult,Fa(c.guardsResult))throw iR(0,c.guardsResult);const l=new lW(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),ui(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",3),!1)),Ob(c=>{if(c.guards.canActivateChecks.length)return ot(c).pipe(di(l=>{const u=new uW(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),Zr(l=>{let u=!1;return ot(l).pipe(g9(t.paramsInheritanceStrategy,this.environmentInjector),di({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",2)}}))}),di(l=>{const u=new dW(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),Ob(c=>{const l=u=>{const d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(di(h=>{u.component=h}),kt(()=>{})));for(const h of u.children)d.push(...l(h));return d};return db(l(c.targetSnapshot.root)).pipe(_g(),xi(1))}),Ob(()=>this.afterPreactivation()),kt(c=>{const l=function xW(n,e,t){const i=uh(n,e._root,t?t._root:void 0);return new ZI(i,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s={...c,targetRouterState:l},s}),di(()=>{this.events.next(new bb)}),((n,e,t,i)=>kt(r=>(new OW(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),xi(1),di({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Go(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),Hn(this.transitionAbortSubject.pipe(di(c=>{throw c}))),pb(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Pa(c=>{if(a=!0,sR(c))this.events.next(new ch(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),function CW(n){return sR(n)&&Fa(n.url)}(c)?this.events.next(new wb(c.url)):s.resolve(!1);else{this.events.next(new Cg(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(c))}catch(l){s.reject(l)}}return Rr}))}))}cancelNavigationTransition(t,i,r){const s=new ch(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function vR(n){return n!==ah}let yR=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===xt);return i}getResolvedTitleForRoute(t){return t.data[th]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Le({token:n,factory:function(){return Ve(x9)},providedIn:"root"})}return n})(),x9=(()=>{class n extends yR{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}static#e=this.\u0275fac=function(i){return new(i||n)(Ue(_I))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),M9=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Le({token:n,factory:function(){return Ve(C9)},providedIn:"root"})}return n})();class S9{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let C9=(()=>{class n extends S9{static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=function Un(n){return js(()=>{const e=n.prototype.constructor,t=e[Ws]||E0(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[Ws]||E0(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}(n)))(r||n)}}();static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Pg=new qe("",{providedIn:"root",factory:()=>({})});let E9=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Le({token:n,factory:function(){return Ve(T9)},providedIn:"root"})}return n})(),T9=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var gh=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(gh||{});function bR(n,e){n.events.pipe(ui(t=>t instanceof Go||t instanceof ch||t instanceof Cg||t instanceof Dl),kt(t=>t instanceof Go||t instanceof Dl?gh.COMPLETE:t instanceof ch&&(0===t.code||1===t.code)?gh.REDIRECTING:gh.FAILED),ui(t=>t!==gh.REDIRECTING),xi(1)).subscribe(()=>{e()})}function D9(n){throw n}function A9(n,e,t){return e.parse("/")}const I9={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},R9={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let xr=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Ve(XD),this.isNgZoneEnabled=!1,this._events=new Wt,this.options=Ve(Pg,{optional:!0})||{},this.pendingTasks=Ve(JD),this.errorHandler=this.options.errorHandler||D9,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||A9,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Ve(E9),this.routeReuseStrategy=Ve(M9),this.titleStrategy=Ve(yR),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Ve(Nl,{optional:!0})?.flat()??[],this.navigationTransitions=Ve(Og),this.urlSerializer=Ve(ih),this.location=Ve(ky),this.componentInputBindingEnabled=!!Ve(Tg,{optional:!0}),this.eventsSubscription=new Fn,this.isNgZoneEnabled=Ve(Ft)instanceof Ft&&Ft.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Tl,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=KI(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:r}=this.navigationTransitions;if(null===r)return void(wR(i)&&this._events.next(i));if(i instanceof Sg)vR(r.source)&&(this.browserUrlTree=r.extractedUrl);else if(i instanceof Dl)this.rawUrlTree=r.rawUrl;else if(i instanceof YI){if("eager"===this.urlUpdateStrategy){if(!r.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl);this.setBrowserUrl(s,r)}this.browserUrlTree=r.urlAfterRedirects}}else if(i instanceof bb)this.currentUrlTree=r.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r),this.browserUrlTree=r.urlAfterRedirects);else if(i instanceof ch)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(r);else if(i instanceof wb){const s=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),o={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||vR(r.source)};this.scheduleNavigation(s,ah,null,o,{resolve:r.resolve,reject:r.reject,promise:r.promise})}i instanceof Cg&&this.restoreHistory(r,!0),i instanceof Go&&(this.navigated=!0),wR(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ah,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,i,t.state)},0)}))}navigateToSyncWithBrowser(t,i,r){const s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){const c={...r};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(s.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Ab),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=i,l=c?this.currentUrlTree.fragment:o;let d,u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...s};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}null!==u&&(u=this.removeEmptyProps(u));try{d=HI(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),d=this.currentUrlTree.root}return zI(d,t,u,l??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=Fa(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,ah,null,i)}navigate(t,i={skipLocationChange:!1}){return function O9(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new ue(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...I9}:!1===i?{...R9}:i,Fa(t))return OI(this.currentUrlTree,t,r);const s=this.parseUrl(t);return OI(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((d,h)=>{a=d,c=h});const u=this.pendingTasks.add();return bR(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const o={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",o)}else{const s={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(r,"",s)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function wR(n){return!(n instanceof bb||n instanceof wb)}let Fl=(()=>{class n{constructor(t,i,r,s,o,a){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new Wt,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c,this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Go&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,i,r,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||i||r||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function aC(n,e,t){return function wU(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?oC:vr}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,i){const r=this.renderer,s=this.el.nativeElement;null!==i?r.setAttribute(s,t,i):r.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(i){return new(i||n)(U(xr),U(Il),function wa(n){return function H3(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(eM(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(bi(),n)}("tabindex"),U(yr),U(qt),U(Ra))};static#t=this.\u0275dir=Te({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){1&i&&pe("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&i&&Xt("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",Ml],skipLocationChange:["skipLocationChange","skipLocationChange",Ml],replaceUrl:["replaceUrl","replaceUrl",Ml],routerLink:"routerLink"},standalone:!0,features:[bE,yi]})}return n})();class xR{}let F9=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ui(t=>t instanceof Go),eh(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=iy(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return ai(r).pipe(Dc())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):ot(null);const s=r.pipe(Kn(o=>null===o?ot(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return i.loadComponent&&!i._loadedComponent?ai([s,this.loader.loadComponent(i)]).pipe(Dc()):s})}static#e=this.\u0275fac=function(i){return new(i||n)(Ue(xr),Ue(ZD),Ue(ir),Ue(xR),Ue(Pb))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Nb=new qe("");let MR=(()=>{class n{constructor(t,i,r,s,o={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Sg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Go?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Dl&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof XI&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new XI(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){!function qC(){throw new Error("invalid")}()};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac})}return n})();function ro(n,e){return{\u0275kind:n,\u0275providers:e}}function CR(){const n=Ve(wi);return e=>{const t=n.get(ko);if(e!==t.components[0])return;const i=n.get(xr),r=n.get(ER);1===n.get(Fb)&&i.initialNavigation(),n.get(TR,null,Rt.Optional)?.setUpPreloading(),n.get(Nb,null,Rt.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const ER=new qe("",{factory:()=>new Wt}),Fb=new qe("",{providedIn:"root",factory:()=>1}),TR=new qe("");function U9(n){return ro(0,[{provide:TR,useExisting:F9},{provide:xR,useExisting:n}])}const DR=new qe("ROUTER_FORROOT_GUARD"),H9=[ky,{provide:ih,useClass:gb},xr,lh,{provide:Il,useFactory:function SR(n){return n.routerState.root},deps:[xr]},Pb,[]];function z9(){return new rA("Router",xr)}let AR=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[H9,[],{provide:Nl,multi:!0,useValue:t},{provide:DR,useFactory:$9,deps:[[xr,new ep,new tp]]},{provide:Pg,useValue:i||{}},i?.useHash?{provide:Ra,useClass:t8}:{provide:Ra,useClass:NA},{provide:Nb,useFactory:()=>{const n=Ve(y6),e=Ve(Ft),t=Ve(Pg),i=Ve(Og),r=Ve(ih);return t.scrollOffset&&n.setOffset(t.scrollOffset),new MR(r,i,n,e,t)}},i?.preloadingStrategy?U9(i.preloadingStrategy).\u0275providers:[],{provide:rA,multi:!0,useFactory:z9},i?.initialNavigation?q9(i):[],i?.bindToComponentInputs?ro(8,[nR,{provide:Tg,useExisting:nR}]).\u0275providers:[],[{provide:IR,useFactory:CR},{provide:Ey,multi:!0,useExisting:IR}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Nl,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(i){return new(i||n)(Ue(DR,8))};static#t=this.\u0275mod=an({type:n});static#n=this.\u0275inj=sn({})}return n})();function $9(n){return"guarded"}function q9(n){return["disabled"===n.initialNavigation?ro(3,[{provide:vy,multi:!0,useFactory:()=>{const e=Ve(xr);return()=>{e.setUpLocationChangeListener()}}},{provide:Fb,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ro(2,[{provide:Fb,useValue:0},{provide:vy,multi:!0,deps:[wi],useFactory:e=>{const t=e.get(QG,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const r=e.get(xr),s=e.get(ER);bR(r,()=>{i(!0)}),e.get(Og).afterPreactivation=()=>(i(!0),s.closed?ot(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const IR=new qe("");function RR(n,e,t,i,r,s,o){try{var a=n[s](o),c=a.value}catch(l){return void t(l)}a.done?e(c):Promise.resolve(c).then(i,r)}function Ll(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(c){RR(s,i,r,o,a,"next",c)}function a(c){RR(s,i,r,o,a,"throw",c)}o(void 0)})}}const PR=1,Z9=2,so=3,Ng=0,_7=1,v7=2,Wo=0,y7=1,b7=2,w7=3,x7=4,M7=5,$o=301,La=302,mh=306,ka=1e3,Oi=1001,zn=1003,In=1006,ao=1008,qo=1009,Yo=1014,co=1015,yh=1016,Ba=1020,Gr=1023,Ua=1026,Hl=1027,bh=2300,zl=2301,Gl=2400,jl=2401,Va=3001,Cn="srgb",Mi="srgb-linear",Xb="display-p3",Ug="display-p3-linear",Vg="linear",_n="srgb",Hg="rec709",zg="p3",wO="300 es",lo=2e3;class Xo{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const i=this._listeners[e.type];if(void 0!==i){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const Pi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];const za=Math.PI/180,Wl=180/Math.PI;function Mr(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Pi[255&n]+Pi[n>>8&255]+Pi[n>>16&255]+Pi[n>>24&255]+"-"+Pi[255&e]+Pi[e>>8&255]+"-"+Pi[e>>16&15|64]+Pi[e>>24&255]+"-"+Pi[63&t|128]+Pi[t>>8&255]+"-"+Pi[t>>16&255]+Pi[t>>24&255]+Pi[255&i]+Pi[i>>8&255]+Pi[i>>16&255]+Pi[i>>24&255]).toLowerCase()}function Rn(n,e,t){return Math.max(e,Math.min(t,n))}function Kb(n,e){return(n%e+e)%e}function wh(n,e,t){return(1-t)*n+t*e}function Qb(n){return 0==(n&n-1)&&0!==n}function MO(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Wg(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function ar(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function St(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(4294967295*n);case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int32Array:return Math.round(2147483647*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}}const SO_DEG2RAD=za,SO_radToDeg=function o$(n){return n*Wl};class ie{constructor(e=0,t=0){ie.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Rn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Dt{constructor(e,t,i,r,s,o,a,c,l){Dt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,i,r,s,o,a,c,l)}set(e,t,i,r,s,o,a,c,l){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=c,u[6]=i,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],c=i[6],l=i[1],u=i[4],d=i[7],h=i[2],f=i[5],p=i[8],_=r[0],m=r[3],g=r[6],b=r[1],w=r[4],x=r[7],S=r[2],T=r[5],E=r[8];return s[0]=o*_+a*b+c*S,s[3]=o*m+a*w+c*T,s[6]=o*g+a*x+c*E,s[1]=l*_+u*b+d*S,s[4]=l*m+u*w+d*T,s[7]=l*g+u*x+d*E,s[2]=h*_+f*b+p*S,s[5]=h*m+f*w+p*T,s[8]=h*g+f*x+p*E,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8];return t*o*u-t*a*l-i*s*u+i*a*c+r*s*l-r*o*c}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],d=u*o-a*l,h=a*c-u*s,f=l*s-o*c,p=t*d+i*h+r*f;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const _=1/p;return e[0]=d*_,e[1]=(r*l-u*i)*_,e[2]=(a*i-r*o)*_,e[3]=h*_,e[4]=(u*t-r*c)*_,e[5]=(r*s-a*t)*_,e[6]=f*_,e[7]=(i*c-l*t)*_,e[8]=(o*t-i*s)*_,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const c=Math.cos(s),l=Math.sin(s);return this.set(i*c,i*l,-i*(c*o+l*a)+o+e,-r*l,r*c,-r*(-l*o+c*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(e1.makeScale(e,t)),this}rotate(e){return this.premultiply(e1.makeRotation(-e)),this}translate(e,t){return this.premultiply(e1.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const e1=new Dt;function CO(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function xh(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function l$(){const n=xh("canvas");return n.style.display="block",n}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const EO={};function Mh(n){n in EO||(EO[n]=!0,console.warn(n))}const TO=(new Dt).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),DO=(new Dt).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),$g={[Mi]:{transfer:Vg,primaries:Hg,toReference:n=>n,fromReference:n=>n},[Cn]:{transfer:_n,primaries:Hg,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[Ug]:{transfer:Vg,primaries:zg,toReference:n=>n.applyMatrix3(DO),fromReference:n=>n.applyMatrix3(TO)},[Xb]:{transfer:_n,primaries:zg,toReference:n=>n.convertSRGBToLinear().applyMatrix3(DO),fromReference:n=>n.applyMatrix3(TO).convertLinearToSRGB()}},u$=new Set([Mi,Ug]),Jt={enabled:!0,_workingColorSpace:Mi,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!u$.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){return!1!==this.enabled&&e!==t&&e&&t?(0,$g[t].fromReference)((0,$g[e].toReference)(n)):n},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return $g[n].primaries},getTransfer:function(n){return""===n?Vg:$g[n].transfer}};function ql(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function t1(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}let Yl;class AO{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Yl&&(Yl=xh("canvas")),Yl.width=e.width,Yl.height=e.height;const i=Yl.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Yl}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=xh("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*ql(s[o]/255);return i.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t[i]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*ql(t[i]/255)):ql(t[i]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let d$=0;class Xl{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:d$++}),this.uuid=Mr(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(n1(r[o].isDataTexture?r[o].image:r[o]))}else s=n1(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function n1(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?AO.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let h$=0,us=(()=>{class n extends Xo{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=Oi,s=Oi,o=In,a=ao,c=Gr,l=qo,u=n.DEFAULT_ANISOTROPY,d=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:h$++}),this.uuid=Mr(),this.name="",this.source=new Xl(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=c,this.internalFormat=null,this.type=l,this.offset=new ie(0,0),this.repeat=new ie(1,1),this.center=new ie(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Dt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"==typeof d?this.colorSpace=d:(Mh("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=d===Va?Cn:""),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case ka:t.x=t.x-Math.floor(t.x);break;case Oi:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case ka:t.y=t.y-Math.floor(t.y);break;case Oi:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Mh("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Cn?Va:3e3}set encoding(t){Mh("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=t===Va?Cn:""}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n.DEFAULT_ANISOTROPY=1,n})();class on{constructor(e=0,t=0,i=0,r=1){on.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const c=e.elements,l=c[0],u=c[4],d=c[8],h=c[1],f=c[5],p=c[9],_=c[2],m=c[6],g=c[10];if(Math.abs(u-h)<.01&&Math.abs(d-_)<.01&&Math.abs(p-m)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+_)<.1&&Math.abs(p+m)<.1&&Math.abs(l+f+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const w=(l+1)/2,x=(f+1)/2,S=(g+1)/2,T=(u+h)/4,E=(d+_)/4,O=(p+m)/4;return w>x&&w>S?w<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(w),r=T/i,s=E/i):x>S?x<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(x),i=T/r,s=O/r):S<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(S),i=E/s,r=O/s),this.set(i,r,s,t),this}let b=Math.sqrt((m-p)*(m-p)+(d-_)*(d-_)+(h-u)*(h-u));return Math.abs(b)<.001&&(b=1),this.x=(m-p)/b,this.y=(d-_)/b,this.z=(h-u)/b,this.w=Math.acos((l+f+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class f$ extends Xo{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new on(0,0,e,t),this.scissorTest=!1,this.viewport=new on(0,0,e,t);const r={width:e,height:t,depth:1};void 0!==i.encoding&&(Mh("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===Va?Cn:""),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:In,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},i),this.texture=new us(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps,this.texture.internalFormat=i.internalFormat,this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Xl(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ga extends f${constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class i1 extends us{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=zn,this.minFilter=zn,this.wrapR=Oi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class IO extends us{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=zn,this.minFilter=zn,this.wrapR=Oi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Si{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let c=i[r+0],l=i[r+1],u=i[r+2],d=i[r+3];const h=s[o+0],f=s[o+1],p=s[o+2],_=s[o+3];if(0===a)return e[t+0]=c,e[t+1]=l,e[t+2]=u,void(e[t+3]=d);if(1===a)return e[t+0]=h,e[t+1]=f,e[t+2]=p,void(e[t+3]=_);if(d!==_||c!==h||l!==f||u!==p){let m=1-a;const g=c*h+l*f+u*p+d*_,b=g>=0?1:-1,w=1-g*g;if(w>Number.EPSILON){const S=Math.sqrt(w),T=Math.atan2(S,g*b);m=Math.sin(m*T)/S,a=Math.sin(a*T)/S}const x=a*b;if(c=c*m+h*x,l=l*m+f*x,u=u*m+p*x,d=d*m+_*x,m===1-a){const S=1/Math.sqrt(c*c+l*l+u*u+d*d);c*=S,l*=S,u*=S,d*=S}}e[t]=c,e[t+1]=l,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],c=i[r+1],l=i[r+2],u=i[r+3],d=s[o],h=s[o+1],f=s[o+2],p=s[o+3];return e[t]=a*p+u*d+c*f-l*h,e[t+1]=c*p+u*h+l*d-a*f,e[t+2]=l*p+u*f+a*h-c*d,e[t+3]=u*p-a*d-c*h-l*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,c=Math.sin,l=a(i/2),u=a(r/2),d=a(s/2),h=c(i/2),f=c(r/2),p=c(s/2);switch(o){case"XYZ":this._x=h*u*d+l*f*p,this._y=l*f*d-h*u*p,this._z=l*u*p+h*f*d,this._w=l*u*d-h*f*p;break;case"YXZ":this._x=h*u*d+l*f*p,this._y=l*f*d-h*u*p,this._z=l*u*p-h*f*d,this._w=l*u*d+h*f*p;break;case"ZXY":this._x=h*u*d-l*f*p,this._y=l*f*d+h*u*p,this._z=l*u*p+h*f*d,this._w=l*u*d-h*f*p;break;case"ZYX":this._x=h*u*d-l*f*p,this._y=l*f*d+h*u*p,this._z=l*u*p-h*f*d,this._w=l*u*d+h*f*p;break;case"YZX":this._x=h*u*d+l*f*p,this._y=l*f*d+h*u*p,this._z=l*u*p-h*f*d,this._w=l*u*d-h*f*p;break;case"XZY":this._x=h*u*d-l*f*p,this._y=l*f*d-h*u*p,this._z=l*u*p+h*f*d,this._w=l*u*d+h*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],c=t[9],l=t[2],u=t[6],d=t[10],h=i+a+d;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-c)*f,this._y=(s-l)*f,this._z=(o-r)*f}else if(i>a&&i>d){const f=2*Math.sqrt(1+i-a-d);this._w=(u-c)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(s+l)/f}else if(a>d){const f=2*Math.sqrt(1+a-i-d);this._w=(s-l)/f,this._x=(r+o)/f,this._y=.25*f,this._z=(c+u)/f}else{const f=2*Math.sqrt(1+d-i-a);this._w=(o-r)/f,this._x=(s+l)/f,this._y=(c+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Rn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,c=t._y,l=t._z,u=t._w;return this._x=i*u+o*a+r*l-s*c,this._y=r*u+o*c+s*a-i*l,this._z=s*u+o*l+i*c-r*a,this._w=o*u-i*a-r*c-s*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const c=1-a*a;if(c<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*i+t*this._x,this._y=f*r+t*this._y,this._z=f*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(c),u=Math.atan2(l,a),d=Math.sin((1-t)*u)/l,h=Math.sin(t*u)/l;return this._w=o*d+this._w*h,this._x=i*d+this._x*h,this._y=r*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class R{constructor(e=0,t=0,i=0){R.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(RO.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(RO.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,c=e.w,l=c*t+o*r-a*i,u=c*i+a*t-s*r,d=c*r+s*i-o*t,h=-s*t-o*i-a*r;return this.x=l*c+h*-s+u*-a-d*-o,this.y=u*c+h*-o+d*-s-l*-a,this.z=d*c+h*-a+l*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,c=t.z;return this.x=r*c-s*a,this.y=s*o-i*c,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return r1.copy(this).projectOnVector(e),this.sub(r1)}reflect(e){return this.sub(r1.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Rn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const r1=new R,RO=new Si;class ds{constructor(e=new R(1/0,1/0,1/0),t=new R(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(ho.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(ho.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=ho.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),void 0!==e.boundingBox)null===e.boundingBox&&e.computeBoundingBox(),Jl.copy(e.boundingBox),Jl.applyMatrix4(e.matrixWorld),this.union(Jl);else{const r=e.geometry;if(void 0!==r)if(t&&void 0!==r.attributes&&void 0!==r.attributes.position){const s=r.attributes.position;for(let o=0,a=s.count;o<a;o++)ho.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(ho)}else null===r.boundingBox&&r.computeBoundingBox(),Jl.copy(r.boundingBox),Jl.applyMatrix4(e.matrixWorld),this.union(Jl)}const i=e.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ho),ho.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Sh),qg.subVectors(this.max,Sh),Zl.subVectors(e.a,Sh),Kl.subVectors(e.b,Sh),Ql.subVectors(e.c,Sh),Jo.subVectors(Kl,Zl),Zo.subVectors(Ql,Kl),ja.subVectors(Zl,Ql);let t=[0,-Jo.z,Jo.y,0,-Zo.z,Zo.y,0,-ja.z,ja.y,Jo.z,0,-Jo.x,Zo.z,0,-Zo.x,ja.z,0,-ja.x,-Jo.y,Jo.x,0,-Zo.y,Zo.x,0,-ja.y,ja.x,0];return!(!s1(t,Zl,Kl,Ql,qg)||(t=[1,0,0,0,1,0,0,0,1],!s1(t,Zl,Kl,Ql,qg)))&&(Yg.crossVectors(Jo,Zo),t=[Yg.x,Yg.y,Yg.z],s1(t,Zl,Kl,Ql,qg))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ho).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(ho).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(uo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),uo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),uo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),uo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),uo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),uo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),uo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),uo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(uo)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const uo=[new R,new R,new R,new R,new R,new R,new R,new R],ho=new R,Jl=new ds,Zl=new R,Kl=new R,Ql=new R,Jo=new R,Zo=new R,ja=new R,Sh=new R,qg=new R,Yg=new R,Wa=new R;function s1(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Wa.fromArray(n,s);const a=r.x*Math.abs(Wa.x)+r.y*Math.abs(Wa.y)+r.z*Math.abs(Wa.z),c=e.dot(Wa),l=t.dot(Wa),u=i.dot(Wa);if(Math.max(-Math.max(c,l,u),Math.min(c,l,u))>a)return!1}return!0}const p$=new ds,Ch=new R,o1=new R;class hs{constructor(e=new R,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):p$.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Ch.subVectors(e,this.center);const t=Ch.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=.5*(i-this.radius);this.center.addScaledVector(Ch,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(o1.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Ch.copy(e.center).add(o1)),this.expandByPoint(Ch.copy(e.center).sub(o1))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const fo=new R,a1=new R,Xg=new R,Ko=new R,c1=new R,Jg=new R,l1=new R;class eu{constructor(e=new R,t=new R(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,fo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=fo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(fo.copy(this.origin).addScaledVector(this.direction,t),fo.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){a1.copy(e).add(t).multiplyScalar(.5),Xg.copy(t).sub(e).normalize(),Ko.copy(this.origin).sub(a1);const s=.5*e.distanceTo(t),o=-this.direction.dot(Xg),a=Ko.dot(this.direction),c=-Ko.dot(Xg),l=Ko.lengthSq(),u=Math.abs(1-o*o);let d,h,f,p;if(u>0)if(d=o*c-a,h=o*a-c,p=s*u,d>=0)if(h>=-p)if(h<=p){const _=1/u;d*=_,h*=_,f=d*(d+o*h+2*a)+h*(o*d+h+2*c)+l}else h=s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*c)+l;else h=-s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*c)+l;else h<=-p?(d=Math.max(0,-(-o*s+a)),h=d>0?-s:Math.min(Math.max(-s,-c),s),f=-d*d+h*(h+2*c)+l):h<=p?(d=0,h=Math.min(Math.max(-s,-c),s),f=h*(h+2*c)+l):(d=Math.max(0,-(o*s+a)),h=d>0?s:Math.min(Math.max(-s,-c),s),f=-d*d+h*(h+2*c)+l);else h=o>0?-s:s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*c)+l;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(a1).addScaledVector(Xg,h),f}intersectSphere(e,t){fo.subVectors(e.center,this.origin);const i=fo.dot(this.direction),r=fo.dot(fo)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,c=i+o;return c<0?null:this.at(a<0?c:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,c;const l=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return l>=0?(i=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(i=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),u>=0?(s=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),d>=0?(a=(e.min.z-h.z)*d,c=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,c=(e.min.z-h.z)*d),i>c||a>r)||((a>i||i!=i)&&(i=a),(c<r||r!=r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return null!==this.intersectBox(e,fo)}intersectTriangle(e,t,i,r,s){c1.subVectors(t,e),Jg.subVectors(i,e),l1.crossVectors(c1,Jg);let a,o=this.direction.dot(l1);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Ko.subVectors(this.origin,e);const c=a*this.direction.dot(Jg.crossVectors(Ko,Jg));if(c<0)return null;const l=a*this.direction.dot(c1.cross(Ko));if(l<0||c+l>o)return null;const u=-a*Ko.dot(l1);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class ht{constructor(e,t,i,r,s,o,a,c,l,u,d,h,f,p,_,m){ht.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,i,r,s,o,a,c,l,u,d,h,f,p,_,m)}set(e,t,i,r,s,o,a,c,l,u,d,h,f,p,_,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=s,g[5]=o,g[9]=a,g[13]=c,g[2]=l,g[6]=u,g[10]=d,g[14]=h,g[3]=f,g[7]=p,g[11]=_,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new ht).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/tu.setFromMatrixColumn(e,0).length(),s=1/tu.setFromMatrixColumn(e,1).length(),o=1/tu.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),c=Math.cos(r),l=Math.sin(r),u=Math.cos(s),d=Math.sin(s);if("XYZ"===e.order){const h=o*u,f=o*d,p=a*u,_=a*d;t[0]=c*u,t[4]=-c*d,t[8]=l,t[1]=f+p*l,t[5]=h-_*l,t[9]=-a*c,t[2]=_-h*l,t[6]=p+f*l,t[10]=o*c}else if("YXZ"===e.order){const h=c*u,f=c*d,p=l*u,_=l*d;t[0]=h+_*a,t[4]=p*a-f,t[8]=o*l,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=f*a-p,t[6]=_+h*a,t[10]=o*c}else if("ZXY"===e.order){const h=c*u,f=c*d,p=l*u,_=l*d;t[0]=h-_*a,t[4]=-o*d,t[8]=p+f*a,t[1]=f+p*a,t[5]=o*u,t[9]=_-h*a,t[2]=-o*l,t[6]=a,t[10]=o*c}else if("ZYX"===e.order){const h=o*u,f=o*d,p=a*u,_=a*d;t[0]=c*u,t[4]=p*l-f,t[8]=h*l+_,t[1]=c*d,t[5]=_*l+h,t[9]=f*l-p,t[2]=-l,t[6]=a*c,t[10]=o*c}else if("YZX"===e.order){const h=o*c,f=o*l,p=a*c,_=a*l;t[0]=c*u,t[4]=_-h*d,t[8]=p*d+f,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-l*u,t[6]=f*d+p,t[10]=h-_*d}else if("XZY"===e.order){const h=o*c,f=o*l,p=a*c,_=a*l;t[0]=c*u,t[4]=-d,t[8]=l*u,t[1]=h*d+_,t[5]=o*u,t[9]=f*d-p,t[2]=p*d-f,t[6]=a*u,t[10]=_*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(g$,e,m$)}lookAt(e,t,i){const r=this.elements;return Sr.subVectors(e,t),0===Sr.lengthSq()&&(Sr.z=1),Sr.normalize(),Qo.crossVectors(i,Sr),0===Qo.lengthSq()&&(1===Math.abs(i.z)?Sr.x+=1e-4:Sr.z+=1e-4,Sr.normalize(),Qo.crossVectors(i,Sr)),Qo.normalize(),Zg.crossVectors(Sr,Qo),r[0]=Qo.x,r[4]=Zg.x,r[8]=Sr.x,r[1]=Qo.y,r[5]=Zg.y,r[9]=Sr.y,r[2]=Qo.z,r[6]=Zg.z,r[10]=Sr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],c=i[8],l=i[12],u=i[1],d=i[5],h=i[9],f=i[13],p=i[2],_=i[6],m=i[10],g=i[14],b=i[3],w=i[7],x=i[11],S=i[15],T=r[0],E=r[4],O=r[8],C=r[12],I=r[1],V=r[5],X=r[9],J=r[13],k=r[2],j=r[6],Y=r[10],Z=r[14],ge=r[3],Q=r[7],se=r[11],H=r[15];return s[0]=o*T+a*I+c*k+l*ge,s[4]=o*E+a*V+c*j+l*Q,s[8]=o*O+a*X+c*Y+l*se,s[12]=o*C+a*J+c*Z+l*H,s[1]=u*T+d*I+h*k+f*ge,s[5]=u*E+d*V+h*j+f*Q,s[9]=u*O+d*X+h*Y+f*se,s[13]=u*C+d*J+h*Z+f*H,s[2]=p*T+_*I+m*k+g*ge,s[6]=p*E+_*V+m*j+g*Q,s[10]=p*O+_*X+m*Y+g*se,s[14]=p*C+_*J+m*Z+g*H,s[3]=b*T+w*I+x*k+S*ge,s[7]=b*E+w*V+x*j+S*Q,s[11]=b*O+w*X+x*Y+S*se,s[15]=b*C+w*J+x*Z+S*H,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],c=e[9],l=e[13],u=e[2],d=e[6],h=e[10],f=e[14];return e[3]*(+s*c*d-r*l*d-s*a*h+i*l*h+r*a*f-i*c*f)+e[7]*(+t*c*f-t*l*h+s*o*h-r*o*f+r*l*u-s*c*u)+e[11]*(+t*l*d-t*a*f-s*o*d+i*o*f+s*a*u-i*l*u)+e[15]*(-r*a*u-t*c*d+t*a*h+r*o*d-i*o*h+i*c*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],d=e[9],h=e[10],f=e[11],p=e[12],_=e[13],m=e[14],g=e[15],b=d*m*l-_*h*l+_*c*f-a*m*f-d*c*g+a*h*g,w=p*h*l-u*m*l-p*c*f+o*m*f+u*c*g-o*h*g,x=u*_*l-p*d*l+p*a*f-o*_*f-u*a*g+o*d*g,S=p*d*c-u*_*c-p*a*h+o*_*h+u*a*m-o*d*m,T=t*b+i*w+r*x+s*S;if(0===T)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const E=1/T;return e[0]=b*E,e[1]=(_*h*s-d*m*s-_*r*f+i*m*f+d*r*g-i*h*g)*E,e[2]=(a*m*s-_*c*s+_*r*l-i*m*l-a*r*g+i*c*g)*E,e[3]=(d*c*s-a*h*s-d*r*l+i*h*l+a*r*f-i*c*f)*E,e[4]=w*E,e[5]=(u*m*s-p*h*s+p*r*f-t*m*f-u*r*g+t*h*g)*E,e[6]=(p*c*s-o*m*s-p*r*l+t*m*l+o*r*g-t*c*g)*E,e[7]=(o*h*s-u*c*s+u*r*l-t*h*l-o*r*f+t*c*f)*E,e[8]=x*E,e[9]=(p*d*s-u*_*s-p*i*f+t*_*f+u*i*g-t*d*g)*E,e[10]=(o*_*s-p*a*s+p*i*l-t*_*l-o*i*g+t*a*g)*E,e[11]=(u*a*s-o*d*s-u*i*l+t*d*l+o*i*f-t*a*f)*E,e[12]=S*E,e[13]=(u*_*r-p*d*r+p*i*h-t*_*h-u*i*m+t*d*m)*E,e[14]=(p*a*r-o*_*r-p*i*c+t*_*c+o*i*m-t*a*m)*E,e[15]=(o*d*r-u*a*r+u*i*c-t*d*c-o*i*h+t*a*h)*E,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,c=e.z,l=s*o,u=s*a;return this.set(l*o+i,l*a-r*c,l*c+r*a,0,l*a+r*c,u*a+i,u*c-r*o,0,l*c-r*a,u*c+r*o,s*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,c=t._w,l=s+s,u=o+o,d=a+a,h=s*l,f=s*u,p=s*d,_=o*u,m=o*d,g=a*d,b=c*l,w=c*u,x=c*d,S=i.x,T=i.y,E=i.z;return r[0]=(1-(_+g))*S,r[1]=(f+x)*S,r[2]=(p-w)*S,r[3]=0,r[4]=(f-x)*T,r[5]=(1-(h+g))*T,r[6]=(m+b)*T,r[7]=0,r[8]=(p+w)*E,r[9]=(m-b)*E,r[10]=(1-(h+_))*E,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=tu.set(r[0],r[1],r[2]).length();const o=tu.set(r[4],r[5],r[6]).length(),a=tu.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],fs.copy(this);const l=1/s,u=1/o,d=1/a;return fs.elements[0]*=l,fs.elements[1]*=l,fs.elements[2]*=l,fs.elements[4]*=u,fs.elements[5]*=u,fs.elements[6]*=u,fs.elements[8]*=d,fs.elements[9]*=d,fs.elements[10]*=d,t.setFromRotationMatrix(fs),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=lo){const c=this.elements,l=2*s/(t-e),u=2*s/(i-r),d=(t+e)/(t-e),h=(i+r)/(i-r);let f,p;if(a===lo)f=-(o+s)/(o-s),p=-2*o*s/(o-s);else{if(2001!==a)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);f=-o/(o-s),p=-o*s/(o-s)}return c[0]=l,c[4]=0,c[8]=d,c[12]=0,c[1]=0,c[5]=u,c[9]=h,c[13]=0,c[2]=0,c[6]=0,c[10]=f,c[14]=p,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=lo){const c=this.elements,l=1/(t-e),u=1/(i-r),d=1/(o-s),h=(t+e)*l,f=(i+r)*u;let p,_;if(a===lo)p=(o+s)*d,_=-2*d;else{if(2001!==a)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);p=s*d,_=-1*d}return c[0]=2*l,c[4]=0,c[8]=0,c[12]=-h,c[1]=0,c[5]=2*u,c[9]=0,c[13]=-f,c[2]=0,c[6]=0,c[10]=_,c[14]=-p,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const tu=new R,fs=new ht,g$=new R(0,0,0),m$=new R(1,1,1),Qo=new R,Zg=new R,Sr=new R,OO=new ht,PO=new Si;let _$=(()=>{class n{constructor(t=0,i=0,r=0,s=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,s=this._order){return this._x=t,this._y=i,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){const s=t.elements,o=s[0],a=s[4],c=s[8],l=s[1],u=s[5],d=s[9],h=s[2],f=s[6],p=s[10];switch(i){case"XYZ":this._y=Math.asin(Rn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Rn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(c,p),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(Rn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-Rn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(Rn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(c,p));break;case"XZY":this._z=Math.asin(-Rn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(c,o)):(this._x=Math.atan2(-d,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return OO.makeRotationFromQuaternion(t),this.setFromRotationMatrix(OO,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return PO.setFromEuler(this),this.setFromQuaternion(PO,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})();class u1{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let v$=0;const NO=new R,nu=new Si,po=new ht,Kg=new R,Eh=new R,y$=new R,b$=new Si,FO=new R(1,0,0),LO=new R(0,1,0),kO=new R(0,0,1),w$={type:"added"},x$={type:"removed"};let hi=(()=>{class n extends Xo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:v$++}),this.uuid=Mr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();const t=new R,i=new _$,r=new Si,s=new R(1,1,1);i._onChange(function o(){r.setFromEuler(i,!1)}),r._onChange(function a(){i.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new ht},normalMatrix:{value:new Dt}}),this.matrix=new ht,this.matrixWorld=new ht,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new u1,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return nu.setFromAxisAngle(t,i),this.quaternion.multiply(nu),this}rotateOnWorldAxis(t,i){return nu.setFromAxisAngle(t,i),this.quaternion.premultiply(nu),this}rotateX(t){return this.rotateOnAxis(FO,t)}rotateY(t){return this.rotateOnAxis(LO,t)}rotateZ(t){return this.rotateOnAxis(kO,t)}translateOnAxis(t,i){return NO.copy(t).applyQuaternion(this.quaternion),this.position.add(NO.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(FO,t)}translateY(t){return this.translateOnAxis(LO,t)}translateZ(t){return this.translateOnAxis(kO,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(po.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?Kg.copy(t):Kg.set(t,i,r);const s=this.parent;this.updateWorldMatrix(!0,!1),Eh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?po.lookAt(Eh,Kg,this.up):po.lookAt(Kg,Eh,this.up),this.quaternion.setFromRotationMatrix(po),s&&(po.extractRotation(s.matrixWorld),nu.setFromRotationMatrix(po),this.quaternion.premultiply(nu.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(w$)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(x$)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),po.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),po.multiply(t.parent.matrixWorld)),t.applyMatrix4(po),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectByProperty(t,i);if(void 0!==a)return a}}getObjectsByProperty(t,i){let r=[];this[t]===i&&r.push(this);for(let s=0,o=this.children.length;s<o;s++){const a=this.children[s].getObjectsByProperty(t,i);a.length>0&&(r=r.concat(a))}return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Eh,t,y$),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Eh,b$,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverseVisible(t)}traverseAncestors(t){const i=this.parent;null!==i&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let r=0,s=i.length;r<s;r++){const o=i[r];(!0===o.matrixWorldAutoUpdate||!0===t)&&o.updateMatrixWorld(t)}}updateWorldMatrix(t,i){const r=this.parent;if(!0===t&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===i){const s=this.children;for(let o=0,a=s.length;o<a;o++){const c=s[o];!0===c.matrixWorldAutoUpdate&&c.updateWorldMatrix(!1,!0)}}}toJSON(t){const i=void 0===t||"string"==typeof t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};function o(c,l){return void 0===c[l.uuid]&&(c[l.uuid]=l.toJSON(t)),l.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);const c=this.geometry.parameters;if(void 0!==c&&void 0!==c.shapes){const l=c.shapes;if(Array.isArray(l))for(let u=0,d=l.length;u<d;u++)o(t.shapes,l[u]);else o(t.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const c=[];for(let l=0,u=this.material.length;l<u;l++)c.push(o(t.materials,this.material[l]));s.material=c}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let c=0;c<this.children.length;c++)s.children.push(this.children[c].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let c=0;c<this.animations.length;c++)s.animations.push(o(t.animations,this.animations[c]))}if(i){const c=a(t.geometries),l=a(t.materials),u=a(t.textures),d=a(t.images),h=a(t.shapes),f=a(t.skeletons),p=a(t.animations),_=a(t.nodes);c.length>0&&(r.geometries=c),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),d.length>0&&(r.images=d),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),p.length>0&&(r.animations=p),_.length>0&&(r.nodes=_)}return r.object=s,r;function a(c){const l=[];for(const u in c){const d=c[u];delete d.metadata,l.push(d)}return l}}clone(t){return(new this.constructor).copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===i)for(let r=0;r<t.children.length;r++)this.add(t.children[r].clone());return this}}return n.DEFAULT_UP=new R(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})();const ps=new R,go=new R,d1=new R,mo=new R,iu=new R,ru=new R,BO=new R,h1=new R,f1=new R,p1=new R;let Qg=!1;class Cr{constructor(e=new R,t=new R,i=new R){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),ps.subVectors(e,t),r.cross(ps);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){ps.subVectors(r,t),go.subVectors(i,t),d1.subVectors(e,t);const o=ps.dot(ps),a=ps.dot(go),c=ps.dot(d1),l=go.dot(go),u=go.dot(d1),d=o*l-a*a;if(0===d)return s.set(-2,-1,-1);const h=1/d,f=(l*c-a*u)*h,p=(o*u-a*c)*h;return s.set(1-f-p,p,f)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,mo),mo.x>=0&&mo.y>=0&&mo.x+mo.y<=1}static getUV(e,t,i,r,s,o,a,c){return!1===Qg&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Qg=!0),this.getInterpolation(e,t,i,r,s,o,a,c)}static getInterpolation(e,t,i,r,s,o,a,c){return this.getBarycoord(e,t,i,r,mo),c.setScalar(0),c.addScaledVector(s,mo.x),c.addScaledVector(o,mo.y),c.addScaledVector(a,mo.z),c}static isFrontFacing(e,t,i,r){return ps.subVectors(i,t),go.subVectors(e,t),ps.cross(go).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ps.subVectors(this.c,this.b),go.subVectors(this.a,this.b),.5*ps.cross(go).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Cr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Cr.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return!1===Qg&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Qg=!0),Cr.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}getInterpolation(e,t,i,r,s){return Cr.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Cr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Cr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;iu.subVectors(r,i),ru.subVectors(s,i),h1.subVectors(e,i);const c=iu.dot(h1),l=ru.dot(h1);if(c<=0&&l<=0)return t.copy(i);f1.subVectors(e,r);const u=iu.dot(f1),d=ru.dot(f1);if(u>=0&&d<=u)return t.copy(r);const h=c*d-u*l;if(h<=0&&c>=0&&u<=0)return o=c/(c-u),t.copy(i).addScaledVector(iu,o);p1.subVectors(e,s);const f=iu.dot(p1),p=ru.dot(p1);if(p>=0&&f<=p)return t.copy(s);const _=f*l-c*p;if(_<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(i).addScaledVector(ru,a);const m=u*p-f*d;if(m<=0&&d-u>=0&&f-p>=0)return BO.subVectors(s,r),a=(d-u)/(d-u+(f-p)),t.copy(r).addScaledVector(BO,a);const g=1/(m+_+h);return o=_*g,a=h*g,t.copy(i).addScaledVector(iu,o).addScaledVector(ru,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let M$=0;class gs extends Xo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:M$++}),this.uuid=Mr(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const c=s[a];delete c.metadata,o.push(c)}return o}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(i.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),!0===this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=!0),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaHash&&(i.alphaHash=!0),!0===this.alphaToCoverage&&(i.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=!0),!0===this.forceSinglePass&&(i.forceSinglePass=!0),!0===this.wireframe&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=!0),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}const UO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ea={h:0,s:0,l:0},em={h:0,s:0,l:0};function g1(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}class Ne{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(void 0===t&&void 0===i){const r=e;r&&r.isColor?this.copy(r):"number"==typeof r?this.setHex(r):"string"==typeof r&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Cn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Jt.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Jt.workingColorSpace){return this.r=e,this.g=t,this.b=i,Jt.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Jt.workingColorSpace){if(e=Kb(e,1),t=Rn(t,0,1),i=Rn(i,0,1),0===t)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=g1(o,s,e+1/3),this.g=g1(o,s,e),this.b=g1(o,s,e-1/3)}return Jt.toWorkingColorSpace(this,r),this}setStyle(e,t=Cn){function i(s){void 0!==s&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[2];switch(r[1]){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(3===o)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(6===o)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Cn){const i=UO[e.toLowerCase()];return void 0!==i?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ql(e.r),this.g=ql(e.g),this.b=ql(e.b),this}copyLinearToSRGB(e){return this.r=t1(e.r),this.g=t1(e.g),this.b=t1(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Cn){return Jt.fromWorkingColorSpace(Ni.copy(this),e),65536*Math.round(Rn(255*Ni.r,0,255))+256*Math.round(Rn(255*Ni.g,0,255))+Math.round(Rn(255*Ni.b,0,255))}getHexString(e=Cn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Jt.workingColorSpace){Jt.fromWorkingColorSpace(Ni.copy(this),t);const i=Ni.r,r=Ni.g,s=Ni.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let c,l;const u=(a+o)/2;if(a===o)c=0,l=0;else{const d=o-a;switch(l=u<=.5?d/(o+a):d/(2-o-a),o){case i:c=(r-s)/d+(r<s?6:0);break;case r:c=(s-i)/d+2;break;case s:c=(i-r)/d+4}c/=6}return e.h=c,e.s=l,e.l=u,e}getRGB(e,t=Jt.workingColorSpace){return Jt.fromWorkingColorSpace(Ni.copy(this),t),e.r=Ni.r,e.g=Ni.g,e.b=Ni.b,e}getStyle(e=Cn){Jt.fromWorkingColorSpace(Ni.copy(this),e);const t=Ni.r,i=Ni.g,r=Ni.b;return e!==Cn?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*i)},${Math.round(255*r)})`}offsetHSL(e,t,i){return this.getHSL(ea),this.setHSL(ea.h+e,ea.s+t,ea.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(ea),e.getHSL(em);const i=wh(ea.h,em.h,t),r=wh(ea.s,em.s,t),s=wh(ea.l,em.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ni=new Ne;Ne.NAMES=UO;class fi extends gs{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ne(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ng,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const qn=new R,tm=new ie;class On{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=i,this.usage=35044,this.updateRange={offset:0,count:-1},this.gpuType=co,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)tm.fromBufferAttribute(this,t),tm.applyMatrix3(e),this.setXY(t,tm.x,tm.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)qn.fromBufferAttribute(this,t),qn.applyMatrix3(e),this.setXYZ(t,qn.x,qn.y,qn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)qn.fromBufferAttribute(this,t),qn.applyMatrix4(e),this.setXYZ(t,qn.x,qn.y,qn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)qn.fromBufferAttribute(this,t),qn.applyNormalMatrix(e),this.setXYZ(t,qn.x,qn.y,qn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)qn.fromBufferAttribute(this,t),qn.transformDirection(e),this.setXYZ(t,qn.x,qn.y,qn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=ar(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=St(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ar(t,this.array)),t}setX(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ar(t,this.array)),t}setY(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ar(t,this.array)),t}setZ(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ar(t,this.array)),t}setW(e,t){return this.normalized&&(t=St(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=St(t,this.array),i=St(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=St(t,this.array),i=St(i,this.array),r=St(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=St(t,this.array),i=St(i,this.array),r=St(r,this.array),s=St(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}}class VO extends On{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class HO extends On{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Xe extends On{constructor(e,t,i){super(new Float32Array(e),t,i)}}let C$=0;const Wr=new ht,m1=new hi,su=new R,Er=new ds,Dh=new ds,pi=new R;class It extends Xo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:C$++}),this.uuid=Mr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(CO(e)?HO:VO)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const s=(new Dt).getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Wr.makeRotationFromQuaternion(e),this.applyMatrix4(Wr),this}rotateX(e){return Wr.makeRotationX(e),this.applyMatrix4(Wr),this}rotateY(e){return Wr.makeRotationY(e),this.applyMatrix4(Wr),this}rotateZ(e){return Wr.makeRotationZ(e),this.applyMatrix4(Wr),this}translate(e,t,i){return Wr.makeTranslation(e,t,i),this.applyMatrix4(Wr),this}scale(e,t,i){return Wr.makeScale(e,t,i),this.applyMatrix4(Wr),this}lookAt(e){return m1.lookAt(e),m1.updateMatrix(),this.applyMatrix4(m1.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(su).negate(),this.translate(su.x,su.y,su.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Xe(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ds);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new R(-1/0,-1/0,-1/0),new R(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++)Er.setFromBufferAttribute(t[i]),this.morphTargetsRelative?(pi.addVectors(this.boundingBox.min,Er.min),this.boundingBox.expandByPoint(pi),pi.addVectors(this.boundingBox.max,Er.max),this.boundingBox.expandByPoint(pi)):(this.boundingBox.expandByPoint(Er.min),this.boundingBox.expandByPoint(Er.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new hs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new R,1/0);if(e){const i=this.boundingSphere.center;if(Er.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)Dh.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(pi.addVectors(Er.min,Dh.min),Er.expandByPoint(pi),pi.addVectors(Er.max,Dh.max),Er.expandByPoint(pi)):(Er.expandByPoint(Dh.min),Er.expandByPoint(Dh.max));Er.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)pi.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(pi));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],c=this.morphTargetsRelative;for(let l=0,u=a.count;l<u;l++)pi.fromBufferAttribute(a,l),c&&(su.fromBufferAttribute(e,l),pi.add(su)),r=Math.max(r,i.distanceToSquared(pi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new On(new Float32Array(4*a),4));const c=this.getAttribute("tangent").array,l=[],u=[];for(let I=0;I<a;I++)l[I]=new R,u[I]=new R;const d=new R,h=new R,f=new R,p=new ie,_=new ie,m=new ie,g=new R,b=new R;function w(I,V,X){d.fromArray(r,3*I),h.fromArray(r,3*V),f.fromArray(r,3*X),p.fromArray(o,2*I),_.fromArray(o,2*V),m.fromArray(o,2*X),h.sub(d),f.sub(d),_.sub(p),m.sub(p);const J=1/(_.x*m.y-m.x*_.y);isFinite(J)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(f,-_.y).multiplyScalar(J),b.copy(f).multiplyScalar(_.x).addScaledVector(h,-m.x).multiplyScalar(J),l[I].add(g),l[V].add(g),l[X].add(g),u[I].add(b),u[V].add(b),u[X].add(b))}let x=this.groups;0===x.length&&(x=[{start:0,count:i.length}]);for(let I=0,V=x.length;I<V;++I){const X=x[I],J=X.start;for(let j=J,Y=J+X.count;j<Y;j+=3)w(i[j+0],i[j+1],i[j+2])}const S=new R,T=new R,E=new R,O=new R;function C(I){E.fromArray(s,3*I),O.copy(E);const V=l[I];S.copy(V),S.sub(E.multiplyScalar(E.dot(V))).normalize(),T.crossVectors(O,V);const J=T.dot(u[I])<0?-1:1;c[4*I]=S.x,c[4*I+1]=S.y,c[4*I+2]=S.z,c[4*I+3]=J}for(let I=0,V=x.length;I<V;++I){const X=x[I],J=X.start;for(let j=J,Y=J+X.count;j<Y;j+=3)C(i[j+0]),C(i[j+1]),C(i[j+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new On(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let h=0,f=i.count;h<f;h++)i.setXYZ(h,0,0,0);const r=new R,s=new R,o=new R,a=new R,c=new R,l=new R,u=new R,d=new R;if(e)for(let h=0,f=e.count;h<f;h+=3){const p=e.getX(h+0),_=e.getX(h+1),m=e.getX(h+2);r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,_),o.fromBufferAttribute(t,m),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),a.fromBufferAttribute(i,p),c.fromBufferAttribute(i,_),l.fromBufferAttribute(i,m),a.add(u),c.add(u),l.add(u),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(_,c.x,c.y,c.z),i.setXYZ(m,l.x,l.y,l.z)}else for(let h=0,f=t.count;h<f;h+=3)r.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)pi.fromBufferAttribute(e,t),pi.normalize(),e.setXYZ(t,pi.x,pi.y,pi.z)}toNonIndexed(){function e(a,c){const l=a.array,u=a.itemSize,d=a.normalized,h=new l.constructor(c.length*u);let f=0,p=0;for(let _=0,m=c.length;_<m;_++){f=a.isInterleavedBufferAttribute?c[_]*a.data.stride+a.offset:c[_]*u;for(let g=0;g<u;g++)h[p++]=l[f++]}return new On(h,u,d)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new It,i=this.index.array,r=this.attributes;for(const a in r){const l=e(r[a],i);t.setAttribute(a,l)}const s=this.morphAttributes;for(const a in s){const c=[],l=s[a];for(let u=0,d=l.length;u<d;u++){const f=e(l[u],i);c.push(f)}t.morphAttributes[a]=c}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,c=o.length;a<c;a++){const l=o[a];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const c=this.parameters;for(const l in c)void 0!==c[l]&&(e[l]=c[l]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const c in i)e.data.attributes[c]=i[c].toJSON(e.data);const r={};let s=!1;for(const c in this.morphAttributes){const l=this.morphAttributes[c],u=[];for(let d=0,h=l.length;d<h;d++)u.push(l[d].toJSON(e.data));u.length>0&&(r[c]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const r=e.attributes;for(const l in r)this.setAttribute(l,r[l].clone(t));const s=e.morphAttributes;for(const l in s){const u=[],d=s[l];for(let h=0,f=d.length;h<f;h++)u.push(d[h].clone(t));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,u=o.length;l<u;l++){const d=o[l];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const c=e.boundingSphere;return null!==c&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const zO=new ht,$a=new eu,nm=new hs,GO=new R,ou=new R,au=new R,cu=new R,_1=new R,im=new R,rm=new ie,sm=new ie,om=new ie,jO=new R,WO=new R,$O=new R,am=new R,cm=new R;class Ci extends hi{constructor(e=new It,t=new fi){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(i.attributes.position,e);const a=this.morphTargetInfluences;if(s&&a){im.set(0,0,0);for(let c=0,l=s.length;c<l;c++){const u=a[c];0!==u&&(_1.fromBufferAttribute(s[c],e),im.addScaledVector(o?_1:_1.sub(t),u))}t.add(im)}return t}raycast(e,t){const i=this.geometry,s=this.matrixWorld;void 0!==this.material&&(null===i.boundingSphere&&i.computeBoundingSphere(),nm.copy(i.boundingSphere),nm.applyMatrix4(s),$a.copy(e.ray).recast(e.near),(!1!==nm.containsPoint($a.origin)||!(null===$a.intersectSphere(nm,GO)||$a.origin.distanceToSquared(GO)>(e.far-e.near)**2))&&(zO.copy(s).invert(),$a.copy(e.ray).applyMatrix4(zO),(null===i.boundingBox||!1!==$a.intersectsBox(i.boundingBox))&&this._computeIntersections(e,t,$a)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,c=s.attributes.position,l=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,h=s.groups,f=s.drawRange;if(null!==a)if(Array.isArray(o))for(let p=0,_=h.length;p<_;p++){const m=h[p],g=o[m.materialIndex];for(let x=Math.max(m.start,f.start),S=Math.min(a.count,Math.min(m.start+m.count,f.start+f.count));x<S;x+=3)r=lm(this,g,e,i,l,u,d,a.getX(x),a.getX(x+1),a.getX(x+2)),r&&(r.faceIndex=Math.floor(x/3),r.face.materialIndex=m.materialIndex,t.push(r))}else for(let m=Math.max(0,f.start),g=Math.min(a.count,f.start+f.count);m<g;m+=3)r=lm(this,o,e,i,l,u,d,a.getX(m),a.getX(m+1),a.getX(m+2)),r&&(r.faceIndex=Math.floor(m/3),t.push(r));else if(void 0!==c)if(Array.isArray(o))for(let p=0,_=h.length;p<_;p++){const m=h[p],g=o[m.materialIndex];for(let x=Math.max(m.start,f.start),S=Math.min(c.count,Math.min(m.start+m.count,f.start+f.count));x<S;x+=3)r=lm(this,g,e,i,l,u,d,x,x+1,x+2),r&&(r.faceIndex=Math.floor(x/3),r.face.materialIndex=m.materialIndex,t.push(r))}else for(let m=Math.max(0,f.start),g=Math.min(c.count,f.start+f.count);m<g;m+=3)r=lm(this,o,e,i,l,u,d,m,m+1,m+2),r&&(r.faceIndex=Math.floor(m/3),t.push(r))}}function lm(n,e,t,i,r,s,o,a,c,l){n.getVertexPosition(a,ou),n.getVertexPosition(c,au),n.getVertexPosition(l,cu);const u=function E$(n,e,t,i,r,s,o,a){let c;if(c=1===e.side?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,0===e.side,a),null===c)return null;cm.copy(a),cm.applyMatrix4(n.matrixWorld);const l=t.ray.origin.distanceTo(cm);return l<t.near||l>t.far?null:{distance:l,point:cm.clone(),object:n}}(n,e,t,i,ou,au,cu,am);if(u){r&&(rm.fromBufferAttribute(r,a),sm.fromBufferAttribute(r,c),om.fromBufferAttribute(r,l),u.uv=Cr.getInterpolation(am,ou,au,cu,rm,sm,om,new ie)),s&&(rm.fromBufferAttribute(s,a),sm.fromBufferAttribute(s,c),om.fromBufferAttribute(s,l),u.uv1=Cr.getInterpolation(am,ou,au,cu,rm,sm,om,new ie),u.uv2=u.uv1),o&&(jO.fromBufferAttribute(o,a),WO.fromBufferAttribute(o,c),$O.fromBufferAttribute(o,l),u.normal=Cr.getInterpolation(am,ou,au,cu,jO,WO,$O,new R),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const d={a,b:c,c:l,normal:new R,materialIndex:0};Cr.getNormal(ou,au,cu,d.normal),u.face=d}return u}class qa extends It{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const c=[],l=[],u=[],d=[];let h=0,f=0;function p(_,m,g,b,w,x,S,T,E,O,C){const I=x/E,V=S/O,X=x/2,J=S/2,k=T/2,j=E+1,Y=O+1;let Z=0,ge=0;const Q=new R;for(let se=0;se<Y;se++){const H=se*V-J;for(let ee=0;ee<j;ee++)Q[_]=(ee*I-X)*b,Q[m]=H*w,Q[g]=k,l.push(Q.x,Q.y,Q.z),Q[_]=0,Q[m]=0,Q[g]=T>0?1:-1,u.push(Q.x,Q.y,Q.z),d.push(ee/E),d.push(1-se/O),Z+=1}for(let se=0;se<O;se++)for(let H=0;H<E;H++){const ye=h+H+j*(se+1),Me=h+(H+1)+j*(se+1),xe=h+(H+1)+j*se;c.push(h+H+j*se,ye,xe),c.push(ye,Me,xe),ge+=6}a.addGroup(f,ge,C),f+=ge,h+=Z}p("z","y","x",-1,-1,i,t,e,o,s,0),p("z","y","x",1,-1,i,t,-e,o,s,1),p("x","z","y",1,1,e,i,t,r,o,2),p("x","z","y",1,-1,e,i,-t,r,o,3),p("x","y","z",1,-1,e,t,i,r,s,4),p("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(c),this.setAttribute("position",new Xe(l,3)),this.setAttribute("normal",new Xe(u,3)),this.setAttribute("uv",new Xe(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qa(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function lu(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():e[t][i]=Array.isArray(r)?r.slice():r}}return e}function Wi(n){const e={};for(let t=0;t<n.length;t++){const i=lu(n[t]);for(const r in i)e[r]=i[r]}return e}function qO(n){return null===n.getRenderTarget()?n.outputColorSpace:Jt.workingColorSpace}const D$={clone:lu,merge:Wi};class ta extends gs{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=lu(e.uniforms),this.uniformsGroups=function T$(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;t.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)!0===this.extensions[r]&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class v1 extends hi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ht,this.projectionMatrix=new ht,this.projectionMatrixInverse=new ht,this.coordinateSystem=lo}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class gi extends v1{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Wl*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*za*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Wl*Math.atan(Math.tan(.5*za*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*za*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const c=o.fullWidth,l=o.fullHeight;s+=o.offsetX*r/c,t-=o.offsetY*i/l,r*=o.width/c,i*=o.height/l}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class R$ extends hi{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new gi(-90,1,e,t);r.layers=this.layers,this.add(r);const s=new gi(-90,1,e,t);s.layers=this.layers,this.add(s);const o=new gi(-90,1,e,t);o.layers=this.layers,this.add(o);const a=new gi(-90,1,e,t);a.layers=this.layers,this.add(a);const c=new gi(-90,1,e,t);c.layers=this.layers,this.add(c);const l=new gi(-90,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,c]=t;for(const l of t)this.remove(l);if(e===lo)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else{if(2001!==e)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1)}for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,c,l,u]=this.children,d=e.getRenderTarget(),h=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const _=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,c),e.setRenderTarget(i,4,r),e.render(t,l),i.texture.generateMipmaps=_,e.setRenderTarget(i,5,r),e.render(t,u),e.setRenderTarget(d,h,f),e.xr.enabled=p,i.texture.needsPMREMUpdate=!0}}class um extends us{constructor(e,t,i,r,s,o,a,c,l,u){super(e=void 0!==e?e:[],t=void 0!==t?t:$o,i,r,s,o,a,c,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class O$ extends Ga{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];void 0!==t.encoding&&(Mh("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Va?Cn:""),this.texture=new um(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:In}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new qa(5,5,5),s=new ta({name:"CubemapFromEquirect",uniforms:lu(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=t;const o=new Ci(r,s),a=t.minFilter;return t.minFilter===ao&&(t.minFilter=In),new R$(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const y1=new R,P$=new R,N$=new Dt;class na{constructor(e=new R(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=y1.subVectors(i,t).cross(P$.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(y1),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||N$.getNormalMatrix(e),r=this.coplanarPoint(y1).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Ya=new hs,dm=new R;class b1{constructor(e=new na,t=new na,i=new na,r=new na,s=new na,o=new na){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=lo){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],c=r[3],l=r[4],u=r[5],d=r[6],h=r[7],f=r[8],p=r[9],_=r[10],m=r[11],g=r[12],b=r[13],w=r[14],x=r[15];if(i[0].setComponents(c-s,h-l,m-f,x-g).normalize(),i[1].setComponents(c+s,h+l,m+f,x+g).normalize(),i[2].setComponents(c+o,h+u,m+p,x+b).normalize(),i[3].setComponents(c-o,h-u,m-p,x-b).normalize(),i[4].setComponents(c-a,h-d,m-_,x-w).normalize(),t===lo)i[5].setComponents(c+a,h+d,m+_,x+w).normalize();else{if(2001!==t)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);i[5].setComponents(a,d,_,w).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),Ya.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),Ya.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ya)}intersectsSprite(e){return Ya.center.set(0,0,0),Ya.radius=.7071067811865476,Ya.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ya)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(dm.x=r.normal.x>0?e.max.x:e.min.x,dm.y=r.normal.y>0?e.max.y:e.min.y,dm.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(dm)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function YO(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function F$(n,e){const t=e.isWebGL2,i=new WeakMap;return{get:function o(l){return l.isInterleavedBufferAttribute&&(l=l.data),i.get(l)},remove:function a(l){l.isInterleavedBufferAttribute&&(l=l.data);const u=i.get(l);u&&(n.deleteBuffer(u.buffer),i.delete(l))},update:function c(l,u){if(l.isGLBufferAttribute){const h=i.get(l);return void((!h||h.version<l.version)&&i.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version}))}l.isInterleavedBufferAttribute&&(l=l.data);const d=i.get(l);void 0===d?i.set(l,function r(l,u){const d=l.array,h=l.usage,f=n.createBuffer();let p;if(n.bindBuffer(u,f),n.bufferData(u,d,h),l.onUploadCallback(),d instanceof Float32Array)p=n.FLOAT;else if(d instanceof Uint16Array)if(l.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");p=n.HALF_FLOAT}else p=n.UNSIGNED_SHORT;else if(d instanceof Int16Array)p=n.SHORT;else if(d instanceof Uint32Array)p=n.UNSIGNED_INT;else if(d instanceof Int32Array)p=n.INT;else if(d instanceof Int8Array)p=n.BYTE;else if(d instanceof Uint8Array)p=n.UNSIGNED_BYTE;else{if(!(d instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);p=n.UNSIGNED_BYTE}return{buffer:f,type:p,bytesPerElement:d.BYTES_PER_ELEMENT,version:l.version}}(l,u)):d.version<l.version&&(function s(l,u,d){const h=u.array,f=u.updateRange;n.bindBuffer(d,l),-1===f.count?n.bufferSubData(d,0,h):(t?n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1),u.onUploadCallback()}(d.buffer,l,u),d.version=l.version)}}}class hm extends It{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),c=Math.floor(r),l=a+1,u=c+1,d=e/a,h=t/c,f=[],p=[],_=[],m=[];for(let g=0;g<u;g++){const b=g*h-o;for(let w=0;w<l;w++)p.push(w*d-s,-b,0),_.push(0,0,1),m.push(w/a),m.push(1-g/c)}for(let g=0;g<c;g++)for(let b=0;b<a;b++){const x=b+l*(g+1),S=b+1+l*(g+1),T=b+1+l*g;f.push(b+l*g,x,T),f.push(x,S,T)}this.setIndex(f),this.setAttribute("position",new Xe(p,3)),this.setAttribute("normal",new Xe(_,3)),this.setAttribute("uv",new Xe(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hm(e.width,e.height,e.widthSegments,e.heightSegments)}}const Ct={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tanisotropyV /= material.anisotropy;\n\tmaterial.anisotropy = saturate( material.anisotropy );\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal;\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},Re={common:{diffuse:{value:new Ne(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Dt},alphaMap:{value:null},alphaMapTransform:{value:new Dt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Dt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Dt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Dt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Dt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Dt},normalScale:{value:new ie(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Dt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Dt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Dt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Dt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ne(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ne(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Dt},alphaTest:{value:0},uvTransform:{value:new Dt}},sprite:{diffuse:{value:new Ne(16777215)},opacity:{value:1},center:{value:new ie(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Dt},alphaMap:{value:null},alphaMapTransform:{value:new Dt},alphaTest:{value:0}}},Ns={basic:{uniforms:Wi([Re.common,Re.specularmap,Re.envmap,Re.aomap,Re.lightmap,Re.fog]),vertexShader:Ct.meshbasic_vert,fragmentShader:Ct.meshbasic_frag},lambert:{uniforms:Wi([Re.common,Re.specularmap,Re.envmap,Re.aomap,Re.lightmap,Re.emissivemap,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.fog,Re.lights,{emissive:{value:new Ne(0)}}]),vertexShader:Ct.meshlambert_vert,fragmentShader:Ct.meshlambert_frag},phong:{uniforms:Wi([Re.common,Re.specularmap,Re.envmap,Re.aomap,Re.lightmap,Re.emissivemap,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.fog,Re.lights,{emissive:{value:new Ne(0)},specular:{value:new Ne(1118481)},shininess:{value:30}}]),vertexShader:Ct.meshphong_vert,fragmentShader:Ct.meshphong_frag},standard:{uniforms:Wi([Re.common,Re.envmap,Re.aomap,Re.lightmap,Re.emissivemap,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.roughnessmap,Re.metalnessmap,Re.fog,Re.lights,{emissive:{value:new Ne(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ct.meshphysical_vert,fragmentShader:Ct.meshphysical_frag},toon:{uniforms:Wi([Re.common,Re.aomap,Re.lightmap,Re.emissivemap,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.gradientmap,Re.fog,Re.lights,{emissive:{value:new Ne(0)}}]),vertexShader:Ct.meshtoon_vert,fragmentShader:Ct.meshtoon_frag},matcap:{uniforms:Wi([Re.common,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.fog,{matcap:{value:null}}]),vertexShader:Ct.meshmatcap_vert,fragmentShader:Ct.meshmatcap_frag},points:{uniforms:Wi([Re.points,Re.fog]),vertexShader:Ct.points_vert,fragmentShader:Ct.points_frag},dashed:{uniforms:Wi([Re.common,Re.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ct.linedashed_vert,fragmentShader:Ct.linedashed_frag},depth:{uniforms:Wi([Re.common,Re.displacementmap]),vertexShader:Ct.depth_vert,fragmentShader:Ct.depth_frag},normal:{uniforms:Wi([Re.common,Re.bumpmap,Re.normalmap,Re.displacementmap,{opacity:{value:1}}]),vertexShader:Ct.meshnormal_vert,fragmentShader:Ct.meshnormal_frag},sprite:{uniforms:Wi([Re.sprite,Re.fog]),vertexShader:Ct.sprite_vert,fragmentShader:Ct.sprite_frag},background:{uniforms:{uvTransform:{value:new Dt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ct.background_vert,fragmentShader:Ct.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Ct.backgroundCube_vert,fragmentShader:Ct.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ct.cube_vert,fragmentShader:Ct.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ct.equirect_vert,fragmentShader:Ct.equirect_frag},distanceRGBA:{uniforms:Wi([Re.common,Re.displacementmap,{referencePosition:{value:new R},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ct.distanceRGBA_vert,fragmentShader:Ct.distanceRGBA_frag},shadow:{uniforms:Wi([Re.lights,Re.fog,{color:{value:new Ne(0)},opacity:{value:1}}]),vertexShader:Ct.shadow_vert,fragmentShader:Ct.shadow_frag}};Ns.physical={uniforms:Wi([Ns.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Dt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Dt},clearcoatNormalScale:{value:new ie(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Dt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Dt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Dt},sheen:{value:0},sheenColor:{value:new Ne(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Dt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Dt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Dt},transmissionSamplerSize:{value:new ie},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Dt},attenuationDistance:{value:0},attenuationColor:{value:new Ne(0)},specularColor:{value:new Ne(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Dt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Dt},anisotropyVector:{value:new ie},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Dt}}]),vertexShader:Ct.meshphysical_vert,fragmentShader:Ct.meshphysical_frag};const fm={r:0,b:0,g:0};function PY(n,e,t,i,r,s,o){const a=new Ne(0);let l,u,c=!0===s?0:1,d=null,h=0,f=null;function _(m,g){m.getRGB(fm,qO(n)),i.buffers.color.setClear(fm.r,fm.g,fm.b,g,o)}return{getClearColor:function(){return a},setClearColor:function(m,g=1){a.set(m),c=g,_(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(m){c=m,_(a,c)},render:function p(m,g){let b=!1,w=!0===g.isScene?g.background:null;w&&w.isTexture&&(w=(g.backgroundBlurriness>0?t:e).get(w)),null===w?_(a,c):w&&w.isColor&&(_(w,1),b=!0);const x=n.xr.getEnvironmentBlendMode();"additive"===x?i.buffers.color.setClear(0,0,0,1,o):"alpha-blend"===x&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||b)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),w&&(w.isCubeTexture||w.mapping===mh)?(void 0===u&&(u=new Ci(new qa(1,1,1),new ta({name:"BackgroundCubeMaterial",uniforms:lu(Ns.backgroundCube.uniforms),vertexShader:Ns.backgroundCube.vertexShader,fragmentShader:Ns.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(S,T,E){this.matrixWorld.copyPosition(E.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),u.material.uniforms.envMap.value=w,u.material.uniforms.flipEnvMap.value=w.isCubeTexture&&!1===w.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,u.material.toneMapped=Jt.getTransfer(w.colorSpace)!==_n,(d!==w||h!==w.version||f!==n.toneMapping)&&(u.material.needsUpdate=!0,d=w,h=w.version,f=n.toneMapping),u.layers.enableAll(),m.unshift(u,u.geometry,u.material,0,0,null)):w&&w.isTexture&&(void 0===l&&(l=new Ci(new hm(2,2),new ta({name:"BackgroundMaterial",uniforms:lu(Ns.background.uniforms),vertexShader:Ns.background.vertexShader,fragmentShader:Ns.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=w,l.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,l.material.toneMapped=Jt.getTransfer(w.colorSpace)!==_n,!0===w.matrixAutoUpdate&&w.updateMatrix(),l.material.uniforms.uvTransform.value.copy(w.matrix),(d!==w||h!==w.version||f!==n.toneMapping)&&(l.material.needsUpdate=!0,d=w,h=w.version,f=n.toneMapping),l.layers.enableAll(),m.unshift(l,l.geometry,l.material,0,0,null))}}}function NY(n,e,t,i){const r=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||null!==s,a={},c=m(null);let l=c,u=!1;function f(k){return i.isWebGL2?n.bindVertexArray(k):s.bindVertexArrayOES(k)}function p(k){return i.isWebGL2?n.deleteVertexArray(k):s.deleteVertexArrayOES(k)}function m(k){const j=[],Y=[],Z=[];for(let ge=0;ge<r;ge++)j[ge]=0,Y[ge]=0,Z[ge]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:j,enabledAttributes:Y,attributeDivisors:Z,object:k,attributes:{},index:null}}function w(){const k=l.newAttributes;for(let j=0,Y=k.length;j<Y;j++)k[j]=0}function x(k){S(k,0)}function S(k,j){const Z=l.enabledAttributes,ge=l.attributeDivisors;l.newAttributes[k]=1,0===Z[k]&&(n.enableVertexAttribArray(k),Z[k]=1),ge[k]!==j&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](k,j),ge[k]=j)}function T(){const k=l.newAttributes,j=l.enabledAttributes;for(let Y=0,Z=j.length;Y<Z;Y++)j[Y]!==k[Y]&&(n.disableVertexAttribArray(Y),j[Y]=0)}function E(k,j,Y,Z,ge,Q,se){!0===se?n.vertexAttribIPointer(k,j,Y,ge,Q):n.vertexAttribPointer(k,j,Y,Z,ge,Q)}function X(){J(),u=!0,l!==c&&(l=c,f(l.object))}function J(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:function d(k,j,Y,Z,ge){let Q=!1;if(o){const se=function _(k,j,Y){const Z=!0===Y.wireframe;let ge=a[k.id];void 0===ge&&(ge={},a[k.id]=ge);let Q=ge[j.id];void 0===Q&&(Q={},ge[j.id]=Q);let se=Q[Z];return void 0===se&&(se=m(function h(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}()),Q[Z]=se),se}(Z,Y,j);l!==se&&(l=se,f(l.object)),Q=function g(k,j,Y,Z){const ge=l.attributes,Q=j.attributes;let se=0;const H=Y.getAttributes();for(const ee in H)if(H[ee].location>=0){const Me=ge[ee];let xe=Q[ee];if(void 0===xe&&("instanceMatrix"===ee&&k.instanceMatrix&&(xe=k.instanceMatrix),"instanceColor"===ee&&k.instanceColor&&(xe=k.instanceColor)),void 0===Me||Me.attribute!==xe||xe&&Me.data!==xe.data)return!0;se++}return l.attributesNum!==se||l.index!==Z}(k,Z,Y,ge),Q&&function b(k,j,Y,Z){const ge={},Q=j.attributes;let se=0;const H=Y.getAttributes();for(const ee in H)if(H[ee].location>=0){let Me=Q[ee];void 0===Me&&("instanceMatrix"===ee&&k.instanceMatrix&&(Me=k.instanceMatrix),"instanceColor"===ee&&k.instanceColor&&(Me=k.instanceColor));const xe={};xe.attribute=Me,Me&&Me.data&&(xe.data=Me.data),ge[ee]=xe,se++}l.attributes=ge,l.attributesNum=se,l.index=Z}(k,Z,Y,ge)}else{const se=!0===j.wireframe;(l.geometry!==Z.id||l.program!==Y.id||l.wireframe!==se)&&(l.geometry=Z.id,l.program=Y.id,l.wireframe=se,Q=!0)}null!==ge&&t.update(ge,n.ELEMENT_ARRAY_BUFFER),(Q||u)&&(u=!1,function O(k,j,Y,Z){if(!1===i.isWebGL2&&(k.isInstancedMesh||Z.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;w();const ge=Z.attributes,Q=Y.getAttributes(),se=j.defaultAttributeValues;for(const H in Q){const ee=Q[H];if(ee.location>=0){let ye=ge[H];if(void 0===ye&&("instanceMatrix"===H&&k.instanceMatrix&&(ye=k.instanceMatrix),"instanceColor"===H&&k.instanceColor&&(ye=k.instanceColor)),void 0!==ye){const Me=ye.normalized,xe=ye.itemSize,He=t.get(ye);if(void 0===He)continue;const Ge=He.buffer,Be=He.type,wt=He.bytesPerElement,At=!0===i.isWebGL2&&(Be===n.INT||Be===n.UNSIGNED_INT||1013===ye.gpuType);if(ye.isInterleavedBufferAttribute){const Ye=ye.data,D=Ye.stride,me=ye.offset;if(Ye.isInstancedInterleavedBuffer){for(let re=0;re<ee.locationSize;re++)S(ee.location+re,Ye.meshPerAttribute);!0!==k.isInstancedMesh&&void 0===Z._maxInstanceCount&&(Z._maxInstanceCount=Ye.meshPerAttribute*Ye.count)}else for(let re=0;re<ee.locationSize;re++)x(ee.location+re);n.bindBuffer(n.ARRAY_BUFFER,Ge);for(let re=0;re<ee.locationSize;re++)E(ee.location+re,xe/ee.locationSize,Be,Me,D*wt,(me+xe/ee.locationSize*re)*wt,At)}else{if(ye.isInstancedBufferAttribute){for(let Ye=0;Ye<ee.locationSize;Ye++)S(ee.location+Ye,ye.meshPerAttribute);!0!==k.isInstancedMesh&&void 0===Z._maxInstanceCount&&(Z._maxInstanceCount=ye.meshPerAttribute*ye.count)}else for(let Ye=0;Ye<ee.locationSize;Ye++)x(ee.location+Ye);n.bindBuffer(n.ARRAY_BUFFER,Ge);for(let Ye=0;Ye<ee.locationSize;Ye++)E(ee.location+Ye,xe/ee.locationSize,Be,Me,xe*wt,xe/ee.locationSize*Ye*wt,At)}}else if(void 0!==se){const Me=se[H];if(void 0!==Me)switch(Me.length){case 2:n.vertexAttrib2fv(ee.location,Me);break;case 3:n.vertexAttrib3fv(ee.location,Me);break;case 4:n.vertexAttrib4fv(ee.location,Me);break;default:n.vertexAttrib1fv(ee.location,Me)}}}}T()}(k,j,Y,Z),null!==ge&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(ge).buffer))},reset:X,resetDefaultState:J,dispose:function C(){X();for(const k in a){const j=a[k];for(const Y in j){const Z=j[Y];for(const ge in Z)p(Z[ge].object),delete Z[ge];delete j[Y]}delete a[k]}},releaseStatesOfGeometry:function I(k){if(void 0===a[k.id])return;const j=a[k.id];for(const Y in j){const Z=j[Y];for(const ge in Z)p(Z[ge].object),delete Z[ge];delete j[Y]}delete a[k.id]},releaseStatesOfProgram:function V(k){for(const j in a){const Y=a[j];if(void 0===Y[k.id])continue;const Z=Y[k.id];for(const ge in Z)p(Z[ge].object),delete Z[ge];delete Y[k.id]}},initAttributes:w,enableAttribute:x,disableUnusedAttributes:T}}function FY(n,e,t,i){const r=i.isWebGL2;let s;this.setMode=function o(l){s=l},this.render=function a(l,u){n.drawArrays(s,l,u),t.update(u,s,1)},this.renderInstances=function c(l,u,d){if(0===d)return;let h,f;if(r)h=n,f="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",null===h)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[f](s,l,u,d),t.update(u,s,d)}}function LY(n,e,t){let i;function s(E){if("highp"===E){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";E="mediump"}return"mediump"===E&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&"WebGL2RenderingContext"===n.constructor.name;let a=void 0!==t.precision?t.precision:"highp";const c=s(a);c!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",c,"instead."),a=c);const l=o||e.has("WEBGL_draw_buffers"),u=!0===t.logarithmicDepthBuffer,d=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),h=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f=n.getParameter(n.MAX_TEXTURE_SIZE),p=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),_=n.getParameter(n.MAX_VERTEX_ATTRIBS),m=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),g=n.getParameter(n.MAX_VARYING_VECTORS),b=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),w=h>0,x=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:function r(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const E=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(E.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:p,maxAttributes:_,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:b,vertexTextures:w,floatFragmentTextures:x,floatVertexTextures:w&&x,maxSamples:o?n.getParameter(n.MAX_SAMPLES):0}}function kY(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new na,a=new Dt,c={value:null,needsUpdate:!1};function u(d,h,f,p){const _=null!==d?d.length:0;let m=null;if(0!==_){if(m=c.value,!0!==p||null===m){const g=f+4*_,b=h.matrixWorldInverse;a.getNormalMatrix(b),(null===m||m.length<g)&&(m=new Float32Array(g));for(let w=0,x=f;w!==_;++w,x+=4)o.copy(d[w]).applyMatrix4(b,a),o.normal.toArray(m,x),m[x+3]=o.constant}c.value=m,c.needsUpdate=!0}return e.numPlanes=_,e.numIntersection=0,m}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h){const f=0!==d.length||h||0!==i||r;return r=h,i=d.length,f},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,h){t=u(d,h,0)},this.setState=function(d,h,f){const p=d.clippingPlanes,_=d.clipIntersection,m=d.clipShadows,g=n.get(d);if(!r||null===p||0===p.length||s&&!m)s?u(null):function l(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}();else{const b=s?0:i,w=4*b;let x=g.clippingState||null;c.value=x,x=u(p,h,w,f);for(let S=0;S!==w;++S)x[S]=t[S];g.clippingState=x,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=b}}}function BY(n){let e=new WeakMap;function t(o,a){return 303===a?o.mapping=$o:304===a&&(o.mapping=La),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const c=e.get(a);void 0!==c&&(e.delete(a),c.dispose())}return{get:function i(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const a=o.mapping;if(303===a||304===a){if(e.has(o))return t(e.get(o).texture,o.mapping);{const c=o.image;if(c&&c.height>0){const l=new O$(c.height/2);return l.fromEquirectangularTexture(n,o),e.set(o,l),o.addEventListener("dispose",r),t(l.texture,o.mapping)}return null}}}return o},dispose:function s(){e=new WeakMap}}}class pm extends v1{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,c=r-t;if(null!==this.view&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=l*this.view.offsetX,o=s+l*this.view.width,a-=u*this.view.offsetY,c=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const XO=[.125,.215,.35,.446,.526,.582],w1=new pm,JO=new Ne;let x1=null;const Ja=(1+Math.sqrt(5))/2,fu=1/Ja,ZO=[new R(1,1,1),new R(-1,1,1),new R(1,1,-1),new R(-1,1,-1),new R(0,Ja,fu),new R(0,Ja,-fu),new R(fu,0,Ja),new R(-fu,0,Ja),new R(Ja,fu,0),new R(-Ja,fu,0)];class KO{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){x1=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=tP(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=eP(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(x1),e.scissorTest=!1,gm(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(e.mapping===$o||e.mapping===La?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),x1=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:In,minFilter:In,generateMipmaps:!1,type:yh,format:Gr,colorSpace:Mi,depthBuffer:!1},r=QO(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=QO(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function UY(n){const e=[],t=[],i=[];let r=n;const s=n-4+1+XO.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let c=1/a;o>n-4?c=XO[o-n+4-1]:0===o&&(c=0),i.push(c);const l=1/(a-2),u=-l,d=1+l,h=[u,u,d,u,d,d,u,u,d,d,u,d],f=6,p=6,_=3,m=2,g=1,b=new Float32Array(_*p*f),w=new Float32Array(m*p*f),x=new Float32Array(g*p*f);for(let T=0;T<f;T++){const E=T%3*2/3-1,O=T>2?0:-1;b.set([E,O,0,E+2/3,O,0,E+2/3,O+1,0,E,O,0,E+2/3,O+1,0,E,O+1,0],_*p*T),w.set(h,m*p*T),x.set([T,T,T,T,T,T],g*p*T)}const S=new It;S.setAttribute("position",new On(b,_)),S.setAttribute("uv",new On(w,m)),S.setAttribute("faceIndex",new On(x,g)),e.push(S),r>4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}(s)),this._blurMaterial=function VY(n,e,t){const i=new Float32Array(20),r=new R(0,1,0);return new ta({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,e,t)}return r}_compileMaterial(e){const t=new Ci(this._lodPlanes[0],e);this._renderer.compile(t,w1)}_sceneToCubeUV(e,t,i,r){const a=new gi(90,1,t,i),c=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,h=u.toneMapping;u.getClearColor(JO),u.toneMapping=Wo,u.autoClear=!1;const f=new fi({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),p=new Ci(new qa,f);let _=!1;const m=e.background;m?m.isColor&&(f.color.copy(m),e.background=null,_=!0):(f.color.copy(JO),_=!0);for(let g=0;g<6;g++){const b=g%3;0===b?(a.up.set(0,c[g],0),a.lookAt(l[g],0,0)):1===b?(a.up.set(0,0,c[g]),a.lookAt(0,l[g],0)):(a.up.set(0,c[g],0),a.lookAt(0,0,l[g]));const w=this._cubeSize;gm(r,b*w,g>2?w:0,w,w),u.setRenderTarget(r),_&&u.render(p,a),u.render(e,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=h,u.autoClear=d,e.background=m}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===$o||e.mapping===La;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=tP()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=eP());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Ci(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const c=this._cubeSize;gm(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(o,w1)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(e,r-1,r,s,ZO[(r-1)%ZO.length])}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const c=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const d=new Ci(this._lodPlanes[r],l),h=l.uniforms,f=this._sizeLods[i]-1,p=isFinite(s)?Math.PI/(2*f):2*Math.PI/39,_=s/p,m=isFinite(s)?1+Math.floor(3*_):20;m>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${m} samples when the maximum is set to 20`);const g=[];let b=0;for(let E=0;E<20;++E){const O=E/_,C=Math.exp(-O*O/2);g.push(C),0===E?b+=C:E<m&&(b+=2*C)}for(let E=0;E<g.length;E++)g[E]=g[E]/b;h.envMap.value=e.texture,h.samples.value=m,h.weights.value=g,h.latitudinal.value="latitudinal"===o,a&&(h.poleAxis.value=a);const{_lodMax:w}=this;h.dTheta.value=p,h.mipInt.value=w-i;const x=this._sizeLods[r];gm(t,3*x*(r>w-4?r-w+4:0),4*(this._cubeSize-x),3*x,2*x),c.setRenderTarget(t),c.render(d,w1)}}function QO(n,e,t){const i=new Ga(n,e,t);return i.texture.mapping=mh,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function gm(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function eP(){return new ta({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function tP(){return new ta({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function HY(n){let e=new WeakMap,t=null;function s(a){const c=a.target;c.removeEventListener("dispose",s);const l=e.get(c);void 0!==l&&(e.delete(c),l.dispose())}return{get:function i(a){if(a&&a.isTexture){const c=a.mapping,l=303===c||304===c,u=c===$o||c===La;if(l||u){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let d=e.get(a);return null===t&&(t=new KO(n)),d=l?t.fromEquirectangular(a,d):t.fromCubemap(a,d),e.set(a,d),d.texture}if(e.has(a))return e.get(a).texture;{const d=a.image;if(l&&d&&d.height>0||u&&d&&function r(a){let c=0;for(let u=0;u<6;u++)void 0!==a[u]&&c++;return 6===c}(d)){null===t&&(t=new KO(n));const h=l?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,h),a.addEventListener("dispose",s),h.texture}return null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function zY(n){const e={};function t(i){if(void 0!==e[i])return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return null!==t(i)},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return null===r&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function GY(n,e,t,i){const r={},s=new WeakMap;function o(d){const h=d.target;null!==h.index&&e.remove(h.index);for(const p in h.attributes)e.remove(h.attributes[p]);for(const p in h.morphAttributes){const _=h.morphAttributes[p];for(let m=0,g=_.length;m<g;m++)e.remove(_[m])}h.removeEventListener("dispose",o),delete r[h.id];const f=s.get(h);f&&(e.remove(f),s.delete(h)),i.releaseStatesOfGeometry(h),!0===h.isInstancedBufferGeometry&&delete h._maxInstanceCount,t.memory.geometries--}function l(d){const h=[],f=d.index,p=d.attributes.position;let _=0;if(null!==f){const b=f.array;_=f.version;for(let w=0,x=b.length;w<x;w+=3){const S=b[w+0],T=b[w+1],E=b[w+2];h.push(S,T,T,E,E,S)}}else{if(void 0===p)return;_=p.version;for(let w=0,x=p.array.length/3-1;w<x;w+=3){const S=w+0,T=w+1,E=w+2;h.push(S,T,T,E,E,S)}}const m=new(CO(h)?HO:VO)(h,1);m.version=_;const g=s.get(d);g&&e.remove(g),s.set(d,m)}return{get:function a(d,h){return!0===r[h.id]||(h.addEventListener("dispose",o),r[h.id]=!0,t.memory.geometries++),h},update:function c(d){const h=d.attributes;for(const p in h)e.update(h[p],n.ARRAY_BUFFER);const f=d.morphAttributes;for(const p in f){const _=f[p];for(let m=0,g=_.length;m<g;m++)e.update(_[m],n.ARRAY_BUFFER)}},getWireframeAttribute:function u(d){const h=s.get(d);if(h){const f=d.index;null!==f&&h.version<f.version&&l(d)}else l(d);return s.get(d)}}}function jY(n,e,t,i){const r=i.isWebGL2;let s,a,c;this.setMode=function o(h){s=h},this.setIndex=function l(h){a=h.type,c=h.bytesPerElement},this.render=function u(h,f){n.drawElements(s,f,a,h*c),t.update(f,s,1)},this.renderInstances=function d(h,f,p){if(0===p)return;let _,m;if(r)_=n,m="drawElementsInstanced";else if(_=e.get("ANGLE_instanced_arrays"),m="drawElementsInstancedANGLE",null===_)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");_[m](s,f,a,h*c,p),t.update(f,s,p)}}function WY(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function $Y(n,e){return n[0]-e[0]}function qY(n,e){return Math.abs(e[1])-Math.abs(n[1])}function YY(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new on,a=[];for(let l=0;l<8;l++)a[l]=[l,0];return{update:function c(l,u,d){const h=l.morphTargetInfluences;if(!0===e.isWebGL2){const f=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,p=void 0!==f?f.length:0;let _=s.get(u);if(void 0===_||_.count!==p){let k=function(){X.dispose(),s.delete(u),u.removeEventListener("dispose",k)};void 0!==_&&_.texture.dispose();const b=void 0!==u.morphAttributes.position,w=void 0!==u.morphAttributes.normal,x=void 0!==u.morphAttributes.color,S=u.morphAttributes.position||[],T=u.morphAttributes.normal||[],E=u.morphAttributes.color||[];let O=0;!0===b&&(O=1),!0===w&&(O=2),!0===x&&(O=3);let C=u.attributes.position.count*O,I=1;C>e.maxTextureSize&&(I=Math.ceil(C/e.maxTextureSize),C=e.maxTextureSize);const V=new Float32Array(C*I*4*p),X=new i1(V,C,I,p);X.type=co,X.needsUpdate=!0;const J=4*O;for(let j=0;j<p;j++){const Y=S[j],Z=T[j],ge=E[j],Q=C*I*4*j;for(let se=0;se<Y.count;se++){const H=se*J;!0===b&&(o.fromBufferAttribute(Y,se),V[Q+H+0]=o.x,V[Q+H+1]=o.y,V[Q+H+2]=o.z,V[Q+H+3]=0),!0===w&&(o.fromBufferAttribute(Z,se),V[Q+H+4]=o.x,V[Q+H+5]=o.y,V[Q+H+6]=o.z,V[Q+H+7]=0),!0===x&&(o.fromBufferAttribute(ge,se),V[Q+H+8]=o.x,V[Q+H+9]=o.y,V[Q+H+10]=o.z,V[Q+H+11]=4===ge.itemSize?o.w:1)}}_={count:p,texture:X,size:new ie(C,I)},s.set(u,_),u.addEventListener("dispose",k)}let m=0;for(let b=0;b<h.length;b++)m+=h[b];const g=u.morphTargetsRelative?1:1-m;d.getUniforms().setValue(n,"morphTargetBaseInfluence",g),d.getUniforms().setValue(n,"morphTargetInfluences",h),d.getUniforms().setValue(n,"morphTargetsTexture",_.texture,t),d.getUniforms().setValue(n,"morphTargetsTextureSize",_.size)}else{const f=void 0===h?0:h.length;let p=i[u.id];if(void 0===p||p.length!==f){p=[];for(let w=0;w<f;w++)p[w]=[w,0];i[u.id]=p}for(let w=0;w<f;w++){const x=p[w];x[0]=w,x[1]=h[w]}p.sort(qY);for(let w=0;w<8;w++)w<f&&p[w][1]?(a[w][0]=p[w][0],a[w][1]=p[w][1]):(a[w][0]=Number.MAX_SAFE_INTEGER,a[w][1]=0);a.sort($Y);const _=u.morphAttributes.position,m=u.morphAttributes.normal;let g=0;for(let w=0;w<8;w++){const x=a[w],S=x[0],T=x[1];S!==Number.MAX_SAFE_INTEGER&&T?(_&&u.getAttribute("morphTarget"+w)!==_[S]&&u.setAttribute("morphTarget"+w,_[S]),m&&u.getAttribute("morphNormal"+w)!==m[S]&&u.setAttribute("morphNormal"+w,m[S]),r[w]=T,g+=T):(_&&!0===u.hasAttribute("morphTarget"+w)&&u.deleteAttribute("morphTarget"+w),m&&!0===u.hasAttribute("morphNormal"+w)&&u.deleteAttribute("morphNormal"+w),r[w]=0)}const b=u.morphTargetsRelative?1:1-g;d.getUniforms().setValue(n,"morphTargetBaseInfluence",b),d.getUniforms().setValue(n,"morphTargetInfluences",r)}}}}function XY(n,e,t,i){let r=new WeakMap;function a(c){const l=c.target;l.removeEventListener("dispose",a),t.remove(l.instanceMatrix),null!==l.instanceColor&&t.remove(l.instanceColor)}return{update:function s(c){const l=i.render.frame,d=e.get(c,c.geometry);if(r.get(d)!==l&&(e.update(d),r.set(d,l)),c.isInstancedMesh&&(!1===c.hasEventListener("dispose",a)&&c.addEventListener("dispose",a),r.get(c)!==l&&(t.update(c.instanceMatrix,n.ARRAY_BUFFER),null!==c.instanceColor&&t.update(c.instanceColor,n.ARRAY_BUFFER),r.set(c,l))),c.isSkinnedMesh){const h=c.skeleton;r.get(h)!==l&&(h.update(),r.set(h,l))}return d},dispose:function o(){r=new WeakMap}}}const nP=new us,iP=new i1,rP=new IO,sP=new um,oP=[],aP=[],cP=new Float32Array(16),lP=new Float32Array(9),uP=new Float32Array(4);function pu(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=oP[r];if(void 0===s&&(s=new Float32Array(r),oP[r]=s),0!==e){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function ii(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function ri(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function mm(n,e){let t=aP[e];void 0===t&&(t=new Int32Array(e),aP[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function JY(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function ZY(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ii(t,e))return;n.uniform2fv(this.addr,e),ri(t,e)}}function KY(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ii(t,e))return;n.uniform3fv(this.addr,e),ri(t,e)}}function QY(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ii(t,e))return;n.uniform4fv(this.addr,e),ri(t,e)}}function eX(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(ii(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ri(t,e)}else{if(ii(t,i))return;uP.set(i),n.uniformMatrix2fv(this.addr,!1,uP),ri(t,i)}}function tX(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(ii(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ri(t,e)}else{if(ii(t,i))return;lP.set(i),n.uniformMatrix3fv(this.addr,!1,lP),ri(t,i)}}function nX(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(ii(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ri(t,e)}else{if(ii(t,i))return;cP.set(i),n.uniformMatrix4fv(this.addr,!1,cP),ri(t,i)}}function iX(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function rX(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ii(t,e))return;n.uniform2iv(this.addr,e),ri(t,e)}}function sX(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ii(t,e))return;n.uniform3iv(this.addr,e),ri(t,e)}}function oX(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ii(t,e))return;n.uniform4iv(this.addr,e),ri(t,e)}}function aX(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function cX(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ii(t,e))return;n.uniform2uiv(this.addr,e),ri(t,e)}}function lX(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ii(t,e))return;n.uniform3uiv(this.addr,e),ri(t,e)}}function uX(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ii(t,e))return;n.uniform4uiv(this.addr,e),ri(t,e)}}function dX(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||nP,r)}function hX(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||rP,r)}function fX(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||sP,r)}function pX(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||iP,r)}function mX(n,e){n.uniform1fv(this.addr,e)}function _X(n,e){const t=pu(e,this.size,2);n.uniform2fv(this.addr,t)}function vX(n,e){const t=pu(e,this.size,3);n.uniform3fv(this.addr,t)}function yX(n,e){const t=pu(e,this.size,4);n.uniform4fv(this.addr,t)}function bX(n,e){const t=pu(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function wX(n,e){const t=pu(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function xX(n,e){const t=pu(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function MX(n,e){n.uniform1iv(this.addr,e)}function SX(n,e){n.uniform2iv(this.addr,e)}function CX(n,e){n.uniform3iv(this.addr,e)}function EX(n,e){n.uniform4iv(this.addr,e)}function TX(n,e){n.uniform1uiv(this.addr,e)}function DX(n,e){n.uniform2uiv(this.addr,e)}function AX(n,e){n.uniform3uiv(this.addr,e)}function IX(n,e){n.uniform4uiv(this.addr,e)}function RX(n,e,t){const i=this.cache,r=e.length,s=mm(t,r);ii(i,s)||(n.uniform1iv(this.addr,s),ri(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||nP,s[o])}function OX(n,e,t){const i=this.cache,r=e.length,s=mm(t,r);ii(i,s)||(n.uniform1iv(this.addr,s),ri(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||rP,s[o])}function PX(n,e,t){const i=this.cache,r=e.length,s=mm(t,r);ii(i,s)||(n.uniform1iv(this.addr,s),ri(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||sP,s[o])}function NX(n,e,t){const i=this.cache,r=e.length,s=mm(t,r);ii(i,s)||(n.uniform1iv(this.addr,s),ri(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||iP,s[o])}class LX{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=function gX(n){switch(n){case 5126:return JY;case 35664:return ZY;case 35665:return KY;case 35666:return QY;case 35674:return eX;case 35675:return tX;case 35676:return nX;case 5124:case 35670:return iX;case 35667:case 35671:return rX;case 35668:case 35672:return sX;case 35669:case 35673:return oX;case 5125:return aX;case 36294:return cX;case 36295:return lX;case 36296:return uX;case 35678:case 36198:case 36298:case 36306:case 35682:return dX;case 35679:case 36299:case 36307:return hX;case 35680:case 36300:case 36308:case 36293:return fX;case 36289:case 36303:case 36311:case 36292:return pX}}(t.type)}}class kX{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function FX(n){switch(n){case 5126:return mX;case 35664:return _X;case 35665:return vX;case 35666:return yX;case 35674:return bX;case 35675:return wX;case 35676:return xX;case 5124:case 35670:return MX;case 35667:case 35671:return SX;case 35668:case 35672:return CX;case 35669:case 35673:return EX;case 5125:return TX;case 36294:return DX;case 36295:return AX;case 36296:return IX;case 35678:case 36198:case 36298:case 36306:case 35682:return RX;case 35679:case 36299:case 36307:return OX;case 35680:case 36300:case 36308:case 36293:return PX;case 36289:case 36303:case 36311:case 36292:return NX}}(t.type)}}class BX{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const S1=/(\w+)(\])?(\[|\.)?/g;function dP(n,e){n.seq.push(e),n.map[e.id]=e}function UX(n,e,t){const i=n.name,r=i.length;for(S1.lastIndex=0;;){const s=S1.exec(i);let a=s[1];const l=s[3];if("]"===s[2]&&(a|=0),void 0===l||"["===l&&S1.lastIndex+2===r){dP(t,void 0===l?new LX(a,n,e):new kX(a,n,e));break}{let d=t.map[a];void 0===d&&(d=new BX(a),dP(t,d)),t=d}}}class _m{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r);UX(s,e.getUniformLocation(t,s.name),this)}}setValue(e,t,i,r){const s=this.map[t];void 0!==s&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];void 0!==r&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],c=i[a.id];!1!==c.needsUpdate&&a.setValue(e,c.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function hP(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let VX=0;function fP(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+"\n\n"+r+"\n\n"+function HX(n,e){const t=n.split("\n"),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join("\n")}(n.getShaderSource(e),o)}return r}function GX(n,e){const t=function zX(n){const e=Jt.getPrimaries(Jt.workingColorSpace),t=Jt.getPrimaries(n);let i;switch(e===t?i="":e===zg&&t===Hg?i="LinearDisplayP3ToLinearSRGB":e===Hg&&t===zg&&(i="LinearSRGBToLinearDisplayP3"),n){case Mi:case Ug:return[i,"LinearTransferOETF"];case Cn:case Xb:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function jX(n,e){let t;switch(e){case y7:t="Linear";break;case b7:t="Reinhard";break;case w7:t="OptimizedCineon";break;case x7:t="ACESFilmic";break;case M7:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Ah(n){return""!==n}function pP(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function gP(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const YX=/^[ \t]*#include +<([\w\d./]+)>/gm;function C1(n){return n.replace(YX,JX)}const XX=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function JX(n,e){let t=Ct[e];if(void 0===t){const i=XX.get(e);if(void 0===i)throw new Error("Can not resolve #include <"+e+">");t=Ct[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i)}return C1(t)}const ZX=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function mP(n){return n.replace(ZX,KX)}function KX(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function _P(n){let e="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function rJ(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const c=function QX(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===PR?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Z9?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===so&&(e="SHADOWMAP_TYPE_VSM"),e}(t),l=function eJ(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case $o:case La:e="ENVMAP_TYPE_CUBE";break;case mh:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function tJ(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&n.envMapMode===La&&(e="ENVMAP_MODE_REFRACTION"),e}(t),d=function nJ(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Ng:e="ENVMAP_BLENDING_MULTIPLY";break;case _7:e="ENVMAP_BLENDING_MIX";break;case v7:e="ENVMAP_BLENDING_ADD"}return e}(t),h=function iJ(n){const e=n.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}(t),f=t.isWebGL2?"":function WX(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ah).join("\n")}(t),p=function $X(n){const e=[];for(const t in n){const i=n[t];!1!==i&&e.push("#define "+t+" "+i)}return e.join("\n")}(s),_=r.createProgram();let m,g,b=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(m=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(Ah).join("\n"),m.length>0&&(m+="\n"),g=[f,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(Ah).join("\n"),g.length>0&&(g+="\n")):(m=[_P(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Ah).join("\n"),g=[f,_P(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+l:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Wo?"#define TONE_MAPPING":"",t.toneMapping!==Wo?Ct.tonemapping_pars_fragment:"",t.toneMapping!==Wo?jX("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Ct.colorspace_pars_fragment,GX("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(Ah).join("\n")),o=C1(o),o=pP(o,t),o=gP(o,t),a=C1(a),a=pP(a,t),a=gP(a,t),o=mP(o),a=mP(a),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(b="#version 300 es\n",m=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,g=["#define varying in",t.glslVersion===wO?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===wO?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+g);const x=b+g+a,S=hP(r,r.VERTEX_SHADER,b+m+o),T=hP(r,r.FRAGMENT_SHADER,x);if(r.attachShader(_,S),r.attachShader(_,T),void 0!==t.index0AttributeName?r.bindAttribLocation(_,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(_,0,"position"),r.linkProgram(_),n.debug.checkShaderErrors){const C=r.getProgramInfoLog(_).trim(),I=r.getShaderInfoLog(S).trim(),V=r.getShaderInfoLog(T).trim();let X=!0,J=!0;if(!1===r.getProgramParameter(_,r.LINK_STATUS))if(X=!1,"function"==typeof n.debug.onShaderError)n.debug.onShaderError(r,_,S,T);else{const k=fP(r,S,"vertex"),j=fP(r,T,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(_,r.VALIDATE_STATUS)+"\n\nProgram Info Log: "+C+"\n"+k+"\n"+j)}else""!==C?console.warn("THREE.WebGLProgram: Program Info Log:",C):(""===I||""===V)&&(J=!1);J&&(this.diagnostics={runnable:X,programLog:C,vertexShader:{log:I,prefix:m},fragmentShader:{log:V,prefix:g}})}let E,O;return r.deleteShader(S),r.deleteShader(T),this.getUniforms=function(){return void 0===E&&(E=new _m(r,_)),E},this.getAttributes=function(){return void 0===O&&(O=function qX(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}(r,_)),O},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(_),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=VX++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=S,this.fragmentShader=T,this}let sJ=0;class oJ{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.fragmentShader,r=this._getShaderStage(e.vertexShader),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return void 0===i&&(i=new aJ(e),t.set(e,i)),i}}class aJ{constructor(e){this.id=sJ++,this.code=e,this.usedTimes=0}}function cJ(n,e,t,i,r,s,o){const a=new u1,c=new oJ,l=[],u=r.isWebGL2,d=r.logarithmicDepthBuffer,h=r.vertexTextures;let f=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(C){return 0===C?"uv":`uv${C}`}return{getParameters:function m(C,I,V,X,J){const k=X.fog,j=J.geometry,Z=(C.isMeshStandardMaterial?t:e).get(C.envMap||(C.isMeshStandardMaterial?X.environment:null)),ge=Z&&Z.mapping===mh?Z.image.height:null,Q=p[C.type];null!==C.precision&&(f=r.getMaxPrecision(C.precision),f!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",f,"instead."));const se=j.morphAttributes.position||j.morphAttributes.normal||j.morphAttributes.color,H=void 0!==se?se.length:0;let ye,Me,xe,He,ee=0;if(void 0!==j.morphAttributes.position&&(ee=1),void 0!==j.morphAttributes.normal&&(ee=2),void 0!==j.morphAttributes.color&&(ee=3),Q){const vn=Ns[Q];ye=vn.vertexShader,Me=vn.fragmentShader}else ye=C.vertexShader,Me=C.fragmentShader,c.update(C),xe=c.getVertexShaderID(C),He=c.getFragmentShaderID(C);const Ge=n.getRenderTarget(),Be=!0===J.isInstancedMesh,wt=!!C.map,Ye=!!Z,D=!!C.aoMap,me=!!C.lightMap,re=!!C.bumpMap,we=!!C.normalMap,ce=!!C.displacementMap,Ze=!!C.emissiveMap,ze=!!C.metalnessMap,je=!!C.roughnessMap,tt=C.anisotropy>0,Mt=C.clearcoat>0,un=C.iridescence>0,F=C.sheen>0,A=C.transmission>0,$=tt&&!!C.anisotropyMap,ve=Mt&&!!C.clearcoatMap,he=Mt&&!!C.clearcoatNormalMap,be=Mt&&!!C.clearcoatRoughnessMap,Ke=un&&!!C.iridescenceMap,Se=un&&!!C.iridescenceThicknessMap,Fe=F&&!!C.sheenColorMap,B=F&&!!C.sheenRoughnessMap,Ce=!!C.specularMap,le=!!C.specularColorMap,lt=!!C.specularIntensityMap,nt=A&&!!C.transmissionMap,it=A&&!!C.thicknessMap,L=!!C.alphaMap,Pe=!!C.extensions,Ae=!!j.attributes.uv1,de=!!j.attributes.uv2,Je=!!j.attributes.uv3;let dt=Wo;return C.toneMapped&&(null===Ge||!0===Ge.isXRRenderTarget)&&(dt=n.toneMapping),{isWebGL2:u,shaderID:Q,shaderType:C.type,shaderName:C.name,vertexShader:ye,fragmentShader:Me,defines:C.defines,customVertexShaderID:xe,customFragmentShaderID:He,isRawShaderMaterial:!0===C.isRawShaderMaterial,glslVersion:C.glslVersion,precision:f,instancing:Be,instancingColor:Be&&null!==J.instanceColor,supportsVertexTextures:h,outputColorSpace:null===Ge?n.outputColorSpace:!0===Ge.isXRRenderTarget?Ge.texture.colorSpace:Mi,map:wt,matcap:!!C.matcap,envMap:Ye,envMapMode:Ye&&Z.mapping,envMapCubeUVHeight:ge,aoMap:D,lightMap:me,bumpMap:re,normalMap:we,displacementMap:h&&ce,emissiveMap:Ze,normalMapObjectSpace:we&&1===C.normalMapType,normalMapTangentSpace:we&&0===C.normalMapType,metalnessMap:ze,roughnessMap:je,anisotropy:tt,anisotropyMap:$,clearcoat:Mt,clearcoatMap:ve,clearcoatNormalMap:he,clearcoatRoughnessMap:be,iridescence:un,iridescenceMap:Ke,iridescenceThicknessMap:Se,sheen:F,sheenColorMap:Fe,sheenRoughnessMap:B,specularMap:Ce,specularColorMap:le,specularIntensityMap:lt,transmission:A,transmissionMap:nt,thicknessMap:it,gradientMap:!!C.gradientMap,opaque:!1===C.transparent&&1===C.blending,alphaMap:L,alphaTest:C.alphaTest>0,alphaHash:!!C.alphaHash,combine:C.combine,mapUv:wt&&_(C.map.channel),aoMapUv:D&&_(C.aoMap.channel),lightMapUv:me&&_(C.lightMap.channel),bumpMapUv:re&&_(C.bumpMap.channel),normalMapUv:we&&_(C.normalMap.channel),displacementMapUv:ce&&_(C.displacementMap.channel),emissiveMapUv:Ze&&_(C.emissiveMap.channel),metalnessMapUv:ze&&_(C.metalnessMap.channel),roughnessMapUv:je&&_(C.roughnessMap.channel),anisotropyMapUv:$&&_(C.anisotropyMap.channel),clearcoatMapUv:ve&&_(C.clearcoatMap.channel),clearcoatNormalMapUv:he&&_(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:be&&_(C.clearcoatRoughnessMap.channel),iridescenceMapUv:Ke&&_(C.iridescenceMap.channel),iridescenceThicknessMapUv:Se&&_(C.iridescenceThicknessMap.channel),sheenColorMapUv:Fe&&_(C.sheenColorMap.channel),sheenRoughnessMapUv:B&&_(C.sheenRoughnessMap.channel),specularMapUv:Ce&&_(C.specularMap.channel),specularColorMapUv:le&&_(C.specularColorMap.channel),specularIntensityMapUv:lt&&_(C.specularIntensityMap.channel),transmissionMapUv:nt&&_(C.transmissionMap.channel),thicknessMapUv:it&&_(C.thicknessMap.channel),alphaMapUv:L&&_(C.alphaMap.channel),vertexTangents:!!j.attributes.tangent&&(we||tt),vertexColors:C.vertexColors,vertexAlphas:!0===C.vertexColors&&!!j.attributes.color&&4===j.attributes.color.itemSize,vertexUv1s:Ae,vertexUv2s:de,vertexUv3s:Je,pointsUvs:!0===J.isPoints&&!!j.attributes.uv&&(wt||L),fog:!!k,useFog:!0===C.fog,fogExp2:k&&k.isFogExp2,flatShading:!0===C.flatShading,sizeAttenuation:!0===C.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===J.isSkinnedMesh,morphTargets:void 0!==j.morphAttributes.position,morphNormals:void 0!==j.morphAttributes.normal,morphColors:void 0!==j.morphAttributes.color,morphTargetsCount:H,morphTextureStride:ee,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numSpotLightMaps:I.spotLightMap.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numDirLightShadows:I.directionalShadowMap.length,numPointLightShadows:I.pointShadowMap.length,numSpotLightShadows:I.spotShadowMap.length,numSpotLightShadowsWithMaps:I.numSpotLightShadowsWithMaps,numLightProbes:I.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:C.dithering,shadowMapEnabled:n.shadowMap.enabled&&V.length>0,shadowMapType:n.shadowMap.type,toneMapping:dt,useLegacyLights:n._useLegacyLights,decodeVideoTexture:wt&&!0===C.map.isVideoTexture&&Jt.getTransfer(C.map.colorSpace)===_n,premultipliedAlpha:C.premultipliedAlpha,doubleSided:2===C.side,flipSided:1===C.side,useDepthPacking:C.depthPacking>=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionDerivatives:Pe&&!0===C.extensions.derivatives,extensionFragDepth:Pe&&!0===C.extensions.fragDepth,extensionDrawBuffers:Pe&&!0===C.extensions.drawBuffers,extensionShaderTextureLOD:Pe&&!0===C.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:C.customProgramCacheKey()}},getProgramCacheKey:function g(C){const I=[];if(C.shaderID?I.push(C.shaderID):(I.push(C.customVertexShaderID),I.push(C.customFragmentShaderID)),void 0!==C.defines)for(const V in C.defines)I.push(V),I.push(C.defines[V]);return!1===C.isRawShaderMaterial&&(function b(C,I){C.push(I.precision),C.push(I.outputColorSpace),C.push(I.envMapMode),C.push(I.envMapCubeUVHeight),C.push(I.mapUv),C.push(I.alphaMapUv),C.push(I.lightMapUv),C.push(I.aoMapUv),C.push(I.bumpMapUv),C.push(I.normalMapUv),C.push(I.displacementMapUv),C.push(I.emissiveMapUv),C.push(I.metalnessMapUv),C.push(I.roughnessMapUv),C.push(I.anisotropyMapUv),C.push(I.clearcoatMapUv),C.push(I.clearcoatNormalMapUv),C.push(I.clearcoatRoughnessMapUv),C.push(I.iridescenceMapUv),C.push(I.iridescenceThicknessMapUv),C.push(I.sheenColorMapUv),C.push(I.sheenRoughnessMapUv),C.push(I.specularMapUv),C.push(I.specularColorMapUv),C.push(I.specularIntensityMapUv),C.push(I.transmissionMapUv),C.push(I.thicknessMapUv),C.push(I.combine),C.push(I.fogExp2),C.push(I.sizeAttenuation),C.push(I.morphTargetsCount),C.push(I.morphAttributeCount),C.push(I.numDirLights),C.push(I.numPointLights),C.push(I.numSpotLights),C.push(I.numSpotLightMaps),C.push(I.numHemiLights),C.push(I.numRectAreaLights),C.push(I.numDirLightShadows),C.push(I.numPointLightShadows),C.push(I.numSpotLightShadows),C.push(I.numSpotLightShadowsWithMaps),C.push(I.numLightProbes),C.push(I.shadowMapType),C.push(I.toneMapping),C.push(I.numClippingPlanes),C.push(I.numClipIntersection),C.push(I.depthPacking)}(I,C),function w(C,I){a.disableAll(),I.isWebGL2&&a.enable(0),I.supportsVertexTextures&&a.enable(1),I.instancing&&a.enable(2),I.instancingColor&&a.enable(3),I.matcap&&a.enable(4),I.envMap&&a.enable(5),I.normalMapObjectSpace&&a.enable(6),I.normalMapTangentSpace&&a.enable(7),I.clearcoat&&a.enable(8),I.iridescence&&a.enable(9),I.alphaTest&&a.enable(10),I.vertexColors&&a.enable(11),I.vertexAlphas&&a.enable(12),I.vertexUv1s&&a.enable(13),I.vertexUv2s&&a.enable(14),I.vertexUv3s&&a.enable(15),I.vertexTangents&&a.enable(16),I.anisotropy&&a.enable(17),C.push(a.mask),a.disableAll(),I.fog&&a.enable(0),I.useFog&&a.enable(1),I.flatShading&&a.enable(2),I.logarithmicDepthBuffer&&a.enable(3),I.skinning&&a.enable(4),I.morphTargets&&a.enable(5),I.morphNormals&&a.enable(6),I.morphColors&&a.enable(7),I.premultipliedAlpha&&a.enable(8),I.shadowMapEnabled&&a.enable(9),I.useLegacyLights&&a.enable(10),I.doubleSided&&a.enable(11),I.flipSided&&a.enable(12),I.useDepthPacking&&a.enable(13),I.dithering&&a.enable(14),I.transmission&&a.enable(15),I.sheen&&a.enable(16),I.opaque&&a.enable(17),I.pointsUvs&&a.enable(18),I.decodeVideoTexture&&a.enable(19),C.push(a.mask)}(I,C),I.push(n.outputColorSpace)),I.push(C.customProgramCacheKey),I.join()},getUniforms:function x(C){const I=p[C.type];let V;return V=I?D$.clone(Ns[I].uniforms):C.uniforms,V},acquireProgram:function S(C,I){let V;for(let X=0,J=l.length;X<J;X++){const k=l[X];if(k.cacheKey===I){V=k,++V.usedTimes;break}}return void 0===V&&(V=new rJ(n,I,C,s),l.push(V)),V},releaseProgram:function T(C){if(0==--C.usedTimes){const I=l.indexOf(C);l[I]=l[l.length-1],l.pop(),C.destroy()}},releaseShaderCache:function E(C){c.remove(C)},programs:l,dispose:function O(){c.dispose()}}}function lJ(){let n=new WeakMap;return{get:function e(s){let o=n.get(s);return void 0===o&&(o={},n.set(s,o)),o},remove:function t(s){n.delete(s)},update:function i(s,o,a){n.get(s)[o]=a},dispose:function r(){n=new WeakMap}}}function uJ(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function vP(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function yP(){const n=[];let e=0;const t=[],i=[],r=[];function o(d,h,f,p,_,m){let g=n[e];return void 0===g?(g={id:d.id,object:d,geometry:h,material:f,groupOrder:p,renderOrder:d.renderOrder,z:_,group:m},n[e]=g):(g.id=d.id,g.object=d,g.geometry=h,g.material=f,g.groupOrder=p,g.renderOrder=d.renderOrder,g.z=_,g.group=m),e++,g}return{opaque:t,transmissive:i,transparent:r,init:function s(){e=0,t.length=0,i.length=0,r.length=0},push:function a(d,h,f,p,_,m){const g=o(d,h,f,p,_,m);f.transmission>0?i.push(g):!0===f.transparent?r.push(g):t.push(g)},unshift:function c(d,h,f,p,_,m){const g=o(d,h,f,p,_,m);f.transmission>0?i.unshift(g):!0===f.transparent?r.unshift(g):t.unshift(g)},finish:function u(){for(let d=e,h=n.length;d<h;d++){const f=n[d];if(null===f.id)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}},sort:function l(d,h){t.length>1&&t.sort(d||uJ),i.length>1&&i.sort(h||vP),r.length>1&&r.sort(h||vP)}}}function dJ(){let n=new WeakMap;return{get:function e(i,r){const s=n.get(i);let o;return void 0===s?(o=new yP,n.set(i,[o])):r>=s.length?(o=new yP,s.push(o)):o=s[r],o},dispose:function t(){n=new WeakMap}}}function hJ(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new R,color:new Ne};break;case"SpotLight":t={position:new R,direction:new R,color:new Ne,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new R,color:new Ne,distance:0,decay:0};break;case"HemisphereLight":t={direction:new R,skyColor:new Ne,groundColor:new Ne};break;case"RectAreaLight":t={color:new Ne,position:new R,halfWidth:new R,halfHeight:new R}}return n[e.id]=t,t}}}let pJ=0;function gJ(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function mJ(n,e){const t=new hJ,i=function fJ(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ie};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ie,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)r.probe.push(new R);const s=new R,o=new ht,a=new ht;return{setup:function c(u,d){let h=0,f=0,p=0;for(let X=0;X<9;X++)r.probe[X].set(0,0,0);let _=0,m=0,g=0,b=0,w=0,x=0,S=0,T=0,E=0,O=0,C=0;u.sort(gJ);const I=!0===d?Math.PI:1;for(let X=0,J=u.length;X<J;X++){const k=u[X],j=k.color,Y=k.intensity,Z=k.distance,ge=k.shadow&&k.shadow.map?k.shadow.map.texture:null;if(k.isAmbientLight)h+=j.r*Y*I,f+=j.g*Y*I,p+=j.b*Y*I;else if(k.isLightProbe){for(let Q=0;Q<9;Q++)r.probe[Q].addScaledVector(k.sh.coefficients[Q],Y);C++}else if(k.isDirectionalLight){const Q=t.get(k);if(Q.color.copy(k.color).multiplyScalar(k.intensity*I),k.castShadow){const se=k.shadow,H=i.get(k);H.shadowBias=se.bias,H.shadowNormalBias=se.normalBias,H.shadowRadius=se.radius,H.shadowMapSize=se.mapSize,r.directionalShadow[_]=H,r.directionalShadowMap[_]=ge,r.directionalShadowMatrix[_]=k.shadow.matrix,x++}r.directional[_]=Q,_++}else if(k.isSpotLight){const Q=t.get(k);Q.position.setFromMatrixPosition(k.matrixWorld),Q.color.copy(j).multiplyScalar(Y*I),Q.distance=Z,Q.coneCos=Math.cos(k.angle),Q.penumbraCos=Math.cos(k.angle*(1-k.penumbra)),Q.decay=k.decay,r.spot[g]=Q;const se=k.shadow;if(k.map&&(r.spotLightMap[E]=k.map,E++,se.updateMatrices(k),k.castShadow&&O++),r.spotLightMatrix[g]=se.matrix,k.castShadow){const H=i.get(k);H.shadowBias=se.bias,H.shadowNormalBias=se.normalBias,H.shadowRadius=se.radius,H.shadowMapSize=se.mapSize,r.spotShadow[g]=H,r.spotShadowMap[g]=ge,T++}g++}else if(k.isRectAreaLight){const Q=t.get(k);Q.color.copy(j).multiplyScalar(Y),Q.halfWidth.set(.5*k.width,0,0),Q.halfHeight.set(0,.5*k.height,0),r.rectArea[b]=Q,b++}else if(k.isPointLight){const Q=t.get(k);if(Q.color.copy(k.color).multiplyScalar(k.intensity*I),Q.distance=k.distance,Q.decay=k.decay,k.castShadow){const se=k.shadow,H=i.get(k);H.shadowBias=se.bias,H.shadowNormalBias=se.normalBias,H.shadowRadius=se.radius,H.shadowMapSize=se.mapSize,H.shadowCameraNear=se.camera.near,H.shadowCameraFar=se.camera.far,r.pointShadow[m]=H,r.pointShadowMap[m]=ge,r.pointShadowMatrix[m]=k.shadow.matrix,S++}r.point[m]=Q,m++}else if(k.isHemisphereLight){const Q=t.get(k);Q.skyColor.copy(k.color).multiplyScalar(Y*I),Q.groundColor.copy(k.groundColor).multiplyScalar(Y*I),r.hemi[w]=Q,w++}}b>0&&(e.isWebGL2||!0===n.has("OES_texture_float_linear")?(r.rectAreaLTC1=Re.LTC_FLOAT_1,r.rectAreaLTC2=Re.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Re.LTC_HALF_1,r.rectAreaLTC2=Re.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=h,r.ambient[1]=f,r.ambient[2]=p;const V=r.hash;(V.directionalLength!==_||V.pointLength!==m||V.spotLength!==g||V.rectAreaLength!==b||V.hemiLength!==w||V.numDirectionalShadows!==x||V.numPointShadows!==S||V.numSpotShadows!==T||V.numSpotMaps!==E||V.numLightProbes!==C)&&(r.directional.length=_,r.spot.length=g,r.rectArea.length=b,r.point.length=m,r.hemi.length=w,r.directionalShadow.length=x,r.directionalShadowMap.length=x,r.pointShadow.length=S,r.pointShadowMap.length=S,r.spotShadow.length=T,r.spotShadowMap.length=T,r.directionalShadowMatrix.length=x,r.pointShadowMatrix.length=S,r.spotLightMatrix.length=T+E-O,r.spotLightMap.length=E,r.numSpotLightShadowsWithMaps=O,r.numLightProbes=C,V.directionalLength=_,V.pointLength=m,V.spotLength=g,V.rectAreaLength=b,V.hemiLength=w,V.numDirectionalShadows=x,V.numPointShadows=S,V.numSpotShadows=T,V.numSpotMaps=E,V.numLightProbes=C,r.version=pJ++)},setupView:function l(u,d){let h=0,f=0,p=0,_=0,m=0;const g=d.matrixWorldInverse;for(let b=0,w=u.length;b<w;b++){const x=u[b];if(x.isDirectionalLight){const S=r.directional[h];S.direction.setFromMatrixPosition(x.matrixWorld),s.setFromMatrixPosition(x.target.matrixWorld),S.direction.sub(s),S.direction.transformDirection(g),h++}else if(x.isSpotLight){const S=r.spot[p];S.position.setFromMatrixPosition(x.matrixWorld),S.position.applyMatrix4(g),S.direction.setFromMatrixPosition(x.matrixWorld),s.setFromMatrixPosition(x.target.matrixWorld),S.direction.sub(s),S.direction.transformDirection(g),p++}else if(x.isRectAreaLight){const S=r.rectArea[_];S.position.setFromMatrixPosition(x.matrixWorld),S.position.applyMatrix4(g),a.identity(),o.copy(x.matrixWorld),o.premultiply(g),a.extractRotation(o),S.halfWidth.set(.5*x.width,0,0),S.halfHeight.set(0,.5*x.height,0),S.halfWidth.applyMatrix4(a),S.halfHeight.applyMatrix4(a),_++}else if(x.isPointLight){const S=r.point[f];S.position.setFromMatrixPosition(x.matrixWorld),S.position.applyMatrix4(g),f++}else if(x.isHemisphereLight){const S=r.hemi[m];S.direction.setFromMatrixPosition(x.matrixWorld),S.direction.transformDirection(g),m++}}},state:r}}function bP(n,e){const t=new mJ(n,e),i=[],r=[];return{init:function s(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:function c(d){t.setup(i,d)},setupLightsView:function l(d){t.setupView(i,d)},pushLight:function o(d){i.push(d)},pushShadow:function a(d){r.push(d)}}}function _J(n,e){let t=new WeakMap;return{get:function i(s,o=0){const a=t.get(s);let c;return void 0===a?(c=new bP(n,e),t.set(s,[c])):o>=a.length?(c=new bP(n,e),a.push(c)):c=a[o],c},dispose:function r(){t=new WeakMap}}}class wP extends gs{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class xP extends gs{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function bJ(n,e,t){let i=new b1;const r=new ie,s=new ie,o=new on,a=new wP({depthPacking:3201}),c=new xP,l={},u=t.maxTextureSize,d={0:1,1:0,2:2},h=new ta({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ie},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const p=new It;p.setAttribute("position",new On(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new Ci(p,h),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PR;let g=this.type;function b(S,T){const E=e.update(_);h.defines.VSM_SAMPLES!==S.blurSamples&&(h.defines.VSM_SAMPLES=S.blurSamples,f.defines.VSM_SAMPLES=S.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),null===S.mapPass&&(S.mapPass=new Ga(r.x,r.y)),h.uniforms.shadow_pass.value=S.map.texture,h.uniforms.resolution.value=S.mapSize,h.uniforms.radius.value=S.radius,n.setRenderTarget(S.mapPass),n.clear(),n.renderBufferDirect(T,null,E,h,_,null),f.uniforms.shadow_pass.value=S.mapPass.texture,f.uniforms.resolution.value=S.mapSize,f.uniforms.radius.value=S.radius,n.setRenderTarget(S.map),n.clear(),n.renderBufferDirect(T,null,E,f,_,null)}function w(S,T,E,O){let C=null;const I=!0===E.isPointLight?S.customDistanceMaterial:S.customDepthMaterial;if(void 0!==I)C=I;else if(C=!0===E.isPointLight?c:a,n.localClippingEnabled&&!0===T.clipShadows&&Array.isArray(T.clippingPlanes)&&0!==T.clippingPlanes.length||T.displacementMap&&0!==T.displacementScale||T.alphaMap&&T.alphaTest>0||T.map&&T.alphaTest>0){const V=C.uuid,X=T.uuid;let J=l[V];void 0===J&&(J={},l[V]=J);let k=J[X];void 0===k&&(k=C.clone(),J[X]=k),C=k}return C.visible=T.visible,C.wireframe=T.wireframe,C.side=O===so?null!==T.shadowSide?T.shadowSide:T.side:null!==T.shadowSide?T.shadowSide:d[T.side],C.alphaMap=T.alphaMap,C.alphaTest=T.alphaTest,C.map=T.map,C.clipShadows=T.clipShadows,C.clippingPlanes=T.clippingPlanes,C.clipIntersection=T.clipIntersection,C.displacementMap=T.displacementMap,C.displacementScale=T.displacementScale,C.displacementBias=T.displacementBias,C.wireframeLinewidth=T.wireframeLinewidth,C.linewidth=T.linewidth,!0===E.isPointLight&&!0===C.isMeshDistanceMaterial&&(n.properties.get(C).light=E),C}function x(S,T,E,O,C){if(!1===S.visible)return;if(S.layers.test(T.layers)&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&C===so)&&(!S.frustumCulled||i.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(E.matrixWorldInverse,S.matrixWorld);const X=e.update(S),J=S.material;if(Array.isArray(J)){const k=X.groups;for(let j=0,Y=k.length;j<Y;j++){const Z=k[j],ge=J[Z.materialIndex];if(ge&&ge.visible){const Q=w(S,ge,O,C);n.renderBufferDirect(E,null,X,Q,S,Z)}}}else if(J.visible){const k=w(S,J,O,C);n.renderBufferDirect(E,null,X,k,S,null)}}const V=S.children;for(let X=0,J=V.length;X<J;X++)x(V[X],T,E,O,C)}this.render=function(S,T,E){if(!1===m.enabled||!1===m.autoUpdate&&!1===m.needsUpdate||0===S.length)return;const O=n.getRenderTarget(),C=n.getActiveCubeFace(),I=n.getActiveMipmapLevel(),V=n.state;V.setBlending(0),V.buffers.color.setClear(1,1,1,1),V.buffers.depth.setTest(!0),V.setScissorTest(!1);const X=g!==so&&this.type===so,J=g===so&&this.type!==so;for(let k=0,j=S.length;k<j;k++){const Y=S[k],Z=Y.shadow;if(void 0===Z){console.warn("THREE.WebGLShadowMap:",Y,"has no shadow.");continue}if(!1===Z.autoUpdate&&!1===Z.needsUpdate)continue;r.copy(Z.mapSize);const ge=Z.getFrameExtents();if(r.multiply(ge),s.copy(Z.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/ge.x),r.x=s.x*ge.x,Z.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/ge.y),r.y=s.y*ge.y,Z.mapSize.y=s.y)),null===Z.map||!0===X||!0===J){const se=this.type!==so?{minFilter:zn,magFilter:zn}:{};null!==Z.map&&Z.map.dispose(),Z.map=new Ga(r.x,r.y,se),Z.map.texture.name=Y.name+".shadowMap",Z.camera.updateProjectionMatrix()}n.setRenderTarget(Z.map),n.clear();const Q=Z.getViewportCount();for(let se=0;se<Q;se++){const H=Z.getViewport(se);o.set(s.x*H.x,s.y*H.y,s.x*H.z,s.y*H.w),V.viewport(o),Z.updateMatrices(Y,se),i=Z.getFrustum(),x(T,E,Z.camera,Y,this.type)}!0!==Z.isPointLightShadow&&this.type===so&&b(Z,E),Z.needsUpdate=!1}g=this.type,m.needsUpdate=!1,n.setRenderTarget(O,C,I)}}function wJ(n,e,t){const i=t.isWebGL2,a=new function r(){let L=!1;const De=new on;let Ee=null;const Pe=new on(0,0,0,0);return{setMask:function(Ae){Ee!==Ae&&!L&&(n.colorMask(Ae,Ae,Ae,Ae),Ee=Ae)},setLocked:function(Ae){L=Ae},setClear:function(Ae,de,Je,dt,Yn){!0===Yn&&(Ae*=dt,de*=dt,Je*=dt),De.set(Ae,de,Je,dt),!1===Pe.equals(De)&&(n.clearColor(Ae,de,Je,dt),Pe.copy(De))},reset:function(){L=!1,Ee=null,Pe.set(-1,0,0,0)}}},c=new function s(){let L=!1,De=null,Ee=null,Pe=null;return{setTest:function(Ae){Ae?Ge(n.DEPTH_TEST):Be(n.DEPTH_TEST)},setMask:function(Ae){De!==Ae&&!L&&(n.depthMask(Ae),De=Ae)},setFunc:function(Ae){if(Ee!==Ae){switch(Ae){case 0:n.depthFunc(n.NEVER);break;case 1:n.depthFunc(n.ALWAYS);break;case 2:n.depthFunc(n.LESS);break;case 3:default:n.depthFunc(n.LEQUAL);break;case 4:n.depthFunc(n.EQUAL);break;case 5:n.depthFunc(n.GEQUAL);break;case 6:n.depthFunc(n.GREATER);break;case 7:n.depthFunc(n.NOTEQUAL)}Ee=Ae}},setLocked:function(Ae){L=Ae},setClear:function(Ae){Pe!==Ae&&(n.clearDepth(Ae),Pe=Ae)},reset:function(){L=!1,De=null,Ee=null,Pe=null}}},l=new function o(){let L=!1,De=null,Ee=null,Pe=null,Ae=null,de=null,Je=null,dt=null,Yn=null;return{setTest:function(vn){L||(vn?Ge(n.STENCIL_TEST):Be(n.STENCIL_TEST))},setMask:function(vn){De!==vn&&!L&&(n.stencilMask(vn),De=vn)},setFunc:function(vn,Vs,Yi){(Ee!==vn||Pe!==Vs||Ae!==Yi)&&(n.stencilFunc(vn,Vs,Yi),Ee=vn,Pe=Vs,Ae=Yi)},setOp:function(vn,Vs,Yi){(de!==vn||Je!==Vs||dt!==Yi)&&(n.stencilOp(vn,Vs,Yi),de=vn,Je=Vs,dt=Yi)},setLocked:function(vn){L=vn},setClear:function(vn){Yn!==vn&&(n.clearStencil(vn),Yn=vn)},reset:function(){L=!1,De=null,Ee=null,Pe=null,Ae=null,de=null,Je=null,dt=null,Yn=null}}},u=new WeakMap,d=new WeakMap;let h={},f={},p=new WeakMap,_=[],m=null,g=!1,b=null,w=null,x=null,S=null,T=null,E=null,O=null,C=!1,I=null,V=null,X=null,J=null,k=null;const j=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Y=!1,Z=0;const ge=n.getParameter(n.VERSION);-1!==ge.indexOf("WebGL")?(Z=parseFloat(/^WebGL (\d)/.exec(ge)[1]),Y=Z>=1):-1!==ge.indexOf("OpenGL ES")&&(Z=parseFloat(/^OpenGL ES (\d)/.exec(ge)[1]),Y=Z>=2);let Q=null,se={};const H=n.getParameter(n.SCISSOR_BOX),ee=n.getParameter(n.VIEWPORT),ye=(new on).fromArray(H),Me=(new on).fromArray(ee);function xe(L,De,Ee,Pe){const Ae=new Uint8Array(4),de=n.createTexture();n.bindTexture(L,de),n.texParameteri(L,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(L,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Je=0;Je<Ee;Je++)!i||L!==n.TEXTURE_3D&&L!==n.TEXTURE_2D_ARRAY?n.texImage2D(De+Je,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ae):n.texImage3D(De,0,n.RGBA,1,1,Pe,0,n.RGBA,n.UNSIGNED_BYTE,Ae);return de}const He={};function Ge(L){!0!==h[L]&&(n.enable(L),h[L]=!0)}function Be(L){!1!==h[L]&&(n.disable(L),h[L]=!1)}He[n.TEXTURE_2D]=xe(n.TEXTURE_2D,n.TEXTURE_2D,1),He[n.TEXTURE_CUBE_MAP]=xe(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(He[n.TEXTURE_2D_ARRAY]=xe(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),He[n.TEXTURE_3D]=xe(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),c.setClear(1),l.setClear(0),Ge(n.DEPTH_TEST),c.setFunc(3),ce(!1),Ze(1),Ge(n.CULL_FACE),re(0);const D={100:n.FUNC_ADD,101:n.FUNC_SUBTRACT,102:n.FUNC_REVERSE_SUBTRACT};if(i)D[103]=n.MIN,D[104]=n.MAX;else{const L=e.get("EXT_blend_minmax");null!==L&&(D[103]=L.MIN_EXT,D[104]=L.MAX_EXT)}const me={200:n.ZERO,201:n.ONE,202:n.SRC_COLOR,204:n.SRC_ALPHA,210:n.SRC_ALPHA_SATURATE,208:n.DST_COLOR,206:n.DST_ALPHA,203:n.ONE_MINUS_SRC_COLOR,205:n.ONE_MINUS_SRC_ALPHA,209:n.ONE_MINUS_DST_COLOR,207:n.ONE_MINUS_DST_ALPHA};function re(L,De,Ee,Pe,Ae,de,Je,dt){if(0!==L){if(!1===g&&(Ge(n.BLEND),g=!0),5===L)Ae=Ae||De,de=de||Ee,Je=Je||Pe,(De!==w||Ae!==T)&&(n.blendEquationSeparate(D[De],D[Ae]),w=De,T=Ae),(Ee!==x||Pe!==S||de!==E||Je!==O)&&(n.blendFuncSeparate(me[Ee],me[Pe],me[de],me[Je]),x=Ee,S=Pe,E=de,O=Je),b=L,C=!1;else if(L!==b||dt!==C){if((100!==w||100!==T)&&(n.blendEquation(n.FUNC_ADD),w=100,T=100),dt)switch(L){case 1:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case 2:n.blendFunc(n.ONE,n.ONE);break;case 3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case 4:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",L)}else switch(L){case 1:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case 2:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case 3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case 4:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",L)}x=null,S=null,E=null,O=null,b=L,C=dt}}else!0===g&&(Be(n.BLEND),g=!1)}function ce(L){I!==L&&(n.frontFace(L?n.CW:n.CCW),I=L)}function Ze(L){0!==L?(Ge(n.CULL_FACE),L!==V&&n.cullFace(1===L?n.BACK:2===L?n.FRONT:n.FRONT_AND_BACK)):Be(n.CULL_FACE),V=L}function je(L,De,Ee){L?(Ge(n.POLYGON_OFFSET_FILL),(J!==De||k!==Ee)&&(n.polygonOffset(De,Ee),J=De,k=Ee)):Be(n.POLYGON_OFFSET_FILL)}return{buffers:{color:a,depth:c,stencil:l},enable:Ge,disable:Be,bindFramebuffer:function wt(L,De){return f[L]!==De&&(n.bindFramebuffer(L,De),f[L]=De,i&&(L===n.DRAW_FRAMEBUFFER&&(f[n.FRAMEBUFFER]=De),L===n.FRAMEBUFFER&&(f[n.DRAW_FRAMEBUFFER]=De)),!0)},drawBuffers:function At(L,De){let Ee=_,Pe=!1;if(L)if(Ee=p.get(De),void 0===Ee&&(Ee=[],p.set(De,Ee)),L.isWebGLMultipleRenderTargets){const Ae=L.texture;if(Ee.length!==Ae.length||Ee[0]!==n.COLOR_ATTACHMENT0){for(let de=0,Je=Ae.length;de<Je;de++)Ee[de]=n.COLOR_ATTACHMENT0+de;Ee.length=Ae.length,Pe=!0}}else Ee[0]!==n.COLOR_ATTACHMENT0&&(Ee[0]=n.COLOR_ATTACHMENT0,Pe=!0);else Ee[0]!==n.BACK&&(Ee[0]=n.BACK,Pe=!0);Pe&&(t.isWebGL2?n.drawBuffers(Ee):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ee))},useProgram:function Ye(L){return m!==L&&(n.useProgram(L),m=L,!0)},setBlending:re,setMaterial:function we(L,De){2===L.side?Be(n.CULL_FACE):Ge(n.CULL_FACE);let Ee=1===L.side;De&&(Ee=!Ee),ce(Ee),1===L.blending&&!1===L.transparent?re(0):re(L.blending,L.blendEquation,L.blendSrc,L.blendDst,L.blendEquationAlpha,L.blendSrcAlpha,L.blendDstAlpha,L.premultipliedAlpha),c.setFunc(L.depthFunc),c.setTest(L.depthTest),c.setMask(L.depthWrite),a.setMask(L.colorWrite);const Pe=L.stencilWrite;l.setTest(Pe),Pe&&(l.setMask(L.stencilWriteMask),l.setFunc(L.stencilFunc,L.stencilRef,L.stencilFuncMask),l.setOp(L.stencilFail,L.stencilZFail,L.stencilZPass)),je(L.polygonOffset,L.polygonOffsetFactor,L.polygonOffsetUnits),!0===L.alphaToCoverage?Ge(n.SAMPLE_ALPHA_TO_COVERAGE):Be(n.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:ce,setCullFace:Ze,setLineWidth:function ze(L){L!==X&&(Y&&n.lineWidth(L),X=L)},setPolygonOffset:je,setScissorTest:function tt(L){L?Ge(n.SCISSOR_TEST):Be(n.SCISSOR_TEST)},activeTexture:function Mt(L){void 0===L&&(L=n.TEXTURE0+j-1),Q!==L&&(n.activeTexture(L),Q=L)},bindTexture:function un(L,De,Ee){void 0===Ee&&(Ee=null===Q?n.TEXTURE0+j-1:Q);let Pe=se[Ee];void 0===Pe&&(Pe={type:void 0,texture:void 0},se[Ee]=Pe),(Pe.type!==L||Pe.texture!==De)&&(Q!==Ee&&(n.activeTexture(Ee),Q=Ee),n.bindTexture(L,De||He[L]),Pe.type=L,Pe.texture=De)},unbindTexture:function F(){const L=se[Q];void 0!==L&&void 0!==L.type&&(n.bindTexture(L.type,null),L.type=void 0,L.texture=void 0)},compressedTexImage2D:function A(){try{n.compressedTexImage2D.apply(n,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},compressedTexImage3D:function $(){try{n.compressedTexImage3D.apply(n,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},texImage2D:function B(){try{n.texImage2D.apply(n,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},texImage3D:function Ce(){try{n.texImage3D.apply(n,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},updateUBOMapping:function nt(L,De){let Ee=d.get(De);void 0===Ee&&(Ee=new WeakMap,d.set(De,Ee));let Pe=Ee.get(L);void 0===Pe&&(Pe=n.getUniformBlockIndex(De,L.name),Ee.set(L,Pe))},uniformBlockBinding:function it(L,De){const Pe=d.get(De).get(L);u.get(De)!==Pe&&(n.uniformBlockBinding(De,Pe,L.__bindingPointIndex),u.set(De,Pe))},texStorage2D:function Se(){try{n.texStorage2D.apply(n,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},texStorage3D:function Fe(){try{n.texStorage3D.apply(n,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},texSubImage2D:function ve(){try{n.texSubImage2D.apply(n,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},texSubImage3D:function he(){try{n.texSubImage3D.apply(n,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},compressedTexSubImage2D:function be(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},compressedTexSubImage3D:function Ke(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(L){console.error("THREE.WebGLState:",L)}},scissor:function le(L){!1===ye.equals(L)&&(n.scissor(L.x,L.y,L.z,L.w),ye.copy(L))},viewport:function lt(L){!1===Me.equals(L)&&(n.viewport(L.x,L.y,L.z,L.w),Me.copy(L))},reset:function Qe(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),!0===i&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),h={},Q=null,se={},f={},p=new WeakMap,_=[],m=null,g=!1,b=null,w=null,x=null,S=null,T=null,E=null,O=null,C=!1,I=null,V=null,X=null,J=null,k=null,ye.set(0,0,n.canvas.width,n.canvas.height),Me.set(0,0,n.canvas.width,n.canvas.height),a.reset(),c.reset(),l.reset()}}}function xJ(n,e,t,i,r,s,o){const a=r.isWebGL2,c=r.maxTextures,l=r.maxCubemapSize,u=r.maxTextureSize,d=r.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let _;const m=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function b(F,A){return g?new OffscreenCanvas(F,A):xh("canvas")}function w(F,A,$,ve){let he=1;if((F.width>ve||F.height>ve)&&(he=ve/Math.max(F.width,F.height)),he<1||!0===A){if(typeof HTMLImageElement<"u"&&F instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&F instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&F instanceof ImageBitmap){const be=A?Wg:Math.floor,Ke=be(he*F.width),Se=be(he*F.height);void 0===_&&(_=b(Ke,Se));const Fe=$?b(Ke,Se):_;return Fe.width=Ke,Fe.height=Se,Fe.getContext("2d").drawImage(F,0,0,Ke,Se),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+F.width+"x"+F.height+") to ("+Ke+"x"+Se+")."),Fe}return"data"in F&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+F.width+"x"+F.height+")."),F}return F}function x(F){return Qb(F.width)&&Qb(F.height)}function T(F,A){return F.generateMipmaps&&A&&F.minFilter!==zn&&F.minFilter!==In}function E(F){n.generateMipmap(F)}function O(F,A,$,ve,he=!1){if(!1===a)return A;if(null!==F){if(void 0!==n[F])return n[F];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+F+"'")}let be=A;if(A===n.RED&&($===n.FLOAT&&(be=n.R32F),$===n.HALF_FLOAT&&(be=n.R16F),$===n.UNSIGNED_BYTE&&(be=n.R8)),A===n.RED_INTEGER&&($===n.UNSIGNED_BYTE&&(be=n.R8UI),$===n.UNSIGNED_SHORT&&(be=n.R16UI),$===n.UNSIGNED_INT&&(be=n.R32UI),$===n.BYTE&&(be=n.R8I),$===n.SHORT&&(be=n.R16I),$===n.INT&&(be=n.R32I)),A===n.RG&&($===n.FLOAT&&(be=n.RG32F),$===n.HALF_FLOAT&&(be=n.RG16F),$===n.UNSIGNED_BYTE&&(be=n.RG8)),A===n.RGBA){const Ke=he?Vg:Jt.getTransfer(ve);$===n.FLOAT&&(be=n.RGBA32F),$===n.HALF_FLOAT&&(be=n.RGBA16F),$===n.UNSIGNED_BYTE&&(be=Ke===_n?n.SRGB8_ALPHA8:n.RGBA8),$===n.UNSIGNED_SHORT_4_4_4_4&&(be=n.RGBA4),$===n.UNSIGNED_SHORT_5_5_5_1&&(be=n.RGB5_A1)}return(be===n.R16F||be===n.R32F||be===n.RG16F||be===n.RG32F||be===n.RGBA16F||be===n.RGBA32F)&&e.get("EXT_color_buffer_float"),be}function C(F,A,$){return!0===T(F,$)||F.isFramebufferTexture&&F.minFilter!==zn&&F.minFilter!==In?Math.log2(Math.max(A.width,A.height))+1:void 0!==F.mipmaps&&F.mipmaps.length>0?F.mipmaps.length:F.isCompressedTexture&&Array.isArray(F.image)?A.mipmaps.length:1}function I(F){return F===zn||1004===F||1005===F?n.NEAREST:n.LINEAR}function V(F){const A=F.target;A.removeEventListener("dispose",V),function J(F){const A=i.get(F);if(void 0===A.__webglInit)return;const $=F.source,ve=m.get($);if(ve){const he=ve[A.__cacheKey];he.usedTimes--,0===he.usedTimes&&k(F),0===Object.keys(ve).length&&m.delete($)}i.remove(F)}(A),A.isVideoTexture&&p.delete(A)}function X(F){const A=F.target;A.removeEventListener("dispose",X),function j(F){const A=F.texture,$=i.get(F),ve=i.get(A);if(void 0!==ve.__webglTexture&&(n.deleteTexture(ve.__webglTexture),o.memory.textures--),F.depthTexture&&F.depthTexture.dispose(),F.isWebGLCubeRenderTarget)for(let he=0;he<6;he++){if(Array.isArray($.__webglFramebuffer[he]))for(let be=0;be<$.__webglFramebuffer[he].length;be++)n.deleteFramebuffer($.__webglFramebuffer[he][be]);else n.deleteFramebuffer($.__webglFramebuffer[he]);$.__webglDepthbuffer&&n.deleteRenderbuffer($.__webglDepthbuffer[he])}else{if(Array.isArray($.__webglFramebuffer))for(let he=0;he<$.__webglFramebuffer.length;he++)n.deleteFramebuffer($.__webglFramebuffer[he]);else n.deleteFramebuffer($.__webglFramebuffer);if($.__webglDepthbuffer&&n.deleteRenderbuffer($.__webglDepthbuffer),$.__webglMultisampledFramebuffer&&n.deleteFramebuffer($.__webglMultisampledFramebuffer),$.__webglColorRenderbuffer)for(let he=0;he<$.__webglColorRenderbuffer.length;he++)$.__webglColorRenderbuffer[he]&&n.deleteRenderbuffer($.__webglColorRenderbuffer[he]);$.__webglDepthRenderbuffer&&n.deleteRenderbuffer($.__webglDepthRenderbuffer)}if(F.isWebGLMultipleRenderTargets)for(let he=0,be=A.length;he<be;he++){const Ke=i.get(A[he]);Ke.__webglTexture&&(n.deleteTexture(Ke.__webglTexture),o.memory.textures--),i.remove(A[he])}i.remove(A),i.remove(F)}(A)}function k(F){const A=i.get(F);n.deleteTexture(A.__webglTexture),delete m.get(F.source)[A.__cacheKey],o.memory.textures--}let Y=0;function se(F,A){const $=i.get(F);if(F.isVideoTexture&&function Mt(F){const A=o.render.frame;p.get(F)!==A&&(p.set(F,A),F.update())}(F),!1===F.isRenderTargetTexture&&F.version>0&&$.__version!==F.version){const ve=F.image;if(null===ve)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==ve.complete)return void wt($,F,A);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(n.TEXTURE_2D,$.__webglTexture,n.TEXTURE0+A)}const Me={[ka]:n.REPEAT,[Oi]:n.CLAMP_TO_EDGE,1002:n.MIRRORED_REPEAT},xe={[zn]:n.NEAREST,1004:n.NEAREST_MIPMAP_NEAREST,1005:n.NEAREST_MIPMAP_LINEAR,[In]:n.LINEAR,1007:n.LINEAR_MIPMAP_NEAREST,[ao]:n.LINEAR_MIPMAP_LINEAR},He={512:n.NEVER,519:n.ALWAYS,513:n.LESS,515:n.LEQUAL,514:n.EQUAL,518:n.GEQUAL,516:n.GREATER,517:n.NOTEQUAL};function Ge(F,A,$){if($?(n.texParameteri(F,n.TEXTURE_WRAP_S,Me[A.wrapS]),n.texParameteri(F,n.TEXTURE_WRAP_T,Me[A.wrapT]),(F===n.TEXTURE_3D||F===n.TEXTURE_2D_ARRAY)&&n.texParameteri(F,n.TEXTURE_WRAP_R,Me[A.wrapR]),n.texParameteri(F,n.TEXTURE_MAG_FILTER,xe[A.magFilter]),n.texParameteri(F,n.TEXTURE_MIN_FILTER,xe[A.minFilter])):(n.texParameteri(F,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(F,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(F===n.TEXTURE_3D||F===n.TEXTURE_2D_ARRAY)&&n.texParameteri(F,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(A.wrapS!==Oi||A.wrapT!==Oi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(F,n.TEXTURE_MAG_FILTER,I(A.magFilter)),n.texParameteri(F,n.TEXTURE_MIN_FILTER,I(A.minFilter)),A.minFilter!==zn&&A.minFilter!==In&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),A.compareFunction&&(n.texParameteri(F,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(F,n.TEXTURE_COMPARE_FUNC,He[A.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){const ve=e.get("EXT_texture_filter_anisotropic");if(A.magFilter===zn||1005!==A.minFilter&&A.minFilter!==ao||A.type===co&&!1===e.has("OES_texture_float_linear")||!1===a&&A.type===yh&&!1===e.has("OES_texture_half_float_linear"))return;(A.anisotropy>1||i.get(A).__currentAnisotropy)&&(n.texParameterf(F,ve.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(A.anisotropy,r.getMaxAnisotropy())),i.get(A).__currentAnisotropy=A.anisotropy)}}function Be(F,A){let $=!1;void 0===F.__webglInit&&(F.__webglInit=!0,A.addEventListener("dispose",V));const ve=A.source;let he=m.get(ve);void 0===he&&(he={},m.set(ve,he));const be=function Q(F){const A=[];return A.push(F.wrapS),A.push(F.wrapT),A.push(F.wrapR||0),A.push(F.magFilter),A.push(F.minFilter),A.push(F.anisotropy),A.push(F.internalFormat),A.push(F.format),A.push(F.type),A.push(F.generateMipmaps),A.push(F.premultiplyAlpha),A.push(F.flipY),A.push(F.unpackAlignment),A.push(F.colorSpace),A.join()}(A);if(be!==F.__cacheKey){void 0===he[be]&&(he[be]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,$=!0),he[be].usedTimes++;const Ke=he[F.__cacheKey];void 0!==Ke&&(he[F.__cacheKey].usedTimes--,0===Ke.usedTimes&&k(A)),F.__cacheKey=be,F.__webglTexture=he[be].texture}return $}function wt(F,A,$){let ve=n.TEXTURE_2D;(A.isDataArrayTexture||A.isCompressedArrayTexture)&&(ve=n.TEXTURE_2D_ARRAY),A.isData3DTexture&&(ve=n.TEXTURE_3D);const he=Be(F,A),be=A.source;t.bindTexture(ve,F.__webglTexture,n.TEXTURE0+$);const Ke=i.get(be);if(be.version!==Ke.__version||!0===he){t.activeTexture(n.TEXTURE0+$);const Se=Jt.getPrimaries(Jt.workingColorSpace),Fe=""===A.colorSpace?null:Jt.getPrimaries(A.colorSpace),B=""===A.colorSpace||Se===Fe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,A.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,A.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,A.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,B);const Ce=function S(F){return!a&&(F.wrapS!==Oi||F.wrapT!==Oi||F.minFilter!==zn&&F.minFilter!==In)}(A)&&!1===x(A.image);let le=w(A.image,Ce,!1,u);le=un(A,le);const lt=x(le)||a,nt=s.convert(A.format,A.colorSpace);let L,it=s.convert(A.type),Qe=O(A.internalFormat,nt,it,A.colorSpace,A.isVideoTexture);Ge(ve,A,lt);const De=A.mipmaps,Ee=a&&!0!==A.isVideoTexture,Pe=void 0===Ke.__version||!0===he,Ae=C(A,le,lt);if(A.isDepthTexture)Qe=n.DEPTH_COMPONENT,a?Qe=A.type===co?n.DEPTH_COMPONENT32F:A.type===Yo?n.DEPTH_COMPONENT24:A.type===Ba?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT16:A.type===co&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),A.format===Ua&&Qe===n.DEPTH_COMPONENT&&1012!==A.type&&A.type!==Yo&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),A.type=Yo,it=s.convert(A.type)),A.format===Hl&&Qe===n.DEPTH_COMPONENT&&(Qe=n.DEPTH_STENCIL,A.type!==Ba&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),A.type=Ba,it=s.convert(A.type))),Pe&&(Ee?t.texStorage2D(n.TEXTURE_2D,1,Qe,le.width,le.height):t.texImage2D(n.TEXTURE_2D,0,Qe,le.width,le.height,0,nt,it,null));else if(A.isDataTexture)if(De.length>0&&lt){Ee&&Pe&&t.texStorage2D(n.TEXTURE_2D,Ae,Qe,De[0].width,De[0].height);for(let de=0,Je=De.length;de<Je;de++)L=De[de],Ee?t.texSubImage2D(n.TEXTURE_2D,de,0,0,L.width,L.height,nt,it,L.data):t.texImage2D(n.TEXTURE_2D,de,Qe,L.width,L.height,0,nt,it,L.data);A.generateMipmaps=!1}else Ee?(Pe&&t.texStorage2D(n.TEXTURE_2D,Ae,Qe,le.width,le.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,le.width,le.height,nt,it,le.data)):t.texImage2D(n.TEXTURE_2D,0,Qe,le.width,le.height,0,nt,it,le.data);else if(A.isCompressedTexture)if(A.isCompressedArrayTexture){Ee&&Pe&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ae,Qe,De[0].width,De[0].height,le.depth);for(let de=0,Je=De.length;de<Je;de++)L=De[de],A.format!==Gr?null!==nt?Ee?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,de,0,0,0,L.width,L.height,le.depth,nt,L.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,de,Qe,L.width,L.height,le.depth,0,L.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ee?t.texSubImage3D(n.TEXTURE_2D_ARRAY,de,0,0,0,L.width,L.height,le.depth,nt,it,L.data):t.texImage3D(n.TEXTURE_2D_ARRAY,de,Qe,L.width,L.height,le.depth,0,nt,it,L.data)}else{Ee&&Pe&&t.texStorage2D(n.TEXTURE_2D,Ae,Qe,De[0].width,De[0].height);for(let de=0,Je=De.length;de<Je;de++)L=De[de],A.format!==Gr?null!==nt?Ee?t.compressedTexSubImage2D(n.TEXTURE_2D,de,0,0,L.width,L.height,nt,L.data):t.compressedTexImage2D(n.TEXTURE_2D,de,Qe,L.width,L.height,0,L.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ee?t.texSubImage2D(n.TEXTURE_2D,de,0,0,L.width,L.height,nt,it,L.data):t.texImage2D(n.TEXTURE_2D,de,Qe,L.width,L.height,0,nt,it,L.data)}else if(A.isDataArrayTexture)Ee?(Pe&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ae,Qe,le.width,le.height,le.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,le.width,le.height,le.depth,nt,it,le.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,Qe,le.width,le.height,le.depth,0,nt,it,le.data);else if(A.isData3DTexture)Ee?(Pe&&t.texStorage3D(n.TEXTURE_3D,Ae,Qe,le.width,le.height,le.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,le.width,le.height,le.depth,nt,it,le.data)):t.texImage3D(n.TEXTURE_3D,0,Qe,le.width,le.height,le.depth,0,nt,it,le.data);else if(A.isFramebufferTexture){if(Pe)if(Ee)t.texStorage2D(n.TEXTURE_2D,Ae,Qe,le.width,le.height);else{let de=le.width,Je=le.height;for(let dt=0;dt<Ae;dt++)t.texImage2D(n.TEXTURE_2D,dt,Qe,de,Je,0,nt,it,null),de>>=1,Je>>=1}}else if(De.length>0&&lt){Ee&&Pe&&t.texStorage2D(n.TEXTURE_2D,Ae,Qe,De[0].width,De[0].height);for(let de=0,Je=De.length;de<Je;de++)L=De[de],Ee?t.texSubImage2D(n.TEXTURE_2D,de,0,0,nt,it,L):t.texImage2D(n.TEXTURE_2D,de,Qe,nt,it,L);A.generateMipmaps=!1}else Ee?(Pe&&t.texStorage2D(n.TEXTURE_2D,Ae,Qe,le.width,le.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,nt,it,le)):t.texImage2D(n.TEXTURE_2D,0,Qe,nt,it,le);T(A,lt)&&E(ve),Ke.__version=be.version,A.onUpdate&&A.onUpdate(A)}F.__version=A.version}function Ye(F,A,$,ve,he,be){const Ke=s.convert($.format,$.colorSpace),Se=s.convert($.type),Fe=O($.internalFormat,Ke,Se,$.colorSpace);if(!i.get(A).__hasExternalTextures){const Ce=Math.max(1,A.width>>be),le=Math.max(1,A.height>>be);he===n.TEXTURE_3D||he===n.TEXTURE_2D_ARRAY?t.texImage3D(he,be,Fe,Ce,le,A.depth,0,Ke,Se,null):t.texImage2D(he,be,Fe,Ce,le,0,Ke,Se,null)}t.bindFramebuffer(n.FRAMEBUFFER,F),tt(A)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ve,he,i.get($).__webglTexture,0,je(A)):(he===n.TEXTURE_2D||he>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&he<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,ve,he,i.get($).__webglTexture,be),t.bindFramebuffer(n.FRAMEBUFFER,null)}function D(F,A,$){if(n.bindRenderbuffer(n.RENDERBUFFER,F),A.depthBuffer&&!A.stencilBuffer){let ve=!0===a?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if($||tt(A)){const he=A.depthTexture;he&&he.isDepthTexture&&(he.type===co?ve=n.DEPTH_COMPONENT32F:he.type===Yo&&(ve=n.DEPTH_COMPONENT24));const be=je(A);tt(A)?h.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,be,ve,A.width,A.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,be,ve,A.width,A.height)}else n.renderbufferStorage(n.RENDERBUFFER,ve,A.width,A.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,F)}else if(A.depthBuffer&&A.stencilBuffer){const ve=je(A);$&&!1===tt(A)?n.renderbufferStorageMultisample(n.RENDERBUFFER,ve,n.DEPTH24_STENCIL8,A.width,A.height):tt(A)?h.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ve,n.DEPTH24_STENCIL8,A.width,A.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,A.width,A.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,F)}else{const ve=!0===A.isWebGLMultipleRenderTargets?A.texture:[A.texture];for(let he=0;he<ve.length;he++){const be=ve[he],Ke=s.convert(be.format,be.colorSpace),Se=s.convert(be.type),Fe=O(be.internalFormat,Ke,Se,be.colorSpace),B=je(A);$&&!1===tt(A)?n.renderbufferStorageMultisample(n.RENDERBUFFER,B,Fe,A.width,A.height):tt(A)?h.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,B,Fe,A.width,A.height):n.renderbufferStorage(n.RENDERBUFFER,Fe,A.width,A.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function re(F){const A=i.get(F),$=!0===F.isWebGLCubeRenderTarget;if(F.depthTexture&&!A.__autoAllocateDepthBuffer){if($)throw new Error("target.depthTexture not supported in Cube render targets");!function me(F,A){if(A&&A.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,F),!A.depthTexture||!A.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(A.depthTexture).__webglTexture||A.depthTexture.image.width!==A.width||A.depthTexture.image.height!==A.height)&&(A.depthTexture.image.width=A.width,A.depthTexture.image.height=A.height,A.depthTexture.needsUpdate=!0),se(A.depthTexture,0);const ve=i.get(A.depthTexture).__webglTexture,he=je(A);if(A.depthTexture.format===Ua)tt(A)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ve,0,he):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ve,0);else{if(A.depthTexture.format!==Hl)throw new Error("Unknown depthTexture format");tt(A)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ve,0,he):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ve,0)}}(A.__webglFramebuffer,F)}else if($){A.__webglDepthbuffer=[];for(let ve=0;ve<6;ve++)t.bindFramebuffer(n.FRAMEBUFFER,A.__webglFramebuffer[ve]),A.__webglDepthbuffer[ve]=n.createRenderbuffer(),D(A.__webglDepthbuffer[ve],F,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,A.__webglFramebuffer),A.__webglDepthbuffer=n.createRenderbuffer(),D(A.__webglDepthbuffer,F,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function je(F){return Math.min(d,F.samples)}function tt(F){const A=i.get(F);return a&&F.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==A.__useRenderToTexture}function un(F,A){const $=F.colorSpace,ve=F.format,he=F.type;return!0===F.isCompressedTexture||!0===F.isVideoTexture||1035===F.format||$!==Mi&&""!==$&&(Jt.getTransfer($)===_n?!1===a?!0===e.has("EXT_sRGB")&&ve===Gr?(F.format=1035,F.minFilter=In,F.generateMipmaps=!1):A=AO.sRGBToLinear(A):(ve!==Gr||he!==qo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",$)),A}this.allocateTextureUnit=function ge(){const F=Y;return F>=c&&console.warn("THREE.WebGLTextures: Trying to use "+F+" texture units while this GPU supports only "+c),Y+=1,F},this.resetTextureUnits=function Z(){Y=0},this.setTexture2D=se,this.setTexture2DArray=function H(F,A){const $=i.get(F);F.version>0&&$.__version!==F.version?wt($,F,A):t.bindTexture(n.TEXTURE_2D_ARRAY,$.__webglTexture,n.TEXTURE0+A)},this.setTexture3D=function ee(F,A){const $=i.get(F);F.version>0&&$.__version!==F.version?wt($,F,A):t.bindTexture(n.TEXTURE_3D,$.__webglTexture,n.TEXTURE0+A)},this.setTextureCube=function ye(F,A){const $=i.get(F);F.version>0&&$.__version!==F.version?function At(F,A,$){if(6!==A.image.length)return;const ve=Be(F,A),he=A.source;t.bindTexture(n.TEXTURE_CUBE_MAP,F.__webglTexture,n.TEXTURE0+$);const be=i.get(he);if(he.version!==be.__version||!0===ve){t.activeTexture(n.TEXTURE0+$);const Ke=Jt.getPrimaries(Jt.workingColorSpace),Se=""===A.colorSpace?null:Jt.getPrimaries(A.colorSpace),Fe=""===A.colorSpace||Ke===Se?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,A.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,A.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,A.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Fe);const B=A.isCompressedTexture||A.image[0].isCompressedTexture,Ce=A.image[0]&&A.image[0].isDataTexture,le=[];for(let de=0;de<6;de++)le[de]=B||Ce?Ce?A.image[de].image:A.image[de]:w(A.image[de],!1,!0,l),le[de]=un(A,le[de]);const lt=le[0],nt=x(lt)||a,it=s.convert(A.format,A.colorSpace),Qe=s.convert(A.type),L=O(A.internalFormat,it,Qe,A.colorSpace),De=a&&!0!==A.isVideoTexture,Ee=void 0===be.__version||!0===ve;let Ae,Pe=C(A,lt,nt);if(Ge(n.TEXTURE_CUBE_MAP,A,nt),B){De&&Ee&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Pe,L,lt.width,lt.height);for(let de=0;de<6;de++){Ae=le[de].mipmaps;for(let Je=0;Je<Ae.length;Je++){const dt=Ae[Je];A.format!==Gr?null!==it?De?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,Je,0,0,dt.width,dt.height,it,dt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,Je,L,dt.width,dt.height,0,dt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):De?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,Je,0,0,dt.width,dt.height,it,Qe,dt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,Je,L,dt.width,dt.height,0,it,Qe,dt.data)}}}else{Ae=A.mipmaps,De&&Ee&&(Ae.length>0&&Pe++,t.texStorage2D(n.TEXTURE_CUBE_MAP,Pe,L,le[0].width,le[0].height));for(let de=0;de<6;de++)if(Ce){De?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,0,0,0,le[de].width,le[de].height,it,Qe,le[de].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,0,L,le[de].width,le[de].height,0,it,Qe,le[de].data);for(let Je=0;Je<Ae.length;Je++){const Yn=Ae[Je].image[de].image;De?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,Je+1,0,0,Yn.width,Yn.height,it,Qe,Yn.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,Je+1,L,Yn.width,Yn.height,0,it,Qe,Yn.data)}}else{De?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,0,0,0,it,Qe,le[de]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,0,L,it,Qe,le[de]);for(let Je=0;Je<Ae.length;Je++){const dt=Ae[Je];De?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,Je+1,0,0,it,Qe,dt.image[de]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+de,Je+1,L,it,Qe,dt.image[de])}}}T(A,nt)&&E(n.TEXTURE_CUBE_MAP),be.__version=he.version,A.onUpdate&&A.onUpdate(A)}F.__version=A.version}($,F,A):t.bindTexture(n.TEXTURE_CUBE_MAP,$.__webglTexture,n.TEXTURE0+A)},this.rebindTextures=function we(F,A,$){const ve=i.get(F);void 0!==A&&Ye(ve.__webglFramebuffer,F,F.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),void 0!==$&&re(F)},this.setupRenderTarget=function ce(F){const A=F.texture,$=i.get(F),ve=i.get(A);F.addEventListener("dispose",X),!0!==F.isWebGLMultipleRenderTargets&&(void 0===ve.__webglTexture&&(ve.__webglTexture=n.createTexture()),ve.__version=A.version,o.memory.textures++);const he=!0===F.isWebGLCubeRenderTarget,be=!0===F.isWebGLMultipleRenderTargets,Ke=x(F)||a;if(he){$.__webglFramebuffer=[];for(let Se=0;Se<6;Se++)if(a&&A.mipmaps&&A.mipmaps.length>0){$.__webglFramebuffer[Se]=[];for(let Fe=0;Fe<A.mipmaps.length;Fe++)$.__webglFramebuffer[Se][Fe]=n.createFramebuffer()}else $.__webglFramebuffer[Se]=n.createFramebuffer()}else{if(a&&A.mipmaps&&A.mipmaps.length>0){$.__webglFramebuffer=[];for(let Se=0;Se<A.mipmaps.length;Se++)$.__webglFramebuffer[Se]=n.createFramebuffer()}else $.__webglFramebuffer=n.createFramebuffer();if(be)if(r.drawBuffers){const Se=F.texture;for(let Fe=0,B=Se.length;Fe<B;Fe++){const Ce=i.get(Se[Fe]);void 0===Ce.__webglTexture&&(Ce.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&F.samples>0&&!1===tt(F)){const Se=be?A:[A];$.__webglMultisampledFramebuffer=n.createFramebuffer(),$.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,$.__webglMultisampledFramebuffer);for(let Fe=0;Fe<Se.length;Fe++){const B=Se[Fe];$.__webglColorRenderbuffer[Fe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,$.__webglColorRenderbuffer[Fe]);const Ce=s.convert(B.format,B.colorSpace),le=s.convert(B.type),lt=O(B.internalFormat,Ce,le,B.colorSpace,!0===F.isXRRenderTarget),nt=je(F);n.renderbufferStorageMultisample(n.RENDERBUFFER,nt,lt,F.width,F.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Fe,n.RENDERBUFFER,$.__webglColorRenderbuffer[Fe])}n.bindRenderbuffer(n.RENDERBUFFER,null),F.depthBuffer&&($.__webglDepthRenderbuffer=n.createRenderbuffer(),D($.__webglDepthRenderbuffer,F,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(he){t.bindTexture(n.TEXTURE_CUBE_MAP,ve.__webglTexture),Ge(n.TEXTURE_CUBE_MAP,A,Ke);for(let Se=0;Se<6;Se++)if(a&&A.mipmaps&&A.mipmaps.length>0)for(let Fe=0;Fe<A.mipmaps.length;Fe++)Ye($.__webglFramebuffer[Se][Fe],F,A,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,Fe);else Ye($.__webglFramebuffer[Se],F,A,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,0);T(A,Ke)&&E(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(be){const Se=F.texture;for(let Fe=0,B=Se.length;Fe<B;Fe++){const Ce=Se[Fe],le=i.get(Ce);t.bindTexture(n.TEXTURE_2D,le.__webglTexture),Ge(n.TEXTURE_2D,Ce,Ke),Ye($.__webglFramebuffer,F,Ce,n.COLOR_ATTACHMENT0+Fe,n.TEXTURE_2D,0),T(Ce,Ke)&&E(n.TEXTURE_2D)}t.unbindTexture()}else{let Se=n.TEXTURE_2D;if((F.isWebGL3DRenderTarget||F.isWebGLArrayRenderTarget)&&(a?Se=F.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Se,ve.__webglTexture),Ge(Se,A,Ke),a&&A.mipmaps&&A.mipmaps.length>0)for(let Fe=0;Fe<A.mipmaps.length;Fe++)Ye($.__webglFramebuffer[Fe],F,A,n.COLOR_ATTACHMENT0,Se,Fe);else Ye($.__webglFramebuffer,F,A,n.COLOR_ATTACHMENT0,Se,0);T(A,Ke)&&E(Se),t.unbindTexture()}F.depthBuffer&&re(F)},this.updateRenderTargetMipmap=function Ze(F){const A=x(F)||a,$=!0===F.isWebGLMultipleRenderTargets?F.texture:[F.texture];for(let ve=0,he=$.length;ve<he;ve++){const be=$[ve];if(T(be,A)){const Ke=F.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Se=i.get(be).__webglTexture;t.bindTexture(Ke,Se),E(Ke),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function ze(F){if(a&&F.samples>0&&!1===tt(F)){const A=F.isWebGLMultipleRenderTargets?F.texture:[F.texture],$=F.width,ve=F.height;let he=n.COLOR_BUFFER_BIT;const be=[],Ke=F.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Se=i.get(F),Fe=!0===F.isWebGLMultipleRenderTargets;if(Fe)for(let B=0;B<A.length;B++)t.bindFramebuffer(n.FRAMEBUFFER,Se.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+B,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Se.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+B,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Se.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Se.__webglFramebuffer);for(let B=0;B<A.length;B++){be.push(n.COLOR_ATTACHMENT0+B),F.depthBuffer&&be.push(Ke);const Ce=void 0!==Se.__ignoreDepthValues&&Se.__ignoreDepthValues;if(!1===Ce&&(F.depthBuffer&&(he|=n.DEPTH_BUFFER_BIT),F.stencilBuffer&&(he|=n.STENCIL_BUFFER_BIT)),Fe&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Se.__webglColorRenderbuffer[B]),!0===Ce&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[Ke]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[Ke])),Fe){const le=i.get(A[B]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,le,0)}n.blitFramebuffer(0,0,$,ve,0,0,$,ve,he,n.NEAREST),f&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,be)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Fe)for(let B=0;B<A.length;B++){t.bindFramebuffer(n.FRAMEBUFFER,Se.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+B,n.RENDERBUFFER,Se.__webglColorRenderbuffer[B]);const Ce=i.get(A[B]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Se.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+B,n.TEXTURE_2D,Ce,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Se.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=re,this.setupFrameBufferTexture=Ye,this.useMultisampledRTT=tt}function MJ(n,e,t){const i=t.isWebGL2;return{convert:function r(s,o=""){let a;const c=Jt.getTransfer(o);if(s===qo)return n.UNSIGNED_BYTE;if(1017===s)return n.UNSIGNED_SHORT_4_4_4_4;if(1018===s)return n.UNSIGNED_SHORT_5_5_5_1;if(1010===s)return n.BYTE;if(1011===s)return n.SHORT;if(1012===s)return n.UNSIGNED_SHORT;if(1013===s)return n.INT;if(s===Yo)return n.UNSIGNED_INT;if(s===co)return n.FLOAT;if(s===yh)return i?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===s)return n.ALPHA;if(s===Gr)return n.RGBA;if(1024===s)return n.LUMINANCE;if(1025===s)return n.LUMINANCE_ALPHA;if(s===Ua)return n.DEPTH_COMPONENT;if(s===Hl)return n.DEPTH_STENCIL;if(1035===s)return a=e.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1028===s)return n.RED;if(1029===s)return n.RED_INTEGER;if(1030===s)return n.RG;if(1031===s)return n.RG_INTEGER;if(1033===s)return n.RGBA_INTEGER;if(33776===s||33777===s||33778===s||33779===s)if(c===_n){if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(33776===s)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=e.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(33776===s)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(a=e.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===s)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return a=e.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===s||37496===s){if(a=e.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===s)return c===_n?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===s)return c===_n?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s){if(a=e.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===s)return c===_n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===s)return c===_n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===s)return c===_n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===s)return c===_n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===s)return c===_n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===s)return c===_n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===s)return c===_n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===s)return c===_n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===s)return c===_n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===s)return c===_n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===s)return c===_n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===s)return c===_n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===s)return c===_n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===s)return c===_n?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===s||36494===s||36495===s){if(a=e.get("EXT_texture_compression_bptc"),null===a)return null;if(36492===s)return c===_n?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(36494===s)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(36495===s)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(36283===s||36284===s||36285===s||36286===s){if(a=e.get("EXT_texture_compression_rgtc"),null===a)return null;if(36492===s)return a.COMPRESSED_RED_RGTC1_EXT;if(36284===s)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===s)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===s)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return s===Ba?i?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==n[s]?n[s]:null}}}class SJ extends gi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class ia extends hi{constructor(){super(),this.isGroup=!0,this.type="Group"}}const CJ={type:"move"};class E1{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new ia,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new ia,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new R,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new R),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new ia,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new R,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new R),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,c=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){o=!0;for(const _ of e.hand.values()){const m=t.getJointPose(_,i),g=this._getHandJoint(l,_);null!==m&&(g.matrix.fromArray(m.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=m.radius),g.visible=null!==m}const h=l.joints["index-finger-tip"].position.distanceTo(l.joints["thumb-tip"].position),f=.02,p=.005;l.inputState.pinching&&h>f+p?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&h<=f-p&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==c&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),null!==s&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,i),null===r&&null!==s&&(r=s),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(CJ)))}return null!==a&&(a.visible=null!==r),null!==c&&(c.visible=null!==s),null!==l&&(l.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const i=new ia;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class EJ extends us{constructor(e,t,i,r,s,o,a,c,l,u){if((u=void 0!==u?u:Ua)!==Ua&&u!==Hl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&u===Ua&&(i=Yo),void 0===i&&u===Hl&&(i=Ba),super(null,r,s,o,a,c,u,i,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:zn,this.minFilter=void 0!==c?c:zn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class TJ extends Xo{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",c=1,l=null,u=null,d=null,h=null,f=null,p=null;const _=t.getContextAttributes();let m=null,g=null;const b=[],w=[],x=new gi;x.layers.enable(1),x.viewport=new on;const S=new gi;S.layers.enable(2),S.viewport=new on;const T=[x,S],E=new SJ;E.layers.enable(1),E.layers.enable(2);let O=null,C=null;function I(H){const ee=w.indexOf(H.inputSource);if(-1===ee)return;const ye=b[ee];void 0!==ye&&(ye.update(H.inputSource,H.frame,l||o),ye.dispatchEvent({type:H.type,data:H.inputSource}))}function V(){r.removeEventListener("select",I),r.removeEventListener("selectstart",I),r.removeEventListener("selectend",I),r.removeEventListener("squeeze",I),r.removeEventListener("squeezestart",I),r.removeEventListener("squeezeend",I),r.removeEventListener("end",V),r.removeEventListener("inputsourceschange",X);for(let H=0;H<b.length;H++){const ee=w[H];null!==ee&&(w[H]=null,b[H].disconnect(ee))}O=null,C=null,e.setRenderTarget(m),f=null,h=null,d=null,r=null,g=null,se.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function X(H){for(let ee=0;ee<H.removed.length;ee++){const ye=H.removed[ee],Me=w.indexOf(ye);Me>=0&&(w[Me]=null,b[Me].disconnect(ye))}for(let ee=0;ee<H.added.length;ee++){const ye=H.added[ee];let Me=w.indexOf(ye);if(-1===Me){for(let He=0;He<b.length;He++){if(He>=w.length){w.push(ye),Me=He;break}if(null===w[He]){w[He]=ye,Me=He;break}}if(-1===Me)break}const xe=b[Me];xe&&xe.connect(ye)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(H){let ee=b[H];return void 0===ee&&(ee=new E1,b[H]=ee),ee.getTargetRaySpace()},this.getControllerGrip=function(H){let ee=b[H];return void 0===ee&&(ee=new E1,b[H]=ee),ee.getGripSpace()},this.getHand=function(H){let ee=b[H];return void 0===ee&&(ee=new E1,b[H]=ee),ee.getHandSpace()},this.setFramebufferScaleFactor=function(H){s=H,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(H){a=H,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(H){l=H},this.getBaseLayer=function(){return null!==h?h:f},this.getBinding=function(){return d},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=function(){var H=Ll(function*(ee){if(r=ee,null!==r){if(m=e.getRenderTarget(),r.addEventListener("select",I),r.addEventListener("selectstart",I),r.addEventListener("selectend",I),r.addEventListener("squeeze",I),r.addEventListener("squeezestart",I),r.addEventListener("squeezeend",I),r.addEventListener("end",V),r.addEventListener("inputsourceschange",X),!0!==_.xrCompatible&&(yield t.makeXRCompatible()),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2)f=new XRWebGLLayer(r,t,{antialias:void 0!==r.renderState.layers||_.antialias,alpha:!0,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:f}),g=new Ga(f.framebufferWidth,f.framebufferHeight,{format:Gr,type:qo,colorSpace:e.outputColorSpace,stencilBuffer:_.stencil});else{let ye=null,Me=null,xe=null;_.depth&&(xe=_.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ye=_.stencil?Hl:Ua,Me=_.stencil?Ba:Yo);const He={colorFormat:t.RGBA8,depthFormat:xe,scaleFactor:s};d=new XRWebGLBinding(r,t),h=d.createProjectionLayer(He),r.updateRenderState({layers:[h]}),g=new Ga(h.textureWidth,h.textureHeight,{format:Gr,type:qo,depthTexture:new EJ(h.textureWidth,h.textureHeight,Me,void 0,void 0,void 0,void 0,void 0,void 0,ye),stencilBuffer:_.stencil,colorSpace:e.outputColorSpace,samples:_.antialias?4:0}),e.properties.get(g).__ignoreDepthValues=h.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(c),l=null,o=yield r.requestReferenceSpace(a),se.setContext(r),se.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function(ee){return H.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode};const J=new R,k=new R;function Y(H,ee){null===ee?H.matrixWorld.copy(H.matrix):H.matrixWorld.multiplyMatrices(ee.matrixWorld,H.matrix),H.matrixWorldInverse.copy(H.matrixWorld).invert()}this.updateCamera=function(H){if(null===r)return;E.near=S.near=x.near=H.near,E.far=S.far=x.far=H.far,(O!==E.near||C!==E.far)&&(r.updateRenderState({depthNear:E.near,depthFar:E.far}),O=E.near,C=E.far);const ee=H.parent,ye=E.cameras;Y(E,ee);for(let Me=0;Me<ye.length;Me++)Y(ye[Me],ee);2===ye.length?function j(H,ee,ye){J.setFromMatrixPosition(ee.matrixWorld),k.setFromMatrixPosition(ye.matrixWorld);const Me=J.distanceTo(k),xe=ee.projectionMatrix.elements,He=ye.projectionMatrix.elements,Ge=xe[14]/(xe[10]-1),Be=xe[14]/(xe[10]+1),wt=(xe[9]+1)/xe[5],At=(xe[9]-1)/xe[5],Ye=(xe[8]-1)/xe[0],D=(He[8]+1)/He[0],me=Ge*Ye,re=Ge*D,we=Me/(-Ye+D),ce=we*-Ye;ee.matrixWorld.decompose(H.position,H.quaternion,H.scale),H.translateX(ce),H.translateZ(we),H.matrixWorld.compose(H.position,H.quaternion,H.scale),H.matrixWorldInverse.copy(H.matrixWorld).invert();const Ze=Ge+we,ze=Be+we;H.projectionMatrix.makePerspective(me-ce,re+(Me-ce),wt*Be/ze*Ze,At*Be/ze*Ze,Ze,ze),H.projectionMatrixInverse.copy(H.projectionMatrix).invert()}(E,x,S):E.projectionMatrix.copy(x.projectionMatrix),function Z(H,ee,ye){null===ye?H.matrix.copy(ee.matrixWorld):(H.matrix.copy(ye.matrixWorld),H.matrix.invert(),H.matrix.multiply(ee.matrixWorld)),H.matrix.decompose(H.position,H.quaternion,H.scale),H.updateMatrixWorld(!0),H.projectionMatrix.copy(ee.projectionMatrix),H.projectionMatrixInverse.copy(ee.projectionMatrixInverse),H.isPerspectiveCamera&&(H.fov=2*Wl*Math.atan(1/H.projectionMatrix.elements[5]),H.zoom=1)}(H,E,ee)},this.getCamera=function(){return E},this.getFoveation=function(){if(null!==h||null!==f)return c},this.setFoveation=function(H){c=H,null!==h&&(h.fixedFoveation=H),null!==f&&void 0!==f.fixedFoveation&&(f.fixedFoveation=H)};let ge=null;const se=new YO;se.setAnimationLoop(function Q(H,ee){if(u=ee.getViewerPose(l||o),p=ee,null!==u){const ye=u.views;null!==f&&(e.setRenderTargetFramebuffer(g,f.framebuffer),e.setRenderTarget(g));let Me=!1;ye.length!==E.cameras.length&&(E.cameras.length=0,Me=!0);for(let xe=0;xe<ye.length;xe++){const He=ye[xe];let Ge=null;if(null!==f)Ge=f.getViewport(He);else{const wt=d.getViewSubImage(h,He);Ge=wt.viewport,0===xe&&(e.setRenderTargetTextures(g,wt.colorTexture,h.ignoreDepthValues?void 0:wt.depthStencilTexture),e.setRenderTarget(g))}let Be=T[xe];void 0===Be&&(Be=new gi,Be.layers.enable(xe),Be.viewport=new on,T[xe]=Be),Be.matrix.fromArray(He.transform.matrix),Be.matrix.decompose(Be.position,Be.quaternion,Be.scale),Be.projectionMatrix.fromArray(He.projectionMatrix),Be.projectionMatrixInverse.copy(Be.projectionMatrix).invert(),Be.viewport.set(Ge.x,Ge.y,Ge.width,Ge.height),0===xe&&(E.matrix.copy(Be.matrix),E.matrix.decompose(E.position,E.quaternion,E.scale)),!0===Me&&E.cameras.push(Be)}}for(let ye=0;ye<b.length;ye++){const Me=w[ye],xe=b[ye];null!==Me&&void 0!==xe&&xe.update(Me,ee,l||o)}ge&&ge(H,ee),ee.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:ee}),p=null}),this.setAnimationLoop=function(H){ge=H},this.dispose=function(){}}}function DJ(n,e){function t(m,g){!0===m.matrixAutoUpdate&&m.updateMatrix(),g.value.copy(m.matrix)}function s(m,g){m.opacity.value=g.opacity,g.color&&m.diffuse.value.copy(g.color),g.emissive&&m.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(m.map.value=g.map,t(g.map,m.mapTransform)),g.alphaMap&&(m.alphaMap.value=g.alphaMap,t(g.alphaMap,m.alphaMapTransform)),g.bumpMap&&(m.bumpMap.value=g.bumpMap,t(g.bumpMap,m.bumpMapTransform),m.bumpScale.value=g.bumpScale,1===g.side&&(m.bumpScale.value*=-1)),g.normalMap&&(m.normalMap.value=g.normalMap,t(g.normalMap,m.normalMapTransform),m.normalScale.value.copy(g.normalScale),1===g.side&&m.normalScale.value.negate()),g.displacementMap&&(m.displacementMap.value=g.displacementMap,t(g.displacementMap,m.displacementMapTransform),m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias),g.emissiveMap&&(m.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,m.emissiveMapTransform)),g.specularMap&&(m.specularMap.value=g.specularMap,t(g.specularMap,m.specularMapTransform)),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);const b=e.get(g).envMap;if(b&&(m.envMap.value=b,m.flipEnvMap.value=b.isCubeTexture&&!1===b.isRenderTargetTexture?-1:1,m.reflectivity.value=g.reflectivity,m.ior.value=g.ior,m.refractionRatio.value=g.refractionRatio),g.lightMap){m.lightMap.value=g.lightMap;const w=!0===n._useLegacyLights?Math.PI:1;m.lightMapIntensity.value=g.lightMapIntensity*w,t(g.lightMap,m.lightMapTransform)}g.aoMap&&(m.aoMap.value=g.aoMap,m.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,m.aoMapTransform))}return{refreshFogUniforms:function i(m,g){g.color.getRGB(m.fogColor.value,qO(n)),g.isFog?(m.fogNear.value=g.near,m.fogFar.value=g.far):g.isFogExp2&&(m.fogDensity.value=g.density)},refreshMaterialUniforms:function r(m,g,b,w,x){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(m,g):g.isMeshToonMaterial?(s(m,g),function d(m,g){g.gradientMap&&(m.gradientMap.value=g.gradientMap)}(m,g)):g.isMeshPhongMaterial?(s(m,g),function u(m,g){m.specular.value.copy(g.specular),m.shininess.value=Math.max(g.shininess,1e-4)}(m,g)):g.isMeshStandardMaterial?(s(m,g),function h(m,g){m.metalness.value=g.metalness,g.metalnessMap&&(m.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,m.metalnessMapTransform)),m.roughness.value=g.roughness,g.roughnessMap&&(m.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,m.roughnessMapTransform)),e.get(g).envMap&&(m.envMapIntensity.value=g.envMapIntensity)}(m,g),g.isMeshPhysicalMaterial&&function f(m,g,b){m.ior.value=g.ior,g.sheen>0&&(m.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),m.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(m.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,m.sheenColorMapTransform)),g.sheenRoughnessMap&&(m.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,m.sheenRoughnessMapTransform))),g.clearcoat>0&&(m.clearcoat.value=g.clearcoat,m.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(m.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,m.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,m.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(m.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,m.clearcoatNormalMapTransform),m.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),1===g.side&&m.clearcoatNormalScale.value.negate())),g.iridescence>0&&(m.iridescence.value=g.iridescence,m.iridescenceIOR.value=g.iridescenceIOR,m.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(m.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,m.iridescenceMapTransform)),g.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,m.iridescenceThicknessMapTransform))),g.transmission>0&&(m.transmission.value=g.transmission,m.transmissionSamplerMap.value=b.texture,m.transmissionSamplerSize.value.set(b.width,b.height),g.transmissionMap&&(m.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,m.transmissionMapTransform)),m.thickness.value=g.thickness,g.thicknessMap&&(m.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,m.thicknessMapTransform)),m.attenuationDistance.value=g.attenuationDistance,m.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(m.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(m.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,m.anisotropyMapTransform))),m.specularIntensity.value=g.specularIntensity,m.specularColor.value.copy(g.specularColor),g.specularColorMap&&(m.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,m.specularColorMapTransform)),g.specularIntensityMap&&(m.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,m.specularIntensityMapTransform))}(m,g,x)):g.isMeshMatcapMaterial?(s(m,g),function p(m,g){g.matcap&&(m.matcap.value=g.matcap)}(m,g)):g.isMeshDepthMaterial?s(m,g):g.isMeshDistanceMaterial?(s(m,g),function _(m,g){const b=e.get(g).light;m.referencePosition.value.setFromMatrixPosition(b.matrixWorld),m.nearDistance.value=b.shadow.camera.near,m.farDistance.value=b.shadow.camera.far}(m,g)):g.isMeshNormalMaterial?s(m,g):g.isLineBasicMaterial?(function o(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,g.map&&(m.map.value=g.map,t(g.map,m.mapTransform))}(m,g),g.isLineDashedMaterial&&function a(m,g){m.dashSize.value=g.dashSize,m.totalSize.value=g.dashSize+g.gapSize,m.scale.value=g.scale}(m,g)):g.isPointsMaterial?function c(m,g,b,w){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.size.value=g.size*b,m.scale.value=.5*w,g.map&&(m.map.value=g.map,t(g.map,m.uvTransform)),g.alphaMap&&(m.alphaMap.value=g.alphaMap,t(g.alphaMap,m.alphaMapTransform)),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest)}(m,g,b,w):g.isSpriteMaterial?function l(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.rotation.value=g.rotation,g.map&&(m.map.value=g.map,t(g.map,m.mapTransform)),g.alphaMap&&(m.alphaMap.value=g.alphaMap,t(g.alphaMap,m.alphaMapTransform)),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest)}(m,g):g.isShadowMaterial?(m.color.value.copy(g.color),m.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}}}function AJ(n,e,t,i){let r={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function f(b,w,x){const S=b.value;if(void 0===x[w]){if("number"==typeof S)x[w]=S;else{const T=Array.isArray(S)?S:[S],E=[];for(let O=0;O<T.length;O++)E.push(T[O].clone());x[w]=E}return!0}if("number"==typeof S){if(x[w]!==S)return x[w]=S,!0}else{const T=Array.isArray(x[w])?x[w]:[x[w]],E=Array.isArray(S)?S:[S];for(let O=0;O<T.length;O++){const C=T[O];if(!1===C.equals(E[O]))return C.copy(E[O]),!0}}return!1}function _(b){const w={boundary:0,storage:0};return"number"==typeof b?(w.boundary=4,w.storage=4):b.isVector2?(w.boundary=8,w.storage=8):b.isVector3||b.isColor?(w.boundary=16,w.storage=12):b.isVector4?(w.boundary=16,w.storage=16):b.isMatrix3?(w.boundary=48,w.storage=48):b.isMatrix4?(w.boundary=64,w.storage=64):b.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",b),w}function m(b){const w=b.target;w.removeEventListener("dispose",m);const x=o.indexOf(w.__bindingPointIndex);o.splice(x,1),n.deleteBuffer(r[w.id]),delete r[w.id],delete s[w.id]}return{bind:function c(b,w){i.uniformBlockBinding(b,w.program)},update:function l(b,w){let x=r[b.id];void 0===x&&(function p(b){const w=b.uniforms;let x=0;let T=0;for(let E=0,O=w.length;E<O;E++){const C=w[E],I={boundary:0,storage:0},V=Array.isArray(C.value)?C.value:[C.value];for(let X=0,J=V.length;X<J;X++){const j=_(V[X]);I.boundary+=j.boundary,I.storage+=j.storage}C.__data=new Float32Array(I.storage/Float32Array.BYTES_PER_ELEMENT),C.__offset=x,E>0&&(T=x%16,0!==T&&16-T-I.boundary<0&&(x+=16-T,C.__offset=x)),x+=I.storage}T=x%16,T>0&&(x+=16-T),b.__size=x,b.__cache={}}(b),x=function u(b){const w=function d(){for(let b=0;b<a;b++)if(-1===o.indexOf(b))return o.push(b),b;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();b.__bindingPointIndex=w;const x=n.createBuffer(),S=b.__size,T=b.usage;return n.bindBuffer(n.UNIFORM_BUFFER,x),n.bufferData(n.UNIFORM_BUFFER,S,T),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,w,x),x}(b),r[b.id]=x,b.addEventListener("dispose",m)),i.updateUBOMapping(b,w.program);const T=e.render.frame;s[b.id]!==T&&(function h(b){const x=b.uniforms,S=b.__cache;n.bindBuffer(n.UNIFORM_BUFFER,r[b.id]);for(let T=0,E=x.length;T<E;T++){const O=x[T];if(!0===f(O,T,S)){const C=O.__offset,I=Array.isArray(O.value)?O.value:[O.value];let V=0;for(let X=0;X<I.length;X++){const J=I[X],k=_(J);"number"==typeof J?(O.__data[0]=J,n.bufferSubData(n.UNIFORM_BUFFER,C+V,O.__data)):J.isMatrix3?(O.__data[0]=J.elements[0],O.__data[1]=J.elements[1],O.__data[2]=J.elements[2],O.__data[3]=J.elements[0],O.__data[4]=J.elements[3],O.__data[5]=J.elements[4],O.__data[6]=J.elements[5],O.__data[7]=J.elements[0],O.__data[8]=J.elements[6],O.__data[9]=J.elements[7],O.__data[10]=J.elements[8],O.__data[11]=J.elements[0]):(J.toArray(O.__data,V),V+=k.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,C,O.__data)}}n.bindBuffer(n.UNIFORM_BUFFER,null)}(b),s[b.id]=T)},dispose:function g(){for(const b in r)n.deleteBuffer(r[b]);o=[],r={},s={}}}}class MP{constructor(e={}){const{canvas:t=l$(),context:i=null,depth:r=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:l=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1}=e;let h;this.isWebGLRenderer=!0,h=null!==i?i.getContextAttributes().alpha:o;const f=new Uint32Array(4),p=new Int32Array(4);let _=null,m=null;const g=[],b=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Cn,this._useLegacyLights=!1,this.toneMapping=Wo,this.toneMappingExposure=1;const w=this;let x=!1,S=0,T=0,E=null,O=-1,C=null;const I=new on,V=new on;let X=null;const J=new Ne(0);let k=0,j=t.width,Y=t.height,Z=1,ge=null,Q=null;const se=new on(0,0,j,Y),H=new on(0,0,j,Y);let ee=!1;const ye=new b1;let Me=!1,xe=!1,He=null;const Ge=new ht,Be=new ie,wt=new R,At={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ye(){return null===E?Z:1}let re,we,ce,Ze,ze,je,tt,Mt,un,F,A,$,ve,he,be,Ke,Se,Fe,B,Ce,le,lt,nt,it,D=i;function me(N,W){for(let te=0;te<N.length;te++){const ne=t.getContext(N[te],W);if(null!==ne)return ne}return null}try{const N={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:c,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r157"),t.addEventListener("webglcontextlost",De,!1),t.addEventListener("webglcontextrestored",Ee,!1),t.addEventListener("webglcontextcreationerror",Pe,!1),null===D){const W=["webgl2","webgl","experimental-webgl"];if(!0===w.isWebGL1Renderer&&W.shift(),D=me(W,N),null===D)throw me(W)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&D instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===D.getShaderPrecisionFormat&&(D.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(N){throw console.error("THREE.WebGLRenderer: "+N.message),N}function Qe(){re=new zY(D),we=new LY(D,re,e),re.init(we),lt=new MJ(D,re,we),ce=new wJ(D,re,we),Ze=new WY(D),ze=new lJ,je=new xJ(D,re,ce,ze,we,lt,Ze),tt=new BY(w),Mt=new HY(w),un=new F$(D,we),nt=new NY(D,re,un,we),F=new GY(D,un,Ze,nt),A=new XY(D,F,un,Ze),B=new YY(D,we,je),Ke=new kY(ze),$=new cJ(w,tt,Mt,re,we,nt,Ke),ve=new DJ(w,ze),he=new dJ,be=new _J(re,we),Fe=new PY(w,tt,Mt,ce,A,h,c),Se=new bJ(w,A,we),it=new AJ(D,Ze,we,ce),Ce=new FY(D,re,Ze,we),le=new jY(D,re,Ze,we),Ze.programs=$.programs,w.capabilities=we,w.extensions=re,w.properties=ze,w.renderLists=he,w.shadowMap=Se,w.state=ce,w.info=Ze}Qe();const L=new TJ(w,D);function De(N){N.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function Ee(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1;const N=Ze.autoReset,W=Se.enabled,te=Se.autoUpdate,q=Se.needsUpdate,ne=Se.type;Qe(),Ze.autoReset=N,Se.enabled=W,Se.autoUpdate=te,Se.needsUpdate=q,Se.type=ne}function Pe(N){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",N.statusMessage)}function Ae(N){const W=N.target;W.removeEventListener("dispose",Ae),function de(N){(function Je(N){const W=ze.get(N).programs;void 0!==W&&(W.forEach(function(te){$.releaseProgram(te)}),N.isShaderMaterial&&$.releaseShaderCache(N))})(N),ze.remove(N)}(W)}this.xr=L,this.getContext=function(){return D},this.getContextAttributes=function(){return D.getContextAttributes()},this.forceContextLoss=function(){const N=re.get("WEBGL_lose_context");N&&N.loseContext()},this.forceContextRestore=function(){const N=re.get("WEBGL_lose_context");N&&N.restoreContext()},this.getPixelRatio=function(){return Z},this.setPixelRatio=function(N){void 0!==N&&(Z=N,this.setSize(j,Y,!1))},this.getSize=function(N){return N.set(j,Y)},this.setSize=function(N,W,te=!0){L.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(j=N,Y=W,t.width=Math.floor(N*Z),t.height=Math.floor(W*Z),!0===te&&(t.style.width=N+"px",t.style.height=W+"px"),this.setViewport(0,0,N,W))},this.getDrawingBufferSize=function(N){return N.set(j*Z,Y*Z).floor()},this.setDrawingBufferSize=function(N,W,te){j=N,Y=W,Z=te,t.width=Math.floor(N*te),t.height=Math.floor(W*te),this.setViewport(0,0,N,W)},this.getCurrentViewport=function(N){return N.copy(I)},this.getViewport=function(N){return N.copy(se)},this.setViewport=function(N,W,te,q){N.isVector4?se.set(N.x,N.y,N.z,N.w):se.set(N,W,te,q),ce.viewport(I.copy(se).multiplyScalar(Z).floor())},this.getScissor=function(N){return N.copy(H)},this.setScissor=function(N,W,te,q){N.isVector4?H.set(N.x,N.y,N.z,N.w):H.set(N,W,te,q),ce.scissor(V.copy(H).multiplyScalar(Z).floor())},this.getScissorTest=function(){return ee},this.setScissorTest=function(N){ce.setScissorTest(ee=N)},this.setOpaqueSort=function(N){ge=N},this.setTransparentSort=function(N){Q=N},this.getClearColor=function(N){return N.copy(Fe.getClearColor())},this.setClearColor=function(){Fe.setClearColor.apply(Fe,arguments)},this.getClearAlpha=function(){return Fe.getClearAlpha()},this.setClearAlpha=function(){Fe.setClearAlpha.apply(Fe,arguments)},this.clear=function(N=!0,W=!0,te=!0){let q=0;if(N){let ne=!1;if(null!==E){const $e=E.texture.format;ne=1033===$e||1031===$e||1029===$e}if(ne){const $e=E.texture.type,st=$e===qo||$e===Yo||1012===$e||$e===Ba||1017===$e||1018===$e,mt=Fe.getClearColor(),_t=Fe.getClearAlpha(),Pt=mt.r,ft=mt.g,Et=mt.b;st?(f[0]=Pt,f[1]=ft,f[2]=Et,f[3]=_t,D.clearBufferuiv(D.COLOR,0,f)):(p[0]=Pt,p[1]=ft,p[2]=Et,p[3]=_t,D.clearBufferiv(D.COLOR,0,p))}else q|=D.COLOR_BUFFER_BIT}W&&(q|=D.DEPTH_BUFFER_BIT),te&&(q|=D.STENCIL_BUFFER_BIT),D.clear(q)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",De,!1),t.removeEventListener("webglcontextrestored",Ee,!1),t.removeEventListener("webglcontextcreationerror",Pe,!1),he.dispose(),be.dispose(),ze.dispose(),tt.dispose(),Mt.dispose(),A.dispose(),nt.dispose(),it.dispose(),$.dispose(),L.dispose(),L.removeEventListener("sessionstart",vn),L.removeEventListener("sessionend",Vs),He&&(He.dispose(),He=null),Yi.stop()},this.renderBufferDirect=function(N,W,te,q,ne,$e){null===W&&(W=At);const st=ne.isMesh&&ne.matrixWorld.determinant()<0,mt=function ise(N,W,te,q,ne){!0!==W.isScene&&(W=At),je.resetTextureUnits();const $e=W.fog,mt=null===E?w.outputColorSpace:!0===E.isXRRenderTarget?E.texture.colorSpace:Mi,_t=(q.isMeshStandardMaterial?Mt:tt).get(q.envMap||(q.isMeshStandardMaterial?W.environment:null)),Pt=!0===q.vertexColors&&!!te.attributes.color&&4===te.attributes.color.itemSize,ft=!!te.attributes.tangent&&(!!q.normalMap||q.anisotropy>0),Et=!!te.morphAttributes.position,Nn=!!te.morphAttributes.normal,jn=!!te.morphAttributes.color;let Xr=Wo;q.toneMapped&&(null===E||!0===E.isXRRenderTarget)&&(Xr=w.toneMapping);const xo=te.morphAttributes.position||te.morphAttributes.normal||te.morphAttributes.color,Xn=void 0!==xo?xo.length:0,Nt=ze.get(q),bx=m.state.lights;!0!==Me||!0!==xe&&N===C||Ke.setState(q,N,N===C&&q.id===O);let Jn=!1;q.version===Nt.__version?(Nt.needsLights&&Nt.lightsStateVersion!==bx.state.version||Nt.outputColorSpace!==mt||ne.isInstancedMesh&&!1===Nt.instancing||!ne.isInstancedMesh&&!0===Nt.instancing||ne.isSkinnedMesh&&!1===Nt.skinning||!ne.isSkinnedMesh&&!0===Nt.skinning||ne.isInstancedMesh&&!0===Nt.instancingColor&&null===ne.instanceColor||ne.isInstancedMesh&&!1===Nt.instancingColor&&null!==ne.instanceColor||Nt.envMap!==_t||!0===q.fog&&Nt.fog!==$e||void 0!==Nt.numClippingPlanes&&(Nt.numClippingPlanes!==Ke.numPlanes||Nt.numIntersection!==Ke.numIntersection)||Nt.vertexAlphas!==Pt||Nt.vertexTangents!==ft||Nt.morphTargets!==Et||Nt.morphNormals!==Nn||Nt.morphColors!==jn||Nt.toneMapping!==Xr||!0===we.isWebGL2&&Nt.morphTargetsCount!==Xn)&&(Jn=!0):(Jn=!0,Nt.__version=q.version);let wc=Nt.currentProgram;!0===Jn&&(wc=M_(q,W,ne));let VL=!1,mf=!1,wx=!1;const Xi=wc.getUniforms(),xc=Nt.uniforms;if(ce.useProgram(wc.program)&&(VL=!0,mf=!0,wx=!0),q.id!==O&&(O=q.id,mf=!0),VL||C!==N){Xi.setValue(D,"projectionMatrix",N.projectionMatrix),Xi.setValue(D,"viewMatrix",N.matrixWorldInverse);const Ir=Xi.map.cameraPosition;void 0!==Ir&&Ir.setValue(D,wt.setFromMatrixPosition(N.matrixWorld)),we.logarithmicDepthBuffer&&Xi.setValue(D,"logDepthBufFC",2/(Math.log(N.far+1)/Math.LN2)),(q.isMeshPhongMaterial||q.isMeshToonMaterial||q.isMeshLambertMaterial||q.isMeshBasicMaterial||q.isMeshStandardMaterial||q.isShaderMaterial)&&Xi.setValue(D,"isOrthographic",!0===N.isOrthographicCamera),C!==N&&(C=N,mf=!0,wx=!0)}if(ne.isSkinnedMesh){Xi.setOptional(D,ne,"bindMatrix"),Xi.setOptional(D,ne,"bindMatrixInverse");const Ir=ne.skeleton;Ir&&(we.floatVertexTextures?(null===Ir.boneTexture&&Ir.computeBoneTexture(),Xi.setValue(D,"boneTexture",Ir.boneTexture,je),Xi.setValue(D,"boneTextureSize",Ir.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const xx=te.morphAttributes;if((void 0!==xx.position||void 0!==xx.normal||void 0!==xx.color&&!0===we.isWebGL2)&&B.update(ne,te,wc),(mf||Nt.receiveShadow!==ne.receiveShadow)&&(Nt.receiveShadow=ne.receiveShadow,Xi.setValue(D,"receiveShadow",ne.receiveShadow)),q.isMeshGouraudMaterial&&null!==q.envMap&&(xc.envMap.value=_t,xc.flipEnvMap.value=_t.isCubeTexture&&!1===_t.isRenderTargetTexture?-1:1),mf&&(Xi.setValue(D,"toneMappingExposure",w.toneMappingExposure),Nt.needsLights&&function rse(N,W){N.ambientLightColor.needsUpdate=W,N.lightProbe.needsUpdate=W,N.directionalLights.needsUpdate=W,N.directionalLightShadows.needsUpdate=W,N.pointLights.needsUpdate=W,N.pointLightShadows.needsUpdate=W,N.spotLights.needsUpdate=W,N.spotLightShadows.needsUpdate=W,N.rectAreaLights.needsUpdate=W,N.hemisphereLights.needsUpdate=W}(xc,wx),$e&&!0===q.fog&&ve.refreshFogUniforms(xc,$e),ve.refreshMaterialUniforms(xc,q,Z,Y,He),_m.upload(D,Nt.uniformsList,xc,je)),q.isShaderMaterial&&!0===q.uniformsNeedUpdate&&(_m.upload(D,Nt.uniformsList,xc,je),q.uniformsNeedUpdate=!1),q.isSpriteMaterial&&Xi.setValue(D,"center",ne.center),Xi.setValue(D,"modelViewMatrix",ne.modelViewMatrix),Xi.setValue(D,"normalMatrix",ne.normalMatrix),Xi.setValue(D,"modelMatrix",ne.matrixWorld),q.isShaderMaterial||q.isRawShaderMaterial){const Ir=q.uniformsGroups;for(let Mx=0,ose=Ir.length;Mx<ose;Mx++)if(we.isWebGL2){const HL=Ir[Mx];it.update(HL,wc),it.bind(HL,wc)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return wc}(N,W,te,q,ne);ce.setMaterial(q,st);let _t=te.index,Pt=1;if(!0===q.wireframe){if(_t=F.getWireframeAttribute(te),void 0===_t)return;Pt=2}const ft=te.drawRange,Et=te.attributes.position;let Nn=ft.start*Pt,jn=(ft.start+ft.count)*Pt;null!==$e&&(Nn=Math.max(Nn,$e.start*Pt),jn=Math.min(jn,($e.start+$e.count)*Pt)),null!==_t?(Nn=Math.max(Nn,0),jn=Math.min(jn,_t.count)):null!=Et&&(Nn=Math.max(Nn,0),jn=Math.min(jn,Et.count));const Xr=jn-Nn;if(Xr<0||Xr===1/0)return;nt.setup(ne,q,mt,te,_t);let xo,Xn=Ce;if(null!==_t&&(xo=un.get(_t),Xn=le,Xn.setIndex(xo)),ne.isMesh)!0===q.wireframe?(ce.setLineWidth(q.wireframeLinewidth*Ye()),Xn.setMode(D.LINES)):Xn.setMode(D.TRIANGLES);else if(ne.isLine){let Nt=q.linewidth;void 0===Nt&&(Nt=1),ce.setLineWidth(Nt*Ye()),Xn.setMode(ne.isLineSegments?D.LINES:ne.isLineLoop?D.LINE_LOOP:D.LINE_STRIP)}else ne.isPoints?Xn.setMode(D.POINTS):ne.isSprite&&Xn.setMode(D.TRIANGLES);if(ne.isInstancedMesh)Xn.renderInstances(Nn,Xr,ne.count);else if(te.isInstancedBufferGeometry){const bx=Math.min(te.instanceCount,void 0!==te._maxInstanceCount?te._maxInstanceCount:1/0);Xn.renderInstances(Nn,Xr,bx)}else Xn.render(Nn,Xr)},this.compile=function(N,W){function te(q,ne,$e){!0===q.transparent&&2===q.side&&!1===q.forceSinglePass?(q.side=1,q.needsUpdate=!0,M_(q,ne,$e),q.side=0,q.needsUpdate=!0,M_(q,ne,$e),q.side=2):M_(q,ne,$e)}m=be.get(N),m.init(),b.push(m),N.traverseVisible(function(q){q.isLight&&q.layers.test(W.layers)&&(m.pushLight(q),q.castShadow&&m.pushShadow(q))}),m.setupLights(w._useLegacyLights),N.traverse(function(q){const ne=q.material;if(ne)if(Array.isArray(ne))for(let $e=0;$e<ne.length;$e++)te(ne[$e],N,q);else te(ne,N,q)}),b.pop(),m=null};let dt=null;function vn(){Yi.stop()}function Vs(){Yi.start()}const Yi=new YO;function LL(N,W,te,q){if(!1===N.visible)return;if(N.layers.test(W.layers))if(N.isGroup)te=N.renderOrder;else if(N.isLOD)!0===N.autoUpdate&&N.update(W);else if(N.isLight)m.pushLight(N),N.castShadow&&m.pushShadow(N);else if(N.isSprite){if(!N.frustumCulled||ye.intersectsSprite(N)){q&&wt.setFromMatrixPosition(N.matrixWorld).applyMatrix4(Ge);const st=A.update(N),mt=N.material;mt.visible&&_.push(N,st,mt,te,wt.z,null)}}else if((N.isMesh||N.isLine||N.isPoints)&&(!N.frustumCulled||ye.intersectsObject(N))){const st=A.update(N),mt=N.material;if(q&&(void 0!==N.boundingSphere?(null===N.boundingSphere&&N.computeBoundingSphere(),wt.copy(N.boundingSphere.center)):(null===st.boundingSphere&&st.computeBoundingSphere(),wt.copy(st.boundingSphere.center)),wt.applyMatrix4(N.matrixWorld).applyMatrix4(Ge)),Array.isArray(mt)){const _t=st.groups;for(let Pt=0,ft=_t.length;Pt<ft;Pt++){const Et=_t[Pt],Nn=mt[Et.materialIndex];Nn&&Nn.visible&&_.push(N,st,Nn,te,wt.z,Et)}}else mt.visible&&_.push(N,st,mt,te,wt.z,null)}const $e=N.children;for(let st=0,mt=$e.length;st<mt;st++)LL($e[st],W,te,q)}function kL(N,W,te,q){const ne=N.opaque,$e=N.transmissive,st=N.transparent;m.setupLightsView(te),!0===Me&&Ke.setGlobalState(w.clippingPlanes,te),$e.length>0&&function nse(N,W,te,q){const ne=we.isWebGL2;null===He&&(He=new Ga(1,1,{generateMipmaps:!0,type:re.has("EXT_color_buffer_half_float")?yh:qo,minFilter:ao,samples:ne?4:0})),w.getDrawingBufferSize(Be),ne?He.setSize(Be.x,Be.y):He.setSize(Wg(Be.x),Wg(Be.y));const $e=w.getRenderTarget();w.setRenderTarget(He),w.getClearColor(J),k=w.getClearAlpha(),k<1&&w.setClearColor(16777215,.5),w.clear();const st=w.toneMapping;w.toneMapping=Wo,x_(N,te,q),je.updateMultisampleRenderTarget(He),je.updateRenderTargetMipmap(He);let mt=!1;for(let _t=0,Pt=W.length;_t<Pt;_t++){const ft=W[_t],Et=ft.object,Nn=ft.geometry,jn=ft.material,Xr=ft.group;if(2===jn.side&&Et.layers.test(q.layers)){const xo=jn.side;jn.side=1,jn.needsUpdate=!0,BL(Et,te,q,Nn,jn,Xr),jn.side=xo,jn.needsUpdate=!0,mt=!0}}!0===mt&&(je.updateMultisampleRenderTarget(He),je.updateRenderTargetMipmap(He)),w.setRenderTarget($e),w.setClearColor(J,k),w.toneMapping=st}(ne,$e,W,te),q&&ce.viewport(I.copy(q)),ne.length>0&&x_(ne,W,te),$e.length>0&&x_($e,W,te),st.length>0&&x_(st,W,te),ce.buffers.depth.setTest(!0),ce.buffers.depth.setMask(!0),ce.buffers.color.setMask(!0),ce.setPolygonOffset(!1)}function x_(N,W,te){const q=!0===W.isScene?W.overrideMaterial:null;for(let ne=0,$e=N.length;ne<$e;ne++){const st=N[ne],mt=st.object,_t=st.geometry,Pt=null===q?st.material:q,ft=st.group;mt.layers.test(te.layers)&&BL(mt,W,te,_t,Pt,ft)}}function BL(N,W,te,q,ne,$e){N.onBeforeRender(w,W,te,q,ne,$e),N.modelViewMatrix.multiplyMatrices(te.matrixWorldInverse,N.matrixWorld),N.normalMatrix.getNormalMatrix(N.modelViewMatrix),ne.onBeforeRender(w,W,te,q,N,$e),!0===ne.transparent&&2===ne.side&&!1===ne.forceSinglePass?(ne.side=1,ne.needsUpdate=!0,w.renderBufferDirect(te,W,q,ne,N,$e),ne.side=0,ne.needsUpdate=!0,w.renderBufferDirect(te,W,q,ne,N,$e),ne.side=2):w.renderBufferDirect(te,W,q,ne,N,$e),N.onAfterRender(w,W,te,q,ne,$e)}function M_(N,W,te){!0!==W.isScene&&(W=At);const q=ze.get(N),ne=m.state.lights,st=ne.state.version,mt=$.getParameters(N,ne.state,m.state.shadowsArray,W,te),_t=$.getProgramCacheKey(mt);let Pt=q.programs;q.environment=N.isMeshStandardMaterial?W.environment:null,q.fog=W.fog,q.envMap=(N.isMeshStandardMaterial?Mt:tt).get(N.envMap||q.environment),void 0===Pt&&(N.addEventListener("dispose",Ae),Pt=new Map,q.programs=Pt);let ft=Pt.get(_t);if(void 0!==ft){if(q.currentProgram===ft&&q.lightsStateVersion===st)return UL(N,mt),ft}else mt.uniforms=$.getUniforms(N),N.onBuild(te,mt,w),N.onBeforeCompile(mt,w),ft=$.acquireProgram(mt,_t),Pt.set(_t,ft),q.uniforms=mt.uniforms;const Et=q.uniforms;(!N.isShaderMaterial&&!N.isRawShaderMaterial||!0===N.clipping)&&(Et.clippingPlanes=Ke.uniform),UL(N,mt),q.needsLights=function sse(N){return N.isMeshLambertMaterial||N.isMeshToonMaterial||N.isMeshPhongMaterial||N.isMeshStandardMaterial||N.isShadowMaterial||N.isShaderMaterial&&!0===N.lights}(N),q.lightsStateVersion=st,q.needsLights&&(Et.ambientLightColor.value=ne.state.ambient,Et.lightProbe.value=ne.state.probe,Et.directionalLights.value=ne.state.directional,Et.directionalLightShadows.value=ne.state.directionalShadow,Et.spotLights.value=ne.state.spot,Et.spotLightShadows.value=ne.state.spotShadow,Et.rectAreaLights.value=ne.state.rectArea,Et.ltc_1.value=ne.state.rectAreaLTC1,Et.ltc_2.value=ne.state.rectAreaLTC2,Et.pointLights.value=ne.state.point,Et.pointLightShadows.value=ne.state.pointShadow,Et.hemisphereLights.value=ne.state.hemi,Et.directionalShadowMap.value=ne.state.directionalShadowMap,Et.directionalShadowMatrix.value=ne.state.directionalShadowMatrix,Et.spotShadowMap.value=ne.state.spotShadowMap,Et.spotLightMatrix.value=ne.state.spotLightMatrix,Et.spotLightMap.value=ne.state.spotLightMap,Et.pointShadowMap.value=ne.state.pointShadowMap,Et.pointShadowMatrix.value=ne.state.pointShadowMatrix);const Nn=ft.getUniforms(),jn=_m.seqWithValue(Nn.seq,Et);return q.currentProgram=ft,q.uniformsList=jn,ft}function UL(N,W){const te=ze.get(N);te.outputColorSpace=W.outputColorSpace,te.instancing=W.instancing,te.instancingColor=W.instancingColor,te.skinning=W.skinning,te.morphTargets=W.morphTargets,te.morphNormals=W.morphNormals,te.morphColors=W.morphColors,te.morphTargetsCount=W.morphTargetsCount,te.numClippingPlanes=W.numClippingPlanes,te.numIntersection=W.numClipIntersection,te.vertexAlphas=W.vertexAlphas,te.vertexTangents=W.vertexTangents,te.toneMapping=W.toneMapping}Yi.setAnimationLoop(function Yn(N){dt&&dt(N)}),typeof self<"u"&&Yi.setContext(self),this.setAnimationLoop=function(N){dt=N,L.setAnimationLoop(N),null===N?Yi.stop():Yi.start()},L.addEventListener("sessionstart",vn),L.addEventListener("sessionend",Vs),this.render=function(N,W){if(void 0===W||!0===W.isCamera){if(!0!==x){if(!0===N.matrixWorldAutoUpdate&&N.updateMatrixWorld(),null===W.parent&&!0===W.matrixWorldAutoUpdate&&W.updateMatrixWorld(),!0===L.enabled&&!0===L.isPresenting&&(!0===L.cameraAutoUpdate&&L.updateCamera(W),W=L.getCamera()),!0===N.isScene&&N.onBeforeRender(w,N,W,E),m=be.get(N,b.length),m.init(),b.push(m),Ge.multiplyMatrices(W.projectionMatrix,W.matrixWorldInverse),ye.setFromProjectionMatrix(Ge),xe=this.localClippingEnabled,Me=Ke.init(this.clippingPlanes,xe),_=he.get(N,g.length),_.init(),g.push(_),LL(N,W,0,w.sortObjects),_.finish(),!0===w.sortObjects&&_.sort(ge,Q),this.info.render.frame++,!0===Me&&Ke.beginShadows(),Se.render(m.state.shadowsArray,N,W),!0===Me&&Ke.endShadows(),!0===this.info.autoReset&&this.info.reset(),Fe.render(_,N),m.setupLights(w._useLegacyLights),W.isArrayCamera){const q=W.cameras;for(let ne=0,$e=q.length;ne<$e;ne++){const st=q[ne];kL(_,N,st,st.viewport)}}else kL(_,N,W);null!==E&&(je.updateMultisampleRenderTarget(E),je.updateRenderTargetMipmap(E)),!0===N.isScene&&N.onAfterRender(w,N,W),nt.resetDefaultState(),O=-1,C=null,b.pop(),m=b.length>0?b[b.length-1]:null,g.pop(),_=g.length>0?g[g.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return S},this.getActiveMipmapLevel=function(){return T},this.getRenderTarget=function(){return E},this.setRenderTargetTextures=function(N,W,te){ze.get(N.texture).__webglTexture=W,ze.get(N.depthTexture).__webglTexture=te;const q=ze.get(N);q.__hasExternalTextures=!0,q.__hasExternalTextures&&(q.__autoAllocateDepthBuffer=void 0===te,q.__autoAllocateDepthBuffer||!0===re.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),q.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(N,W){const te=ze.get(N);te.__webglFramebuffer=W,te.__useDefaultFramebuffer=void 0===W},this.setRenderTarget=function(N,W=0,te=0){E=N,S=W,T=te;let q=!0,ne=null,$e=!1,st=!1;if(N){const _t=ze.get(N);void 0!==_t.__useDefaultFramebuffer?(ce.bindFramebuffer(D.FRAMEBUFFER,null),q=!1):void 0===_t.__webglFramebuffer?je.setupRenderTarget(N):_t.__hasExternalTextures&&je.rebindTextures(N,ze.get(N.texture).__webglTexture,ze.get(N.depthTexture).__webglTexture);const Pt=N.texture;(Pt.isData3DTexture||Pt.isDataArrayTexture||Pt.isCompressedArrayTexture)&&(st=!0);const ft=ze.get(N).__webglFramebuffer;N.isWebGLCubeRenderTarget?(ne=Array.isArray(ft[W])?ft[W][te]:ft[W],$e=!0):ne=we.isWebGL2&&N.samples>0&&!1===je.useMultisampledRTT(N)?ze.get(N).__webglMultisampledFramebuffer:Array.isArray(ft)?ft[te]:ft,I.copy(N.viewport),V.copy(N.scissor),X=N.scissorTest}else I.copy(se).multiplyScalar(Z).floor(),V.copy(H).multiplyScalar(Z).floor(),X=ee;if(ce.bindFramebuffer(D.FRAMEBUFFER,ne)&&we.drawBuffers&&q&&ce.drawBuffers(N,ne),ce.viewport(I),ce.scissor(V),ce.setScissorTest(X),$e){const _t=ze.get(N.texture);D.framebufferTexture2D(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,D.TEXTURE_CUBE_MAP_POSITIVE_X+W,_t.__webglTexture,te)}else if(st){const _t=ze.get(N.texture);D.framebufferTextureLayer(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,_t.__webglTexture,te||0,W||0)}O=-1},this.readRenderTargetPixels=function(N,W,te,q,ne,$e,st){if(!N||!N.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let mt=ze.get(N).__webglFramebuffer;if(N.isWebGLCubeRenderTarget&&void 0!==st&&(mt=mt[st]),mt){ce.bindFramebuffer(D.FRAMEBUFFER,mt);try{const _t=N.texture,Pt=_t.format,ft=_t.type;if(Pt!==Gr&&lt.convert(Pt)!==D.getParameter(D.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const Et=ft===yh&&(re.has("EXT_color_buffer_half_float")||we.isWebGL2&&re.has("EXT_color_buffer_float"));if(!(ft===qo||lt.convert(ft)===D.getParameter(D.IMPLEMENTATION_COLOR_READ_TYPE)||ft===co&&(we.isWebGL2||re.has("OES_texture_float")||re.has("WEBGL_color_buffer_float"))||Et))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");W>=0&&W<=N.width-q&&te>=0&&te<=N.height-ne&&D.readPixels(W,te,q,ne,lt.convert(Pt),lt.convert(ft),$e)}finally{const _t=null!==E?ze.get(E).__webglFramebuffer:null;ce.bindFramebuffer(D.FRAMEBUFFER,_t)}}},this.copyFramebufferToTexture=function(N,W,te=0){const q=Math.pow(2,-te),ne=Math.floor(W.image.width*q),$e=Math.floor(W.image.height*q);je.setTexture2D(W,0),D.copyTexSubImage2D(D.TEXTURE_2D,te,0,0,N.x,N.y,ne,$e),ce.unbindTexture()},this.copyTextureToTexture=function(N,W,te,q=0){const ne=W.image.width,$e=W.image.height,st=lt.convert(te.format),mt=lt.convert(te.type);je.setTexture2D(te,0),D.pixelStorei(D.UNPACK_FLIP_Y_WEBGL,te.flipY),D.pixelStorei(D.UNPACK_PREMULTIPLY_ALPHA_WEBGL,te.premultiplyAlpha),D.pixelStorei(D.UNPACK_ALIGNMENT,te.unpackAlignment),W.isDataTexture?D.texSubImage2D(D.TEXTURE_2D,q,N.x,N.y,ne,$e,st,mt,W.image.data):W.isCompressedTexture?D.compressedTexSubImage2D(D.TEXTURE_2D,q,N.x,N.y,W.mipmaps[0].width,W.mipmaps[0].height,st,W.mipmaps[0].data):D.texSubImage2D(D.TEXTURE_2D,q,N.x,N.y,st,mt,W.image),0===q&&te.generateMipmaps&&D.generateMipmap(D.TEXTURE_2D),ce.unbindTexture()},this.copyTextureToTexture3D=function(N,W,te,q,ne=0){if(w.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const $e=N.max.x-N.min.x+1,st=N.max.y-N.min.y+1,mt=N.max.z-N.min.z+1,_t=lt.convert(q.format),Pt=lt.convert(q.type);let ft;if(q.isData3DTexture)je.setTexture3D(q,0),ft=D.TEXTURE_3D;else{if(!q.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");je.setTexture2DArray(q,0),ft=D.TEXTURE_2D_ARRAY}D.pixelStorei(D.UNPACK_FLIP_Y_WEBGL,q.flipY),D.pixelStorei(D.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),D.pixelStorei(D.UNPACK_ALIGNMENT,q.unpackAlignment);const Et=D.getParameter(D.UNPACK_ROW_LENGTH),Nn=D.getParameter(D.UNPACK_IMAGE_HEIGHT),jn=D.getParameter(D.UNPACK_SKIP_PIXELS),Xr=D.getParameter(D.UNPACK_SKIP_ROWS),xo=D.getParameter(D.UNPACK_SKIP_IMAGES),Xn=te.isCompressedTexture?te.mipmaps[0]:te.image;D.pixelStorei(D.UNPACK_ROW_LENGTH,Xn.width),D.pixelStorei(D.UNPACK_IMAGE_HEIGHT,Xn.height),D.pixelStorei(D.UNPACK_SKIP_PIXELS,N.min.x),D.pixelStorei(D.UNPACK_SKIP_ROWS,N.min.y),D.pixelStorei(D.UNPACK_SKIP_IMAGES,N.min.z),te.isDataTexture||te.isData3DTexture?D.texSubImage3D(ft,ne,W.x,W.y,W.z,$e,st,mt,_t,Pt,Xn.data):te.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),D.compressedTexSubImage3D(ft,ne,W.x,W.y,W.z,$e,st,mt,_t,Xn.data)):D.texSubImage3D(ft,ne,W.x,W.y,W.z,$e,st,mt,_t,Pt,Xn),D.pixelStorei(D.UNPACK_ROW_LENGTH,Et),D.pixelStorei(D.UNPACK_IMAGE_HEIGHT,Nn),D.pixelStorei(D.UNPACK_SKIP_PIXELS,jn),D.pixelStorei(D.UNPACK_SKIP_ROWS,Xr),D.pixelStorei(D.UNPACK_SKIP_IMAGES,xo),0===ne&&q.generateMipmaps&&D.generateMipmap(ft),ce.unbindTexture()},this.initTexture=function(N){N.isCubeTexture?je.setTextureCube(N,0):N.isData3DTexture?je.setTexture3D(N,0):N.isDataArrayTexture||N.isCompressedArrayTexture?je.setTexture2DArray(N,0):je.setTexture2D(N,0),ce.unbindTexture()},this.resetState=function(){S=0,T=0,E=null,ce.reset(),nt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return lo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===Xb?"display-p3":"srgb",t.unpackColorSpace=Jt.workingColorSpace===Ug?"display-p3":"srgb"}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Cn?Va:3e3}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Va?Cn:Mi}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}(class IJ extends MP{}).prototype.isWebGL1Renderer=!0;class SP extends hi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class A1{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Mr()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Mr()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Mr()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const $i=new R;class Za{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)$i.fromBufferAttribute(this,t),$i.applyMatrix4(e),this.setXYZ(t,$i.x,$i.y,$i.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)$i.fromBufferAttribute(this,t),$i.applyNormalMatrix(e),this.setXYZ(t,$i.x,$i.y,$i.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)$i.fromBufferAttribute(this,t),$i.transformDirection(e),this.setXYZ(t,$i.x,$i.y,$i.z);return this}setX(e,t){return this.normalized&&(t=St(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=St(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=St(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=St(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ar(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ar(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ar(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ar(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=St(t,this.array),i=St(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=St(t,this.array),i=St(i,this.array),r=St(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=St(t,this.array),i=St(i,this.array),r=St(r,this.array),s=St(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new On(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Za(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const IP=new R,RP=new on,OP=new on,PJ=new R,PP=new ht,yu=new R,R1=new hs,NP=new ht,O1=new eu;class FP extends Ci{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new ht,this.bindMatrixInverse=new ht,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new ds),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)yu.fromBufferAttribute(t,i),this.applyBoneTransform(i,yu),this.boundingBox.expandByPoint(yu)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new hs),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)yu.fromBufferAttribute(t,i),this.applyBoneTransform(i,yu),this.boundingSphere.expandByPoint(yu)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.matrixWorld;void 0!==this.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),R1.copy(this.boundingSphere),R1.applyMatrix4(r),!1!==e.ray.intersectsSphere(R1)&&(NP.copy(r).invert(),O1.copy(e.ray).applyMatrix4(NP),(null===this.boundingBox||!1!==O1.intersectsBox(this.boundingBox))&&this._computeIntersections(e,t,O1)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new on,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;RP.fromBufferAttribute(r.attributes.skinIndex,e),OP.fromBufferAttribute(r.attributes.skinWeight,e),IP.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=OP.getComponent(s);if(0!==o){const a=RP.getComponent(s);PP.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(PJ.copy(IP).applyMatrix4(PP),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class P1 extends hi{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ph extends us{constructor(e=null,t=1,i=1,r,s,o,a,c,l=zn,u=zn,d,h){super(null,o,a,c,l,u,r,s,d,h),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const LP=new ht,NJ=new ht;class xm{constructor(e=[],t=[]){this.uuid=Mr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new ht)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new ht;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++)LP.multiplyMatrices(e[s]?e[s].matrixWorld:NJ,t[s]),LP.toArray(i,16*s);null!==r&&(r.needsUpdate=!0)}clone(){return new xm(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=MO(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Ph(t,e,e,Gr,co);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new P1),this.bones.push(o),this.boneInverses.push((new ht).fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++)e.bones.push(t[r].uuid),e.boneInverses.push(i[r].toArray());return e}}class Nh extends On{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const bu=new ht,kP=new ht,Mm=[],BP=new ds,FJ=new ht,Fh=new Ci,Lh=new hs;class UP extends Ci{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Nh(new Float32Array(16*i),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,FJ)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new ds),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,bu),BP.copy(e.boundingBox).applyMatrix4(bu),this.boundingBox.union(BP)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new hs),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,bu),Lh.copy(e.boundingSphere).applyMatrix4(bu),this.boundingSphere.union(Lh)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Fh.geometry=this.geometry,Fh.material=this.material,void 0!==Fh.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Lh.copy(this.boundingSphere),Lh.applyMatrix4(i),!1!==e.ray.intersectsSphere(Lh)))for(let s=0;s<r;s++){this.getMatrixAt(s,bu),kP.multiplyMatrices(i,bu),Fh.matrixWorld=kP,Fh.raycast(e,Mm);for(let o=0,a=Mm.length;o<a;o++){const c=Mm[o];c.instanceId=s,c.object=this,t.push(c)}Mm.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Nh(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class lr extends gs{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ne(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const VP=new R,HP=new R,zP=new ht,N1=new eu,Sm=new hs;class Ka extends hi{constructor(e=new It,t=new lr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)VP.fromBufferAttribute(t,r-1),HP.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=VP.distanceTo(HP);e.setAttribute("lineDistance",new Xe(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),Sm.copy(i.boundingSphere),Sm.applyMatrix4(r),Sm.radius+=s,!1===e.ray.intersectsSphere(Sm))return;zP.copy(r).invert(),N1.copy(e.ray).applyMatrix4(zP);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=new R,u=new R,d=new R,h=new R,f=this.isLineSegments?2:1,p=i.index,m=i.attributes.position;if(null!==p)for(let w=Math.max(0,o.start),x=Math.min(p.count,o.start+o.count)-1;w<x;w+=f){const S=p.getX(w),T=p.getX(w+1);if(l.fromBufferAttribute(m,S),u.fromBufferAttribute(m,T),N1.distanceSqToSegment(l,u,h,d)>c)continue;h.applyMatrix4(this.matrixWorld);const O=e.ray.origin.distanceTo(h);O<e.near||O>e.far||t.push({distance:O,point:d.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}else for(let w=Math.max(0,o.start),x=Math.min(m.count,o.start+o.count)-1;w<x;w+=f){if(l.fromBufferAttribute(m,w),u.fromBufferAttribute(m,w+1),N1.distanceSqToSegment(l,u,h,d)>c)continue;h.applyMatrix4(this.matrixWorld);const T=e.ray.origin.distanceTo(h);T<e.near||T>e.far||t.push({distance:T,point:d.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const GP=new R,jP=new R;class F1 extends Ka{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)GP.fromBufferAttribute(t,r),jP.fromBufferAttribute(t,r+1),i[r]=0===r?0:i[r-1],i[r+1]=i[r]+GP.distanceTo(jP);e.setAttribute("lineDistance",new Xe(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class WP extends Ka{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class L1 extends gs{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ne(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const $P=new ht,k1=new eu,Cm=new hs,Em=new R;class qP extends hi{constructor(e=new It,t=new L1){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),Cm.copy(i.boundingSphere),Cm.applyMatrix4(r),Cm.radius+=s,!1===e.ray.intersectsSphere(Cm))return;$P.copy(r).invert(),k1.copy(e.ray).applyMatrix4($P);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=i.index,d=i.attributes.position;if(null!==l)for(let p=Math.max(0,o.start),_=Math.min(l.count,o.start+o.count);p<_;p++){const m=l.getX(p);Em.fromBufferAttribute(d,m),YP(Em,m,c,r,e,t,this)}else for(let p=Math.max(0,o.start),_=Math.min(d.count,o.start+o.count);p<_;p++)Em.fromBufferAttribute(d,p),YP(Em,p,c,r,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function YP(n,e,t,i,r,s,o){const a=k1.distanceSqToPoint(n);if(a<t){const c=new R;k1.closestPointToPoint(n,c),c.applyMatrix4(i);const l=r.ray.origin.distanceTo(c);if(l<r.near||l>r.far)return;s.push({distance:l,distanceToRay:Math.sqrt(a),point:c,index:e,face:null,object:o})}}class Um extends gs{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ne(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ne(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class yo extends Um{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ie(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Rn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ne(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ne(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ne(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}function tc(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)}function uN(n){const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(function e(r,s){return n[r]-n[s]}),i}function rw(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let c=0;c!==e;++c)r[o++]=n[a+c]}return r}function sw(n,e,t,i){let r=1,s=n[0];for(;void 0!==s&&void 0===s[i];)s=n[r++];if(void 0===s)return;let o=s[i];if(void 0!==o)if(Array.isArray(o))do{o=s[i],void 0!==o&&(e.push(s.time),t.push.apply(t,o)),s=n[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[i],void 0!==o&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++]}while(void 0!==s);else do{o=s[i],void 0!==o&&(e.push(s.time),t.push(o)),s=n[r++]}while(void 0!==s)}class Gh{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(void 0===r){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(e>=s)break e;{const a=t[1];e<a&&(i=2,s=a);for(let c=i-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0}}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class TZ extends Gh{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Gl,endingEnd:Gl}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],c=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case jl:s=e,a=2*t-i;break;case 2402:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(void 0===c)switch(this.getSettings_().endingEnd){case jl:o=e,c=2*i-t;break;case 2402:o=1,c=i+r[1]-r[0];break;default:o=e-1,c=t}const l=.5*(i-t),u=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(c-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(i-t)/(r-t),_=p*p,m=_*p,g=-h*m+2*h*_-h*p,b=(1+h)*m+(-1.5-2*h)*_+(-.5+h)*p+1,w=(-1-f)*m+(1.5+f)*_+.5*p,x=f*m-f*_;for(let S=0;S!==a;++S)s[S]=g*o[u+S]+b*o[l+S]+w*o[c+S]+x*o[d+S];return s}}class dN extends Gh{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=(i-t)/(r-t),d=1-u;for(let h=0;h!==a;++h)s[h]=o[l+h]*d+o[c+h]*u;return s}}class DZ extends Gh{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ls{constructor(e,t,i,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=tc(t,this.TimeBufferType),this.values=tc(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:tc(e.times,Array),values:tc(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new DZ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new dN(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new TZ(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case bh:t=this.InterpolantFactoryMethodDiscrete;break;case zl:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return bh;case this.InterpolantFactoryMethodLinear:return zl;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;-1!==o&&i[o]>t;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const c=i[a];if("number"==typeof c&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),e=!1;break}if(null!==o&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,o),e=!1;break}o=c}if(void 0!==r&&function lN(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}(r))for(let a=0,c=r.length;a!==c;++a){const l=r[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=2302===this.getInterpolation(),s=e.length-1;let o=1;for(let a=1;a<s;++a){let c=!1;const l=e[a];if(l!==e[a+1]&&(1!==a||l!==e[0]))if(r)c=!0;else{const d=a*i,h=d-i,f=d+i;for(let p=0;p!==i;++p){const _=t[d+p];if(_!==t[h+p]||_!==t[f+p]){c=!0;break}}}if(c){if(a!==o){e[o]=e[a];const d=a*i,h=o*i;for(let f=0;f!==i;++f)t[h+f]=t[d+f]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,c=o*i,l=0;l!==i;++l)t[c+l]=t[a+l];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Ls.prototype.TimeBufferType=Float32Array,Ls.prototype.ValueBufferType=Float32Array,Ls.prototype.DefaultInterpolation=zl;class Mu extends Ls{}Mu.prototype.ValueTypeName="bool",Mu.prototype.ValueBufferType=Array,Mu.prototype.DefaultInterpolation=bh,Mu.prototype.InterpolantFactoryMethodLinear=void 0,Mu.prototype.InterpolantFactoryMethodSmooth=void 0;class hN extends Ls{}hN.prototype.ValueTypeName="color";class Su extends Ls{}Su.prototype.ValueTypeName="number";class AZ extends Gh{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=(i-t)/(r-t);let l=e*a;for(let u=l+a;l!==u;l+=4)Si.slerpFlat(s,0,o,l-a,o,l,c);return s}}class nc extends Ls{InterpolantFactoryMethodLinear(e){return new AZ(this.times,this.values,this.getValueSize(),e)}}nc.prototype.ValueTypeName="quaternion",nc.prototype.DefaultInterpolation=zl,nc.prototype.InterpolantFactoryMethodSmooth=void 0;class Cu extends Ls{}Cu.prototype.ValueTypeName="string",Cu.prototype.ValueBufferType=Array,Cu.prototype.DefaultInterpolation=bh,Cu.prototype.InterpolantFactoryMethodLinear=void 0,Cu.prototype.InterpolantFactoryMethodSmooth=void 0;class Eu extends Ls{}Eu.prototype.ValueTypeName="vector";class jh{constructor(e,t=-1,i,r=2500){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Mr(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(RZ(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(Ls.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let c=[],l=[];c.push((a+s-1)%s,a,(a+1)%s),l.push(0,1,0);const u=uN(c);c=rw(c,1,u),l=rw(l,1,u),!r&&0===c[0]&&(c.push(s),l.push(l[0])),o.push(new Su(".morphTargetInfluences["+t[a].name+"]",c,l).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;Array.isArray(e)||(i=e.geometry&&e.geometry.animations||e.animations);for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,c=e.length;a<c;a++){const l=e[a],u=l.name.match(s);if(u&&u.length>1){const d=u[1];let h=r[d];h||(r[d]=h=[]),h.push(l)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,h,f,p,_){if(0!==f.length){const m=[],g=[];sw(f,m,g,p),0!==m.length&&_.push(new d(h,m,g))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let c=e.length||-1;const l=e.hierarchy||[];for(let d=0;d<l.length;d++){const h=l[d].keys;if(h&&0!==h.length)if(h[0].morphTargets){const f={};let p;for(p=0;p<h.length;p++)if(h[p].morphTargets)for(let _=0;_<h[p].morphTargets.length;_++)f[h[p].morphTargets[_]]=-1;for(const _ in f){const m=[],g=[];for(let b=0;b!==h[p].morphTargets.length;++b){const w=h[p];m.push(w.time),g.push(w.morphTarget===_?1:0)}r.push(new Su(".morphTargetInfluence["+_+"]",m,g))}c=f.length*o}else{const f=".bones["+t[d].name+"]";i(Eu,f+".position",h,"pos",r),i(nc,f+".quaternion",h,"rot",r),i(Eu,f+".scale",h,"scl",r)}}return 0===r.length?null:new this(s,c,r,a)}resetDuration(){let t=0;for(let i=0,r=this.tracks.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function RZ(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function IZ(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Su;case"vector":case"vector2":case"vector3":case"vector4":return Eu;case"color":return hN;case"quaternion":return nc;case"bool":case"boolean":return Mu;case"string":return Cu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){const t=[],i=[];sw(n.keys,t,i,"value"),n.times=t,n.values=i}return void 0!==e.parse?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Tu={enabled:!1,files:{},add:function(n,e){!1!==this.enabled&&(this.files[n]=e)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class fN{constructor(e,t,i){const r=this;let c,s=!1,o=0,a=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,!1===s&&void 0!==r.onStart&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,void 0!==r.onProgress&&r.onProgress(u,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(u){void 0!==r.onError&&r.onError(u)},this.resolveURL=function(u){return c?c(u):u},this.setURLModifier=function(u){return c=u,this},this.addHandler=function(u,d){return l.push(u,d),this},this.removeHandler=function(u){const d=l.indexOf(u);return-1!==d&&l.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=l.length;d<h;d+=2){const f=l[d],p=l[d+1];if(f.global&&(f.lastIndex=0),f.test(u))return p}return null}}}const OZ=new fN;let Wh=(()=>{class n{constructor(t){this.manager=void 0!==t?t:OZ,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,i){const r=this;return new Promise(function(s,o){r.load(t,s,i,o)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}return n.DEFAULT_MATERIAL_NAME="__DEFAULT",n})();const bo={};class PZ extends Error{constructor(e,t){super(e),this.response=t}}class ks extends Wh{constructor(e){super(e)}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Tu.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(void 0!==bo[e])return void bo[e].push({onLoad:t,onProgress:i,onError:r});bo[e]=[],bo[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,c=this.responseType;fetch(o).then(l=>{if(200===l.status||0===l.status){if(0===l.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===l.body||void 0===l.body.getReader)return l;const u=bo[e],d=l.body.getReader(),h=l.headers.get("Content-Length")||l.headers.get("X-File-Size"),f=h?parseInt(h):0,p=0!==f;let _=0;const m=new ReadableStream({start(g){!function b(){d.read().then(({done:w,value:x})=>{if(w)g.close();else{_+=x.byteLength;const S=new ProgressEvent("progress",{lengthComputable:p,loaded:_,total:f});for(let T=0,E=u.length;T<E;T++){const O=u[T];O.onProgress&&O.onProgress(S)}g.enqueue(x),b()}})}()}});return new Response(m)}throw new PZ(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(c){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(u=>(new DOMParser).parseFromString(u,a));case"json":return l.json();default:if(void 0===a)return l.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),h=d&&d[1]?d[1].toLowerCase():void 0,f=new TextDecoder(h);return l.arrayBuffer().then(p=>f.decode(p))}}}).then(l=>{Tu.add(e,l);const u=bo[e];delete bo[e];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onLoad&&f.onLoad(l)}}).catch(l=>{const u=bo[e];if(void 0===u)throw this.manager.itemError(e),l;delete bo[e];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onError&&f.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Vm extends Wh{constructor(e){super(e)}load(e,t,i,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Tu.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=xh("img");function c(){u(),Tu.add(e,this),t&&t(this),s.manager.itemEnd(e)}function l(d){u(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",c,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",c,!1),a.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class ic extends Wh{constructor(e){super(e)}load(e,t,i,r){const s=new us,o=new Vm(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,void 0!==t&&t(s)},i,r),s}}class ow extends hi{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ne(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}const aw=new ht,pN=new R,gN=new R;class cw{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ie(512,512),this.map=null,this.mapPass=null,this.matrix=new ht,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new b1,this._frameExtents=new ie(1,1),this._viewportCount=1,this._viewports=[new on(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;pN.setFromMatrixPosition(e.matrixWorld),t.position.copy(pN),gN.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(gN),t.updateMatrixWorld(),aw.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(aw),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(aw)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class FZ extends cw{constructor(){super(new gi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=2*Wl*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class mN extends ow{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(hi.DEFAULT_UP),this.updateMatrix(),this.target=new hi,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new FZ}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const _N=new ht,$h=new R,lw=new R;class LZ extends cw{constructor(){super(new gi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ie(4,2),this._viewportCount=6,this._viewports=[new on(2,1,1,1),new on(0,1,1,1),new on(3,1,1,1),new on(1,1,1,1),new on(3,0,1,1),new on(1,0,1,1)],this._cubeDirections=[new R(1,0,0),new R(-1,0,0),new R(0,0,1),new R(0,0,-1),new R(0,1,0),new R(0,-1,0)],this._cubeUps=[new R(0,1,0),new R(0,1,0),new R(0,1,0),new R(0,1,0),new R(0,0,1),new R(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),$h.setFromMatrixPosition(e.matrixWorld),i.position.copy($h),lw.copy(i.position),lw.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(lw),i.updateMatrixWorld(),r.makeTranslation(-$h.x,-$h.y,-$h.z),_N.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_N)}}class vN extends ow{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new LZ}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class kZ extends cw{constructor(){super(new pm(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class qh extends ow{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(hi.DEFAULT_UP),this.updateMatrix(),this.target=new hi,this.shadow=new kZ}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Yh{static decodeText(e){if(typeof TextDecoder<"u")return(new TextDecoder).decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class WZ extends Wh{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Tu.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){Tu.add(e,c),t&&t(c),s.manager.itemEnd(e)}).catch(function(c){r&&r(c),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}class SN{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=CN(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=CN();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function CN(){return(typeof performance>"u"?Date:performance).now()}class YZ{constructor(e,t,i){let r,s,o;switch(this.binding=e,this.valueSize=i,t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(0===o){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else o+=t,this._mixBufferRegion(i,s,0,t/o,r);this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1&&this._mixBufferRegion(i,r,t*this._origIndex,1-s,t),o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let c=t,l=t+t;c!==l;++c)if(i[c]!==i[c+t]){a.setValue(i,r);break}}saveOriginalState(){const t=this.buffer,i=this.valueSize,r=i*this._origIndex;this.binding.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){Si.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;Si.multiplyQuaternionsFlat(e,o,e,t,e,i),Si.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const c=t+a;e[c]=e[c]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const dw="\\[\\]\\.:\\/",XZ=new RegExp("["+dw+"]","g"),hw="[^"+dw+"]",JZ="[^"+dw.replace("\\.","")+"]",tK=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",hw)+/(WCOD+)?/.source.replace("WCOD",JZ)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",hw)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",hw)+"$"),nK=["material","materials","bones","map"];class iK{constructor(e,t,i){const r=i||mn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}let mn=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(XZ,"")}static parseTrackName(t){const i=tK.exec(t);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==nK.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(void 0===i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(i);if(void 0!==r)return r}if(t.children){const r=function(o){for(let a=0;a<o.length;a++){const c=o[a];if(c.name===i||c.uuid===i)return c;const l=r(c.children);if(l)return l}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[i++]=r[s]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,r=i.objectName,s=i.propertyName;let o=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(r){let u=i.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const a=t[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+s+" but it wasn't found.",t);let c=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=iK,n})();mn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},mn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},mn.prototype.GetterByBindingType=[mn.prototype._getValue_direct,mn.prototype._getValue_array,mn.prototype._getValue_arrayElement,mn.prototype._getValue_toArray],mn.prototype.SetterByBindingTypeAndVersioning=[[mn.prototype._setValue_direct,mn.prototype._setValue_direct_setNeedsUpdate,mn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[mn.prototype._setValue_array,mn.prototype._setValue_array_setNeedsUpdate,mn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[mn.prototype._setValue_arrayElement,mn.prototype._setValue_arrayElement_setNeedsUpdate,mn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[mn.prototype._setValue_fromArray,mn.prototype._setValue_fromArray_setNeedsUpdate,mn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class rK{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),c={endingStart:Gl,endingEnd:Gl};for(let l=0;l!==o;++l){const u=s[l].createInterpolant(null);a[l]=u,u.settings=c}this._interpolantSettings=c,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,a=r/s;e.warp(1,s/r,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const c=a.parameterPositions,l=a.sampleValues;return c[0]=s,c[1]=s+i,l[0]=e/o,l[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled)return void this._updateWeight(e);const s=this._startTime;if(null!==s){const c=(e-s)*i;c<0||0===i?t=0:(this._startTime=null,t=i*c)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const c=this._interpolants,l=this._propertyBindings;if(2501===this.blendMode)for(let u=0,d=c.length;u!==d;++u)c[u].evaluate(o),l[u].accumulateAdditive(a);else for(let u=0,d=c.length;u!==d;++u)c[u].evaluate(o),l[u].accumulate(r,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(null!==i){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;null!==i&&(t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=2202===i;if(0===e)return-1===s?r:o&&1==(1&s)?t-r:r;if(2200===i){-1===s&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===s&&(e>=0?(s=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const c=this.repetitions-s;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===c){const l=e<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&1==(1&s))return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=jl,r.endingEnd=jl):(r.endingStart=e?this.zeroSlopeAtStart?jl:Gl:2402,r.endingEnd=t?this.zeroSlopeAtEnd?jl:Gl:2402)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,c=o.sampleValues;return a[0]=s,c[0]=t,a[1]=s+e,c[1]=i,this}}const sK=new Float32Array(1);class Xh extends Xo{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,c=i.uuid,l=this._bindingsByRootAndName;let u=l[c];void 0===u&&(u={},l[c]=u);for(let d=0;d!==s;++d){const h=r[d],f=h.name;let p=u[f];if(void 0!==p)++p.referenceCount,o[d]=p;else{if(p=o[d],void 0!==p){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,c,f));continue}p=new YZ(mn.create(i,f,t&&t._propertyBindings[d].binding.parsedPath),h.ValueTypeName,h.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,c,f),o[d]=p}a[d].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];0==--s.useCount&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],c=a.knownActions,l=c[c.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,c[u]=l,c.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===c.length&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];0==--s.referenceCount&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];void 0===o&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],c=t[t.length-1],l=e._cacheIndex;c._cacheIndex=l,t[l]=c,t.pop(),delete a[s],0===Object.keys(a).length&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return void 0===i&&(i=new dN(new Float32Array(2),new Float32Array(2),1,sK),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o="string"==typeof e?jh.findByName(r,e):e;const a=null!==o?o.uuid:e,c=this._actionsByClip[a];let l=null;if(void 0===i&&(i=null!==o?o.blendMode:2500),void 0!==c){const d=c.actionByRoot[s];if(void 0!==d&&d.blendMode===i)return d;l=c.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;const u=new rK(this,o,t,i);return this._bindAction(u,l),this._addInactiveAction(u,a,s),u}existingAction(e,t){const i=t||this._root,r=i.uuid,s="string"==typeof e?jh.findByName(i,e):e,a=this._actionsByClip[s?s.uuid:e];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let i=this._nActiveActions-1;i>=0;--i)e[i].stop();return this}update(e){const t=this._actions,i=this._nActiveActions,r=this.time+=e*=this.timeScale,s=Math.sign(e),o=this._accuIndex^=1;for(let l=0;l!==i;++l)t[l]._update(r,e,s,o);const a=this._bindings,c=this._nActiveBindings;for(let l=0;l!==c;++l)a[l].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(void 0!==s){const o=s.knownActions;for(let a=0,c=o.length;a!==c;++a){const l=o[a];this._deactivateAction(l);const u=l._cacheIndex,d=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,d._cacheIndex=u,t[u]=d,t.pop(),this._removeInactiveBindingsForAction(l)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const c=i[o].actionByRoot[t];void 0!==c&&(this._deactivateAction(c),this._removeInactiveAction(c))}const s=this._bindingsByRootAndName[t];if(void 0!==s)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class IN{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Rn(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"157"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="157");const VN={type:"change"},mw={type:"start"},HN={type:"end"},Ym=new eu,zN=new na,cK=Math.cos(70*SO_DEG2RAD);class lK extends Xo{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new R,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(B){B.addEventListener("keydown",A),this._domElementKeyEvents=B},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",A),this._domElementKeyEvents=null},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(VN),i.update(),s=r.NONE},this.update=function(){const B=new R,Ce=(new Si).setFromUnitVectors(e.up,new R(0,1,0)),le=Ce.clone().invert(),lt=new R,nt=new Si,it=new R,Qe=2*Math.PI;return function(De=null){const Ee=i.object.position;B.copy(Ee).sub(i.target),B.applyQuaternion(Ce),a.setFromVector3(B),i.autoRotate&&s===r.NONE&&V(function C(B){return null!==B?2*Math.PI/60*i.autoRotateSpeed*B:2*Math.PI/60/60*i.autoRotateSpeed}(De)),i.enableDamping?(a.theta+=c.theta*i.dampingFactor,a.phi+=c.phi*i.dampingFactor):(a.theta+=c.theta,a.phi+=c.phi);let Pe=i.minAzimuthAngle,Ae=i.maxAzimuthAngle;isFinite(Pe)&&isFinite(Ae)&&(Pe<-Math.PI?Pe+=Qe:Pe>Math.PI&&(Pe-=Qe),Ae<-Math.PI?Ae+=Qe:Ae>Math.PI&&(Ae-=Qe),a.theta=Pe<=Ae?Math.max(Pe,Math.min(Ae,a.theta)):a.theta>(Pe+Ae)/2?Math.max(Pe,a.theta):Math.min(Ae,a.theta)),a.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,a.phi)),a.makeSafe(),!0===i.enableDamping?i.target.addScaledVector(u,i.dampingFactor):i.target.add(u),a.radius=Q(i.zoomToCursor&&T||i.object.isOrthographicCamera?a.radius:a.radius*l),B.setFromSpherical(a),B.applyQuaternion(le),Ee.copy(i.target).add(B),i.object.lookAt(i.target),!0===i.enableDamping?(c.theta*=1-i.dampingFactor,c.phi*=1-i.dampingFactor,u.multiplyScalar(1-i.dampingFactor)):(c.set(0,0,0),u.set(0,0,0));let de=!1;if(i.zoomToCursor&&T){let Je=null;if(i.object.isPerspectiveCamera){const dt=B.length();Je=Q(dt*l),i.object.position.addScaledVector(x,dt-Je),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const dt=new R(S.x,S.y,0);dt.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/l)),i.object.updateProjectionMatrix(),de=!0;const Yn=new R(S.x,S.y,0);Yn.unproject(i.object),i.object.position.sub(Yn).add(dt),i.object.updateMatrixWorld(),Je=B.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;null!==Je&&(this.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Je).add(i.object.position):(Ym.origin.copy(i.object.position),Ym.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(Ym.direction))<cK?e.lookAt(i.target):(zN.setFromNormalAndCoplanarPoint(i.object.up,i.target),Ym.intersectPlane(zN,i.target))))}else i.object.isOrthographicCamera&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/l)),i.object.updateProjectionMatrix(),de=!0);return l=1,T=!1,!!(de||lt.distanceToSquared(i.object.position)>o||8*(1-nt.dot(i.object.quaternion))>o||it.distanceToSquared(i.target)>0)&&(i.dispatchEvent(VN),lt.copy(i.object.position),nt.copy(i.object.quaternion),it.copy(i.target),de=!1,!0)}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",he),i.domElement.removeEventListener("pointerdown",ze),i.domElement.removeEventListener("pointercancel",tt),i.domElement.removeEventListener("wheel",F),i.domElement.removeEventListener("pointermove",je),i.domElement.removeEventListener("pointerup",tt),null!==i._domElementKeyEvents&&(i._domElementKeyEvents.removeEventListener("keydown",A),i._domElementKeyEvents=null)};const i=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=r.NONE;const o=1e-6,a=new IN,c=new IN;let l=1;const u=new R,d=new ie,h=new ie,f=new ie,p=new ie,_=new ie,m=new ie,g=new ie,b=new ie,w=new ie,x=new R,S=new ie;let T=!1;const E=[],O={};function I(){return Math.pow(.95,i.zoomSpeed)}function V(B){c.theta-=B}function X(B){c.phi-=B}const J=function(){const B=new R;return function(le,lt){B.setFromMatrixColumn(lt,0),B.multiplyScalar(-le),u.add(B)}}(),k=function(){const B=new R;return function(le,lt){!0===i.screenSpacePanning?B.setFromMatrixColumn(lt,1):(B.setFromMatrixColumn(lt,0),B.crossVectors(i.object.up,B)),B.multiplyScalar(le),u.add(B)}}(),j=function(){const B=new R;return function(le,lt){const nt=i.domElement;if(i.object.isPerspectiveCamera){B.copy(i.object.position).sub(i.target);let Qe=B.length();Qe*=Math.tan(i.object.fov/2*Math.PI/180),J(2*le*Qe/nt.clientHeight,i.object.matrix),k(2*lt*Qe/nt.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(J(le*(i.object.right-i.object.left)/i.object.zoom/nt.clientWidth,i.object.matrix),k(lt*(i.object.top-i.object.bottom)/i.object.zoom/nt.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function Y(B){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?l/=B:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function Z(B){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?l*=B:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function ge(B){if(!i.zoomToCursor)return;T=!0;const Ce=i.domElement.getBoundingClientRect(),lt=B.clientY-Ce.top,it=Ce.height;S.x=(B.clientX-Ce.left)/Ce.width*2-1,S.y=-lt/it*2+1,x.set(S.x,S.y,1).unproject(i.object).sub(i.object.position).normalize()}function Q(B){return Math.max(i.minDistance,Math.min(i.maxDistance,B))}function se(B){d.set(B.clientX,B.clientY)}function ee(B){p.set(B.clientX,B.clientY)}function Be(){1===E.length?d.set(E[0].pageX,E[0].pageY):d.set(.5*(E[0].pageX+E[1].pageX),.5*(E[0].pageY+E[1].pageY))}function wt(){1===E.length?p.set(E[0].pageX,E[0].pageY):p.set(.5*(E[0].pageX+E[1].pageX),.5*(E[0].pageY+E[1].pageY))}function At(){const B=E[0].pageX-E[1].pageX,Ce=E[0].pageY-E[1].pageY,le=Math.sqrt(B*B+Ce*Ce);g.set(0,le)}function me(B){if(1==E.length)h.set(B.pageX,B.pageY);else{const le=Fe(B);h.set(.5*(B.pageX+le.x),.5*(B.pageY+le.y))}f.subVectors(h,d).multiplyScalar(i.rotateSpeed);const Ce=i.domElement;V(2*Math.PI*f.x/Ce.clientHeight),X(2*Math.PI*f.y/Ce.clientHeight),d.copy(h)}function re(B){if(1===E.length)_.set(B.pageX,B.pageY);else{const Ce=Fe(B);_.set(.5*(B.pageX+Ce.x),.5*(B.pageY+Ce.y))}m.subVectors(_,p).multiplyScalar(i.panSpeed),j(m.x,m.y),p.copy(_)}function we(B){const Ce=Fe(B),le=B.pageX-Ce.x,lt=B.pageY-Ce.y,nt=Math.sqrt(le*le+lt*lt);b.set(0,nt),w.set(0,Math.pow(b.y/g.y,i.zoomSpeed)),Y(w.y),g.copy(b)}function ze(B){!1!==i.enabled&&(0===E.length&&(i.domElement.setPointerCapture(B.pointerId),i.domElement.addEventListener("pointermove",je),i.domElement.addEventListener("pointerup",tt)),function be(B){E.push(B)}(B),"touch"===B.pointerType?function $(B){switch(Se(B),E.length){case 1:switch(i.touches.ONE){case 0:if(!1===i.enableRotate)return;Be(),s=r.TOUCH_ROTATE;break;case 1:if(!1===i.enablePan)return;wt(),s=r.TOUCH_PAN;break;default:s=r.NONE}break;case 2:switch(i.touches.TWO){case 2:if(!1===i.enableZoom&&!1===i.enablePan)return;(function Ye(){i.enableZoom&&At(),i.enablePan&&wt()})(),s=r.TOUCH_DOLLY_PAN;break;case 3:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function D(){i.enableZoom&&At(),i.enableRotate&&Be()})(),s=r.TOUCH_DOLLY_ROTATE;break;default:s=r.NONE}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(mw)}(B):function Mt(B){let Ce;switch(B.button){case 0:Ce=i.mouseButtons.LEFT;break;case 1:Ce=i.mouseButtons.MIDDLE;break;case 2:Ce=i.mouseButtons.RIGHT;break;default:Ce=-1}switch(Ce){case 1:if(!1===i.enableZoom)return;(function H(B){ge(B),g.set(B.clientX,B.clientY)})(B),s=r.DOLLY;break;case 0:if(B.ctrlKey||B.metaKey||B.shiftKey){if(!1===i.enablePan)return;ee(B),s=r.PAN}else{if(!1===i.enableRotate)return;se(B),s=r.ROTATE}break;case 2:if(B.ctrlKey||B.metaKey||B.shiftKey){if(!1===i.enableRotate)return;se(B),s=r.ROTATE}else{if(!1===i.enablePan)return;ee(B),s=r.PAN}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(mw)}(B))}function je(B){!1!==i.enabled&&("touch"===B.pointerType?function ve(B){switch(Se(B),s){case r.TOUCH_ROTATE:if(!1===i.enableRotate)return;me(B),i.update();break;case r.TOUCH_PAN:if(!1===i.enablePan)return;re(B),i.update();break;case r.TOUCH_DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;(function ce(B){i.enableZoom&&we(B),i.enablePan&&re(B)})(B),i.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function Ze(B){i.enableZoom&&we(B),i.enableRotate&&me(B)})(B),i.update();break;default:s=r.NONE}}(B):function un(B){switch(s){case r.ROTATE:if(!1===i.enableRotate)return;!function ye(B){h.set(B.clientX,B.clientY),f.subVectors(h,d).multiplyScalar(i.rotateSpeed);const Ce=i.domElement;V(2*Math.PI*f.x/Ce.clientHeight),X(2*Math.PI*f.y/Ce.clientHeight),d.copy(h),i.update()}(B);break;case r.DOLLY:if(!1===i.enableZoom)return;!function Me(B){b.set(B.clientX,B.clientY),w.subVectors(b,g),w.y>0?Y(I()):w.y<0&&Z(I()),g.copy(b),i.update()}(B);break;case r.PAN:if(!1===i.enablePan)return;!function xe(B){_.set(B.clientX,B.clientY),m.subVectors(_,p).multiplyScalar(i.panSpeed),j(m.x,m.y),p.copy(_),i.update()}(B)}}(B))}function tt(B){(function Ke(B){delete O[B.pointerId];for(let Ce=0;Ce<E.length;Ce++)if(E[Ce].pointerId==B.pointerId)return void E.splice(Ce,1)})(B),0===E.length&&(i.domElement.releasePointerCapture(B.pointerId),i.domElement.removeEventListener("pointermove",je),i.domElement.removeEventListener("pointerup",tt)),i.dispatchEvent(HN),s=r.NONE}function F(B){!1===i.enabled||!1===i.enableZoom||s!==r.NONE||(B.preventDefault(),i.dispatchEvent(mw),function He(B){ge(B),B.deltaY<0?Z(I()):B.deltaY>0&&Y(I()),i.update()}(B),i.dispatchEvent(HN))}function A(B){!1===i.enabled||!1===i.enablePan||function Ge(B){let Ce=!1;switch(B.code){case i.keys.UP:B.ctrlKey||B.metaKey||B.shiftKey?X(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):j(0,i.keyPanSpeed),Ce=!0;break;case i.keys.BOTTOM:B.ctrlKey||B.metaKey||B.shiftKey?X(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):j(0,-i.keyPanSpeed),Ce=!0;break;case i.keys.LEFT:B.ctrlKey||B.metaKey||B.shiftKey?V(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):j(i.keyPanSpeed,0),Ce=!0;break;case i.keys.RIGHT:B.ctrlKey||B.metaKey||B.shiftKey?V(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):j(-i.keyPanSpeed,0),Ce=!0}Ce&&(B.preventDefault(),i.update())}(B)}function he(B){!1!==i.enabled&&B.preventDefault()}function Se(B){let Ce=O[B.pointerId];void 0===Ce&&(Ce=new ie,O[B.pointerId]=Ce),Ce.set(B.pageX,B.pageY)}function Fe(B){return O[(B.pointerId===E[0].pointerId?E[1]:E[0]).pointerId]}i.domElement.addEventListener("contextmenu",he),i.domElement.addEventListener("pointerdown",ze),i.domElement.addEventListener("pointercancel",tt),i.domElement.addEventListener("wheel",F,{passive:!1}),this.update()}}function GN(n,e){if(0===e)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(2===e||1===e){let t=n.getIndex();if(null===t){const o=[],a=n.getAttribute("position");if(void 0===a)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n;for(let c=0;c<a.count;c++)o.push(c);n.setIndex(o),t=n.getIndex()}const i=t.count-2,r=[];if(2===e)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2==0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}class dK extends Wh{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new mK(t)}),this.register(function(t){return new SK(t)}),this.register(function(t){return new CK(t)}),this.register(function(t){return new EK(t)}),this.register(function(t){return new vK(t)}),this.register(function(t){return new yK(t)}),this.register(function(t){return new bK(t)}),this.register(function(t){return new wK(t)}),this.register(function(t){return new gK(t)}),this.register(function(t){return new xK(t)}),this.register(function(t){return new _K(t)}),this.register(function(t){return new MK(t)}),this.register(function(t){return new fK(t)}),this.register(function(t){return new TK(t)}),this.register(function(t){return new DK(t)})}load(e,t,i,r){const s=this;let o;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:Yh.extractUrlBase(e),this.manager.itemStart(e);const a=function(l){r?r(l):console.error(l),s.manager.itemError(e),s.manager.itemEnd(e)},c=new ks(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(l){try{s.parse(l,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={},c=new TextDecoder;if("string"==typeof e)s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(c.decode(new Uint8Array(e,0,4))===jN){try{o[Lt.KHR_BINARY_GLTF]=new AK(e)}catch(d){return void(r&&r(d))}s=JSON.parse(o[Lt.KHR_BINARY_GLTF].content)}else s=JSON.parse(c.decode(e));else s=e;if(void 0===s.asset||s.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new zK(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const d=this.pluginCallbacks[u](l);a[d.name]=d,o[d.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const d=s.extensionsUsed[u],h=s.extensionsRequired||[];switch(d){case Lt.KHR_MATERIALS_UNLIT:o[d]=new pK;break;case Lt.KHR_DRACO_MESH_COMPRESSION:o[d]=new IK(s,this.dracoLoader);break;case Lt.KHR_TEXTURE_TRANSFORM:o[d]=new RK;break;case Lt.KHR_MESH_QUANTIZATION:o[d]=new OK;break;default:h.indexOf(d)>=0&&void 0===a[d]&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function hK(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Lt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class fK{constructor(e){this.parser=e,this.name=Lt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,c=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let l;const u=new Ne(16777215);void 0!==c.color&&u.setRGB(c.color[0],c.color[1],c.color[2],Mi);const d=void 0!==c.range?c.range:0;switch(c.type){case"directional":l=new qh(u),l.target.position.set(0,0,-1),l.add(l.target);break;case"point":l=new vN(u),l.distance=d;break;case"spot":l=new mN(u),l.distance=d,c.spot=c.spot||{},c.spot.innerConeAngle=void 0!==c.spot.innerConeAngle?c.spot.innerConeAngle:0,c.spot.outerConeAngle=void 0!==c.spot.outerConeAngle?c.spot.outerConeAngle:Math.PI/4,l.angle=c.spot.outerConeAngle,l.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return l.position.set(0,0,0),l.decay=2,oa(l,c),void 0!==c.intensity&&(l.intensity=c.intensity),l.name=t.createUniqueName(c.name||"light_"+e),r=Promise.resolve(l),t.cache.add(i,r),r}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then(function(c){return i._getNodeRef(t.cache,a,c)})}}class pK{constructor(){this.name=Lt.KHR_MATERIALS_UNLIT}getMaterialType(){return fi}extendParams(e,t,i){const r=[];e.color=new Ne(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],Mi),e.opacity=o[3]}void 0!==s.baseColorTexture&&r.push(i.assignTexture(e,"map",s.baseColorTexture,Cn))}return Promise.all(r)}}class gK{constructor(e){this.parser=e,this.name=Lt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return void 0!==s&&(t.emissiveIntensity=s),Promise.resolve()}}class mK{constructor(e){this.parser=e,this.name=Lt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?yo:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ie(a,a)}return Promise.all(s)}}class _K{constructor(e){this.parser=e,this.name=Lt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?yo:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class vK{constructor(e){this.parser=e,this.name=Lt.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?yo:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Ne(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(void 0!==o.sheenColorFactor){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],Mi)}return void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Cn)),void 0!==o.sheenRoughnessTexture&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class yK{constructor(e){this.parser=e,this.name=Lt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?yo:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class bK{constructor(e){this.parser=e,this.name=Lt.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?yo:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=(new Ne).setRGB(a[0],a[1],a[2],Mi),Promise.all(s)}}class wK{constructor(e){this.parser=e,this.name=Lt.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?yo:null}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class xK{constructor(e){this.parser=e,this.name=Lt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?yo:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=(new Ne).setRGB(a[0],a[1],a[2],Mi),void 0!==o.specularColorTexture&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,Cn)),Promise.all(s)}}class MK{constructor(e){this.parser=e,this.name=Lt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?yo:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.anisotropyStrength&&(t.anisotropy=o.anisotropyStrength),void 0!==o.anisotropyRotation&&(t.anisotropyRotation=o.anisotropyRotation),void 0!==o.anisotropyTexture&&s.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class SK{constructor(e){this.parser=e,this.name=Lt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class CK{constructor(e){this.parser=e,this.name=Lt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let c=i.textureLoader;if(a.uri){const l=i.options.manager.getHandler(a.uri);null!==l&&(c=l)}return this.detectSupport().then(function(l){if(l)return i.loadTextureImage(e,o.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class EK{constructor(e){this.parser=e,this.name=Lt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let c=i.textureLoader;if(a.uri){const l=i.options.manager.getHandler(a.uri);null!==l&&(c=l)}return this.detectSupport().then(function(l){if(l)return i.loadTextureImage(e,o.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class TK{constructor(e){this.name=Lt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const u=r.count,d=r.byteStride,h=new Uint8Array(a,r.byteOffset||0,r.byteLength||0);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,d,h,r.mode,r.filter).then(function(f){return f.buffer}):o.ready.then(function(){const f=new ArrayBuffer(u*d);return o.decodeGltfBuffer(new Uint8Array(f),u,d,h,r.mode,r.filter),f})})}return null}}class DK{constructor(e){this.name=Lt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||void 0===i.mesh)return null;const r=t.meshes[i.mesh];for(const l of r.primitives)if(l.mode!==$r.TRIANGLES&&l.mode!==$r.TRIANGLE_STRIP&&l.mode!==$r.TRIANGLE_FAN&&void 0!==l.mode)return null;const o=i.extensions[this.name].attributes,a=[],c={};for(const l in o)a.push(this.parser.getDependency("accessor",o[l]).then(u=>(c[l]=u,c[l])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(l=>{const u=l.pop(),d=u.isGroup?u.children:[u],h=l[0].count,f=[];for(const p of d){const _=new ht,m=new R,g=new Si,b=new R(1,1,1),w=new UP(p.geometry,p.material,h);for(let x=0;x<h;x++)c.TRANSLATION&&m.fromBufferAttribute(c.TRANSLATION,x),c.ROTATION&&g.fromBufferAttribute(c.ROTATION,x),c.SCALE&&b.fromBufferAttribute(c.SCALE,x),w.setMatrixAt(x,_.compose(m,g,b));for(const x in c)"TRANSLATION"!==x&&"ROTATION"!==x&&"SCALE"!==x&&p.geometry.setAttribute(x,c[x]);hi.prototype.copy.call(w,p),this.parser.assignFinalMaterial(w),f.push(w)}return u.isGroup?(u.clear(),u.add(...f),u):f[0]}))}}const jN="glTF";class AK{constructor(e){this.name=Lt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==jN)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-12,s=new DataView(e,12);let o=0;for(;o<r;){const a=s.getUint32(o,!0);o+=4;const c=s.getUint32(o,!0);if(o+=4,1313821514===c){const l=new Uint8Array(e,12+o,a);this.content=i.decode(l)}else if(5130562===c){const l=12+o;this.body=e.slice(l,l+a)}o+=a}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class IK{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Lt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},c={},l={};for(const u in o){const d=bw[u]||u.toLowerCase();a[d]=o[u]}for(const u in e.attributes){const d=bw[u]||u.toLowerCase();if(void 0!==o[u]){const h=i.accessors[e.attributes[u]];l[d]=Du[h.componentType].name,c[d]=!0===h.normalized}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(d){r.decodeDracoFile(u,function(h){for(const f in h.attributes){const _=c[f];void 0!==_&&(h.attributes[f].normalized=_)}d(h)},a,l)})})}}class RK{constructor(){this.name=Lt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(void 0===t.texCoord||t.texCoord===e.channel)&&void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class OK{constructor(){this.name=Lt.KHR_MESH_QUANTIZATION}}class $N extends Gh{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=2*a,l=3*a,u=r-t,d=(i-t)/u,h=d*d,f=h*d,p=e*l,_=p-l,m=-2*f+3*h,g=f-h,b=1-m,w=g-h+d;for(let x=0;x!==a;x++)s[x]=b*o[_+x+a]+w*(o[_+x+c]*u)+m*o[p+x+a]+g*(o[p+x]*u);return s}}const PK=new Si;class NK extends $N{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return PK.fromArray(s).normalize().toArray(s),s}}const $r={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Du={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},qN={9728:zn,9729:In,9984:1004,9985:1007,9986:1005,9987:ao},YN={33071:Oi,33648:1002,10497:ka},yw={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},bw={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},sa={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},FK={CUBICSPLINE:void 0,LINEAR:zl,STEP:bh};function lc(n,e,t){for(const i in t.extensions)void 0===n[i]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function oa(n,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function BK(n,e){if(n.updateMorphTargets(),void 0!==e.weights)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function UK(n){let e;const t=n.extensions&&n.extensions[Lt.KHR_DRACO_MESH_COMPRESSION];if(e=t?"draco:"+t.bufferView+":"+t.indices+":"+xw(t.attributes):n.indices+":"+xw(n.attributes)+":"+n.mode,void 0!==n.targets)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+xw(n.targets[i]);return e}function xw(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function Mw(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const HK=new ht;class zK{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new hK,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&(i=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),this.textureLoader=typeof createImageBitmap>"u"||i||r&&s<98?new ic(this.options.manager):new WZ(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ks(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};return lc(s,a,r),oa(a,r),Promise.all(i._invokeAll(function(c){return c.afterRoot&&c.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,c=o.length;a<c;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];void 0!==o.mesh&&(this._addNodeRef(this.meshCache,o.mesh),void 0!==o.skin&&(i[o.mesh].isSkinnedMesh=!0)),void 0!==o.camera&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const c=this.associations.get(o);null!=c&&this.associations.set(a,c);for(const[l,u]of o.children.entries())s(u,a.children[l])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e)}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[Lt.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(Yh.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const s=t.byteOffset||0;return i.slice(s,s+(t.byteLength||0))})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){const o=yw[r.type],c=!0===r.normalized,l=new(0,Du[r.componentType])(r.count*o);return Promise.resolve(new On(l,o,c))}const s=[];return s.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],c=yw[r.type],l=Du[r.componentType],u=l.BYTES_PER_ELEMENT,h=r.byteOffset||0,f=void 0!==r.bufferView?i.bufferViews[r.bufferView].byteStride:void 0,p=!0===r.normalized;let _,m;if(f&&f!==u*c){const g=Math.floor(h/f),b="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+g+":"+r.count;let w=t.cache.get(b);w||(_=new l(a,g*f,r.count*f/u),w=new A1(_,f/u),t.cache.add(b,w)),m=new Za(w,c,h%f/u,p)}else _=null===a?new l(r.count*c):new l(a,h,r.count*c),m=new On(_,c,p);if(void 0!==r.sparse){const x=r.sparse.values.byteOffset||0,S=new(0,Du[r.sparse.indices.componentType])(o[1],r.sparse.indices.byteOffset||0,r.sparse.count*yw.SCALAR),T=new l(o[2],x,r.sparse.count*c);null!==a&&(m=new On(m.array.slice(),m.itemSize,m.normalized));for(let E=0,O=S.length;E<O;E++){const C=S[E];if(m.setX(C,T[E*c]),c>=2&&m.setY(C,T[E*c+1]),c>=3&&m.setZ(C,T[E*c+2]),c>=4&&m.setW(C,T[E*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return m})}loadTexture(e){const t=this.json,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const c=this.options.manager.getHandler(o.uri);null!==c&&(a=c)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],c=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[c])return this.textureCache[c];const l=this.loadImageSource(t,i).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",""===u.name&&"string"==typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(u.name=a.uri);const h=(s.samplers||{})[o.sampler]||{};return u.magFilter=qN[h.magFilter]||In,u.minFilter=qN[h.minFilter]||ao,u.wrapS=YN[h.wrapS]||ka,u.wrapT=YN[h.wrapT]||ka,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[c]=l,l}loadImageSource(e,t){const r=this.json,s=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(d=>d.clone());const o=r.images[e],a=self.URL||self.webkitURL;let c=o.uri||"",l=!1;if(void 0!==o.bufferView)c=this.getDependency("bufferView",o.bufferView).then(function(d){l=!0;const h=new Blob([d],{type:o.mimeType});return c=a.createObjectURL(h),c});else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(c).then(function(d){return new Promise(function(h,f){let p=h;!0===t.isImageBitmapLoader&&(p=function(_){const m=new us(_);m.needsUpdate=!0,h(m)}),t.load(Yh.resolveURL(d,s.path),p,void 0,f)})}).then(function(d){return!0===l&&a.revokeObjectURL(c),d.userData.mimeType=o.mimeType||function VK(n){return n.search(/\.jpe?g($|\?)/i)>0||0===n.search(/^data\:image\/jpeg/)?"image/jpeg":n.search(/\.webp($|\?)/i)>0||0===n.search(/^data\:image\/webp/)?"image/webp":"image/png"}(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),d});return this.sourceCache[e]=u,u}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(void 0!==i.texCoord&&i.texCoord>0&&((o=o.clone()).channel=i.texCoord),s.extensions[Lt.KHR_TEXTURE_TRANSFORM]){const a=void 0!==i.extensions?i.extensions[Lt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const c=s.associations.get(o);o=s.extensions[Lt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,c)}}return void 0!==r&&(o.colorSpace=r),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=void 0===t.attributes.tangent,s=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let c=this.cache.get(a);c||(c=new L1,gs.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,c.sizeAttenuation=!1,this.cache.add(a,c)),i=c}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let c=this.cache.get(a);c||(c=new lr,gs.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,this.cache.add(a,c)),i=c}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let c=this.cache.get(a);c||(c=i.clone(),s&&(c.vertexColors=!0),o&&(c.flatShading=!0),r&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(a,c),this.associations.set(c,this.associations.get(i))),i=c}e.material=i}getMaterialType(){return Um}loadMaterial(e){const t=this,r=this.extensions,s=this.json.materials[e];let o;const a={},l=[];if((s.extensions||{})[Lt.KHR_MATERIALS_UNLIT]){const d=r[Lt.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),l.push(d.extendParams(a,s,t))}else{const d=s.pbrMetallicRoughness||{};if(a.color=new Ne(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const h=d.baseColorFactor;a.color.setRGB(h[0],h[1],h[2],Mi),a.opacity=h[3]}void 0!==d.baseColorTexture&&l.push(t.assignTexture(a,"map",d.baseColorTexture,Cn)),a.metalness=void 0!==d.metallicFactor?d.metallicFactor:1,a.roughness=void 0!==d.roughnessFactor?d.roughnessFactor:1,void 0!==d.metallicRoughnessTexture&&(l.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),l.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),l.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}!0===s.doubleSided&&(a.side=2);const u=s.alphaMode||"OPAQUE";if("BLEND"===u?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===u&&(a.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&o!==fi&&(l.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new ie(1,1),void 0!==s.normalTexture.scale)){const d=s.normalTexture.scale;a.normalScale.set(d,d)}if(void 0!==s.occlusionTexture&&o!==fi&&(l.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(a.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&o!==fi){const d=s.emissiveFactor;a.emissive=(new Ne).setRGB(d[0],d[1],d[2],Mi)}return void 0!==s.emissiveTexture&&o!==fi&&l.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,Cn)),Promise.all(l).then(function(){const d=new o(a);return s.name&&(d.name=s.name),oa(d,s),t.associations.set(d,{materials:e}),s.extensions&&lc(r,d,s),d})}createUniqueName(e){const t=mn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Lt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(c){return XN(c,a,t)})}const o=[];for(let a=0,c=e.length;a<c;a++){const l=e[a],u=UK(l),d=r[u];if(d)o.push(d.promise);else{let h;h=l.extensions&&l.extensions[Lt.KHR_DRACO_MESH_COMPRESSION]?s(l):XN(new It,l,t),r[u]={primitive:l,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.extensions,s=this.json.meshes[e],o=s.primitives,a=[];for(let c=0,l=o.length;c<l;c++){const u=void 0===o[c].material?(void 0===(n=this.cache).DefaultMaterial&&(n.DefaultMaterial=new Um({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),n.DefaultMaterial):this.getDependency("material",o[c].material);a.push(u)}var n;return a.push(t.loadGeometries(o)),Promise.all(a).then(function(c){const l=c.slice(0,c.length-1),u=c[c.length-1],d=[];for(let f=0,p=u.length;f<p;f++){const _=u[f],m=o[f];let g;const b=l[f];if(m.mode===$r.TRIANGLES||m.mode===$r.TRIANGLE_STRIP||m.mode===$r.TRIANGLE_FAN||void 0===m.mode)g=!0===s.isSkinnedMesh?new FP(_,b):new Ci(_,b),!0===g.isSkinnedMesh&&g.normalizeSkinWeights(),m.mode===$r.TRIANGLE_STRIP?g.geometry=GN(g.geometry,1):m.mode===$r.TRIANGLE_FAN&&(g.geometry=GN(g.geometry,2));else if(m.mode===$r.LINES)g=new F1(_,b);else if(m.mode===$r.LINE_STRIP)g=new Ka(_,b);else if(m.mode===$r.LINE_LOOP)g=new WP(_,b);else{if(m.mode!==$r.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+m.mode);g=new qP(_,b)}Object.keys(g.geometry.morphAttributes).length>0&&BK(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),oa(g,s),m.extensions&&lc(r,g,m),t.assignFinalMaterial(g),d.push(g)}for(let f=0,p=d.length;f<p;f++)t.associations.set(d[f],{meshes:e,primitives:f});if(1===d.length)return s.extensions&&lc(r,d[0],s),d[0];const h=new ia;s.extensions&&lc(r,h,s),t.associations.set(h,{meshes:e});for(let f=0,p=d.length;f<p;f++)h.add(d[f]);return h})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(r)return"perspective"===i.type?t=new gi(SO_radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===i.type&&(t=new pm(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),oa(t,i),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return i.push(void 0!==t.inverseBindMatrices?this.getDependency("accessor",t.inverseBindMatrices):null),Promise.all(i).then(function(r){const s=r.pop(),o=r,a=[],c=[];for(let l=0,u=o.length;l<u;l++){const d=o[l];if(d){a.push(d);const h=new ht;null!==s&&h.fromArray(s.array,16*l),c.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[l])}return new xm(a,c)})}loadAnimation(e){const i=this,r=this.json.animations[e],s=r.name?r.name:"animation_"+e,o=[],a=[],c=[],l=[],u=[];for(let d=0,h=r.channels.length;d<h;d++){const f=r.channels[d],p=r.samplers[f.sampler],_=f.target,g=void 0!==r.parameters?r.parameters[p.input]:p.input,b=void 0!==r.parameters?r.parameters[p.output]:p.output;void 0!==_.node&&(o.push(this.getDependency("node",_.node)),a.push(this.getDependency("accessor",g)),c.push(this.getDependency("accessor",b)),l.push(p),u.push(_))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(c),Promise.all(l),Promise.all(u)]).then(function(d){const h=d[0],f=d[1],p=d[2],_=d[3],m=d[4],g=[];for(let b=0,w=h.length;b<w;b++){const x=h[b],S=f[b],T=p[b],E=_[b],O=m[b];if(void 0===x)continue;x.updateMatrix&&x.updateMatrix();const C=i._createAnimationTracks(x,S,T,E,O);if(C)for(let I=0;I<C.length;I++)g.push(C[I])}return new jh(s,void 0,g)})}createNodeMesh(e){const i=this,r=this.json.nodes[e];return void 0===r.mesh?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return void 0!==r.weights&&o.traverse(function(a){if(a.isMesh)for(let c=0,l=r.weights.length;c<l;c++)a.morphTargetInfluences[c]=r.weights[c]}),o})}loadNode(e){const i=this,r=this.json.nodes[e],s=i._loadNodeShallow(e),o=[],a=r.children||[];for(let l=0,u=a.length;l<u;l++)o.push(i.getDependency("node",a[l]));const c=void 0===r.skin?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),c]).then(function(l){const u=l[0],d=l[1],h=l[2];null!==h&&u.traverse(function(f){f.isSkinnedMesh&&f.bind(h,HK)});for(let f=0,p=d.length;f<p;f++)u.add(d[f]);return u})}_loadNodeShallow(e){const i=this.extensions,r=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const s=this.json.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],c=r._invokeOne(function(l){return l.createNodeMesh&&l.createNodeMesh(e)});return c&&a.push(c),void 0!==s.camera&&a.push(r.getDependency("camera",s.camera).then(function(l){return r._getNodeRef(r.cameraCache,s.camera,l)})),r._invokeAll(function(l){return l.createNodeAttachment&&l.createNodeAttachment(e)}).forEach(function(l){a.push(l)}),this.nodeCache[e]=Promise.all(a).then(function(l){let u;if(u=!0===s.isBone?new P1:l.length>1?new ia:1===l.length?l[0]:new hi,u!==l[0])for(let d=0,h=l.length;d<h;d++)u.add(l[d]);if(s.name&&(u.userData.name=s.name,u.name=o),oa(u,s),s.extensions&&lc(i,u,s),void 0!==s.matrix){const d=new ht;d.fromArray(s.matrix),u.applyMatrix4(d)}else void 0!==s.translation&&u.position.fromArray(s.translation),void 0!==s.rotation&&u.quaternion.fromArray(s.rotation),void 0!==s.scale&&u.scale.fromArray(s.scale);return r.associations.has(u)||r.associations.set(u,{}),r.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new ia;i.name&&(s.name=r.createUniqueName(i.name)),oa(s,i),i.extensions&&lc(t,s,i);const o=i.nodes||[],a=[];for(let c=0,l=o.length;c<l;c++)a.push(r.getDependency("node",o[c]));return Promise.all(a).then(function(c){for(let u=0,d=c.length;u<d;u++)s.add(c[u]);return r.associations=(u=>{const d=new Map;for(const[h,f]of r.associations)(h instanceof gs||h instanceof us)&&d.set(h,f);return u.traverse(h=>{const f=r.associations.get(h);null!=f&&d.set(h,f)}),d})(s),s})}_createAnimationTracks(e,t,i,r,s){const o=[],a=e.name?e.name:e.uuid,c=[];let l;switch(sa[s.path]===sa.weights?e.traverse(function(h){h.morphTargetInfluences&&c.push(h.name?h.name:h.uuid)}):c.push(a),sa[s.path]){case sa.weights:l=Su;break;case sa.rotation:l=nc;break;case sa.position:case sa.scale:l=Eu;break;default:l=1===i.itemSize?Su:Eu}const u=void 0!==r.interpolation?FK[r.interpolation]:zl,d=this._getArrayFromAccessor(i);for(let h=0,f=c.length;h<f;h++){const p=new l(c[h]+"."+sa[s.path],t.array,d,u);"CUBICSPLINE"===r.interpolation&&this._createCubicSplineTrackInterpolant(p),o.push(p)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=Mw(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){return new(this instanceof nc?NK:$N)(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function XN(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(c){n.setAttribute(a,c)})}for(const o in i){const a=bw[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(void 0!==e.indices&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return Jt.workingColorSpace!==Mi&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Jt.workingColorSpace}" not supported.`),oa(n,e),function GK(n,e,t){const i=e.attributes,r=new ds;if(void 0===i.POSITION)return;{const a=t.json.accessors[i.POSITION],c=a.min,l=a.max;if(void 0===c||void 0===l)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new R(c[0],c[1],c[2]),new R(l[0],l[1],l[2])),a.normalized){const u=Mw(Du[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}const s=e.targets;if(void 0!==s){const a=new R,c=new R;for(let l=0,u=s.length;l<u;l++){const d=s[l];if(void 0!==d.POSITION){const h=t.json.accessors[d.POSITION],f=h.min,p=h.max;if(void 0!==f&&void 0!==p){if(c.setX(Math.max(Math.abs(f[0]),Math.abs(p[0]))),c.setY(Math.max(Math.abs(f[1]),Math.abs(p[1]))),c.setZ(Math.max(Math.abs(f[2]),Math.abs(p[2]))),h.normalized){const _=Mw(Du[h.componentType]);c.multiplyScalar(_)}a.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new hs;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}(n,e,t),Promise.all(r).then(function(){return void 0!==e.targets?function kK(n,e,t){let i=!1,r=!1,s=!1;for(let l=0,u=e.length;l<u;l++){const d=e[l];if(void 0!==d.POSITION&&(i=!0),void 0!==d.NORMAL&&(r=!0),void 0!==d.COLOR_0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],c=[];for(let l=0,u=e.length;l<u;l++){const d=e[l];if(i){const h=void 0!==d.POSITION?t.getDependency("accessor",d.POSITION):n.attributes.position;o.push(h)}if(r){const h=void 0!==d.NORMAL?t.getDependency("accessor",d.NORMAL):n.attributes.normal;a.push(h)}if(s){const h=void 0!==d.COLOR_0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;c.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(c)]).then(function(l){const d=l[1],h=l[2];return i&&(n.morphAttributes.position=l[0]),r&&(n.morphAttributes.normal=d),s&&(n.morphAttributes.color=h),n.morphTargetsRelative=!0,n})}(n,e.targets,t):n})}const jK=function(n,e){return{display:n,opacity:e}},Au=function(n,e){return{display:n,opacity:e}};function YK(n,e){1&n&&(v(0,"div",12)(1,"div",13)(2,"h3",14),M(3,"Football Players Tracking from Multiple Cameras using Deep Learning - Graduation Project"),y(),v(4,"h4",15),M(5,"Sponsored by KoraStats"),y(),v(6,"h5",15),M(7,"Sep 2023 - Present"),y(),v(8,"div",16)(9,"ul")(10,"li"),M(11,"Five module system that tracks football players in a match across 2-3 cameras using computer vision and deep learning"),y(),v(12,"li"),M(13,"Implemented the path predictor module using an Encoder-Decoder Network to efficiently get the trajectory of the player on the screen to predict occlusions with other players"),y(),v(14,"li"),M(15,"Integrated the 5 modules into a multithreaded system that efficiently manages memory and CPU resources"),y()(),v(16,"button",17),M(17,"Thesis-1 Document "),P(18,"i",18),y()(),v(19,"div",19)(20,"a",20),P(21,"img",21),y(),v(22,"a",22),P(23,"img",23),y(),v(24,"a",24),P(25,"img",25),y(),P(26,"br"),v(27,"a",26),P(28,"img",27),y(),v(29,"a",28),P(30,"img",29),y(),v(31,"a",30),P(32,"img",31),y(),P(33,"br"),v(34,"a",32),P(35,"img",33),y(),v(36,"a",34),P(37,"img",35),y()()()())}function XK(n,e){1&n&&(v(0,"div",12)(1,"div",13)(2,"h3",14),M(3,"This Website :D"),y(),v(4,"h5",15),M(5,"Feb 2024 - Mar 2024"),y(),P(6,"br"),v(7,"div",19)(8,"a",36),P(9,"img",37),y(),v(10,"a",38),P(11,"img",39),y(),v(12,"a",40),P(13,"img",41),y(),P(14,"br"),v(15,"a",42),P(16,"img",43),y(),v(17,"a",44),P(18,"img",45),y(),v(19,"a",46),P(20,"img",47),y(),P(21,"br"),v(22,"a",48),P(23,"img",49),y()()()())}function JK(n,e){1&n&&(v(0,"div",12)(1,"div",13)(2,"h3",14),M(3,"Sentiment Analysis on Social Media Platforms using Machine and Deep Learning"),y(),v(4,"h5",15),M(5,"Dec 2023 - Jan 2024"),y(),v(6,"div",16)(7,"ul")(8,"li"),M(9,"Compare and assess machine learning algorithms such as KNN, SVM, Na\xefve Bayes Classifiers, Random Forest, and Logistic Regression"),y(),v(10,"li"),M(11,"Seeing how Deep Learning algorithms perform using datasets from Twitter that are available in both Arabic and English"),y(),v(12,"li"),M(13,"Applying different feature extraction and hyperparameter optimization methods"),y()()(),v(14,"div",19)(15,"a",20),P(16,"img",21),y(),v(17,"a",26),P(18,"img",27),y(),v(19,"a",28),P(20,"img",29),y(),P(21,"br"),v(22,"a",50),P(23,"img",51),y(),v(24,"a",30),P(25,"img",31),y()()()())}function ZK(n,e){if(1&n){const t=rr();v(0,"div",12)(1,"div",13)(2,"h3",14),M(3,"Secure Encrypted Outlook App"),y(),v(4,"h5",15),M(5,"Dec 2023 - Jan 2024"),y(),v(6,"div",16)(7,"ul")(8,"li"),M(9,"Used PyWin32 to interact with the local Outlook App and read its inbox as well as send emails"),y(),v(10,"li"),M(11,"Encrypted emails with AES and included a Digital Signature using RSA and SHA-256"),y(),v(12,"li"),M(13,"Key shared by storing users\u2019 public keys on MongoDB for any other users to retrieve and share AES keys securely"),y()(),v(14,"button",52),M(15,"Project Repo "),P(16,"i",53),y()(),v(17,"div",54)(18,"img",55),pe("click",function(){return ki(t),Bi(rt().open("../../assets/projects/secureoutlookarch.png"))}),y()(),v(19,"div",19)(20,"a",20),P(21,"img",21),y(),v(22,"a",56),P(23,"img",57),y(),v(24,"a",58),P(25,"img",59),y()()()()}2&n&&(_e(18),fe("src","../../assets/projects/secureoutlookarch.png",vr))}function KK(n,e){1&n&&(v(0,"div",12)(1,"div",13)(2,"h3",14),M(3,"University Carpool Mobile App"),y(),v(4,"h5",15),M(5,"Nov 2023 - Dec 2023"),y(),v(6,"div",16)(7,"ul")(8,"li"),M(9,"Made both a User and a Driver app that work seamlessly in realtime together"),y(),v(10,"li"),M(11,"Integrated Google Maps API to book directly from it for ease of use"),y(),v(12,"li"),M(13,"Used local databases to check on your ride details offline"),y(),v(14,"li"),M(15,"Verified users using their university emails"),y()()(),v(16,"div",54)(17,"video",60),P(18,"source",61),M(19," Your Browser Doesn't support html Video :( "),y()(),v(20,"div",19)(21,"a",62),P(22,"img",63),y(),v(23,"a",64),P(24,"img",65),y(),v(25,"a",66),P(26,"img",67),y(),P(27,"br"),v(28,"a",68),P(29,"img",69),y(),v(30,"a",70),P(31,"img",71),y()()()()),2&n&&(_e(18),fe("src","../../assets/projects/carpoolvideo.mov",vr))}function QK(n,e){1&n&&(v(0,"div",12)(1,"div",13)(2,"h3",14),M(3,"3D Realtime Multiplayer Racing Game\t"),y(),v(4,"h5",15),M(5,"May 2023 - June 2023"),y(),v(6,"div",16)(7,"ul")(8,"li"),M(9,"Used Unity (C#) to build the client side of the connection, and built the server-side connection using Python"),y(),v(10,"li"),M(11,"Implemented 2 multithreaded servers that allow parallel rooms where each 2-4 players can join a racing game"),y(),v(12,"li"),M(13,"Created matchmaking, chat, as well as network failure handling features"),y(),v(14,"li"),M(15,"Deployed both the Python servers and MongoDB instances on EC2 AWS for reliable access"),y()(),v(16,"button",72),M(17,"Project Repo "),P(18,"i",53),y()(),v(19,"div",54),P(20,"iframe",73),y(),v(21,"div",19)(22,"a",74),P(23,"img",75),y(),v(24,"a",76),P(25,"img",77),y(),v(26,"a",34),P(27,"img",35),y(),P(28,"br"),v(29,"a",58),P(30,"img",59),y(),v(31,"a",20),P(32,"img",21),y(),v(33,"a",78),P(34,"img",79),y()()()())}function eQ(n,e){1&n&&(v(0,"div",12)(1,"div",13)(2,"h3",14),M(3,"Fruit Recognition Deep Learning Model"),y(),v(4,"h5",15),M(5,"May 2023 - June 2023"),y(),v(6,"div",16)(7,"ul")(8,"li"),M(9,"Using a VGG-16 and a VGG-19 NN to classify fruits into 5 classes"),y(),v(10,"li"),M(11,"Achieving around 85% accuracy"),y()(),v(12,"button",80),M(13,"Project Document "),P(14,"i",18),y(),v(15,"button",81),M(16,"Project Repo "),P(17,"i",53),y()(),v(18,"div",19)(19,"a",20),P(20,"img",21),y(),v(21,"a",24),P(22,"img",25),y(),v(23,"a",26),P(24,"img",27),y(),P(25,"br"),v(26,"a",28),P(27,"img",29),y(),v(28,"a",50),P(29,"img",51),y(),v(30,"a",30),P(31,"img",31),y(),P(32,"br"),v(33,"a",56),P(34,"img",57),y()()()())}function tQ(n,e){if(1&n){const t=rr();v(0,"div",12)(1,"div",13)(2,"h3",14),M(3,"Realtime Embedded Operating System Power Window Control"),y(),v(4,"h5",15),M(5,"April 2023 - May 2023"),y(),v(6,"div",16)(7,"ul")(8,"li"),M(9,"Used FreeRTOS on Tiva-C to simulate a car's powered windows system"),y(),v(10,"li"),M(11,"Utilized various interupt, semaphore, and mutex based systems"),y()(),v(12,"button",82),M(13,"Project Repo "),P(14,"i",53),y()(),v(15,"div",54)(16,"img",55),pe("click",function(){return ki(t),Bi(rt().open("../../assets/projects/rtes.png"))}),y()(),v(17,"div",19)(18,"a",83),P(19,"img",84),y()()()()}2&n&&(_e(16),fe("src","../../assets/projects/rtes.png",vr))}function nQ(n,e){1&n&&(v(0,"div",12)(1,"div",13)(2,"h3",14),M(3,"NFA to DFA & CFG to PDA Visualizer"),y(),v(4,"h5",15),M(5,"April 2023 - May 2023"),y(),v(6,"div",16)(7,"button",85),M(8,"Project Document "),P(9,"i",18),y(),v(10,"button",86),M(11,"Project Repo "),P(12,"i",53),y()(),v(13,"div",19)(14,"a",20),P(15,"img",21),y(),v(16,"a",56),P(17,"img",57),y(),v(18,"a",42),P(19,"img",43),y(),P(20,"br"),v(21,"a",40),P(22,"img",41),y(),v(23,"a",44),P(24,"img",45),y()()()())}function iQ(n,e){1&n&&(v(0,"div",12)(1,"div",13)(2,"h3",14),M(3,"Mars Rover Rock Sample Picking Simulator"),y(),v(4,"h5",15),M(5,"Nov 2022 - Jan 2023"),y(),v(6,"div",16)(7,"ul")(8,"li"),M(9,"Used Computer Vision methods to allow a simulated Mars Rover to pick up unique rock samples"),y(),v(10,"li"),M(11,"Traversed the environment with over 85% Fidelity and 95% Mapping while picking up at least 85% of the samples encountered"),y()(),v(12,"button",87),M(13,"Phase 1 Document "),P(14,"i",18),y(),v(15,"button",88),M(16,"Phase 2 Document "),P(17,"i",18),y(),v(18,"button",89),M(19,"Project Repo "),P(20,"i",53),y()(),v(21,"div",54),P(22,"iframe",90),y(),v(23,"div",19)(24,"a",34),P(25,"img",35),y(),v(26,"a",20),P(27,"img",21),y(),v(28,"a",24),P(29,"img",25),y()()()())}function rQ(n,e){if(1&n){const t=rr();v(0,"div",12)(1,"div",13)(2,"h3",14),M(3,"Charity Management System"),y(),v(4,"h5",15),M(5,"Dec 2022 - Jan 2023"),y(),v(6,"div",16)(7,"ul")(8,"li"),M(9,"Used Django Framework to have a python backend ready to go"),y(),v(10,"li"),M(11,"Utilized Amazon RDS to host the SQL tables needed"),y()()(),v(12,"div",54)(13,"img",55),pe("click",function(){return ki(t),Bi(rt().open("../../assets/projects/charch.png"))}),y()(),v(14,"div",19)(15,"a",74),P(16,"img",75),y(),v(17,"a",38),P(18,"img",39),y(),v(19,"a",40),P(20,"img",41),y(),P(21,"br"),v(22,"a",42),P(23,"img",43),y(),v(24,"a",44),P(25,"img",45),y(),v(26,"a",91),P(27,"img",92),y(),P(28,"br"),v(29,"a",20),P(30,"img",21),y()()()()}2&n&&(_e(13),fe("src","../../assets/projects/charch.png",vr))}function sQ(n,e){1&n&&(v(0,"div",12)(1,"div",13)(2,"h3",14),M(3,"Encoded Face Detection and Digit Classification Using Machine Learning"),y(),v(4,"h5",15),M(5,"Nov 2022 - Dec 2022"),y(),v(6,"div",16)(7,"button",93),M(8,"Project Document "),P(9,"i",18),y()(),v(10,"div",19)(11,"a",20),P(12,"img",21),y(),v(13,"a",28),P(14,"img",29),y()()()())}function oQ(n,e){1&n&&(v(0,"div",12)(1,"div",13)(2,"h3",14),M(3,"Tiva-C Calculator, Timer, and Stopwatch"),y(),v(4,"h5",15),M(5,"Nov 2022 - Dec 2022"),y(),v(6,"div",16)(7,"ul")(8,"li"),M(9,"Both Keypad and LCD drivers were written from scratch"),y(),v(10,"li"),M(11,"Ability to toggle between modes to run them all simultaneously together"),y()(),v(12,"button",94),M(13,"Project Document "),P(14,"i",18),y(),v(15,"button",95),M(16,"Project Repo "),P(17,"i",53),y()(),v(18,"div",19)(19,"a",83),P(20,"img",84),y()()()())}function aQ(n,e){1&n&&(v(0,"div",12)(1,"div",13)(2,"h3",14),M(3,"Football Rankings Web Scraping App"),y(),v(4,"h5",15),M(5,"May 2022 - June 2022"),y(),v(6,"div",16)(7,"ul")(8,"li"),M(9,"Created the Desktop App using JavaFX"),y(),v(10,"li"),M(11,"Tested the App using Junit, Testfx, and Awaitility"),y()(),v(12,"button",96),M(13,"Project Document "),P(14,"i",18),y(),v(15,"button",97),M(16,"Project Repo "),P(17,"i",53),y()(),v(18,"div",19)(19,"a",70),P(20,"img",71),y(),v(21,"a",42),P(22,"img",43),y()()()())}function cQ(n,e){1&n&&(v(0,"div",12)(1,"div",13)(2,"h3",14),M(3,"Graph Search Algorithms Visualizer"),y(),v(4,"h5",15),M(5,"April 2022 - May 2022"),y(),v(6,"div",16)(7,"ul")(8,"li"),M(9,"Visualized BFS, DFS, Iterative Deepening DFS, Uniform-cost, Greedy, and A* Search Algorithms"),y(),v(10,"li"),M(11,"Allowed user to input his own desired graph"),y()(),v(12,"button",98),M(13,"Project Document "),P(14,"i",18),y(),v(15,"button",99),M(16,"Project Repo "),P(17,"i",53),y()(),v(18,"div",19)(19,"a",20),P(20,"img",21),y(),v(21,"a",56),P(22,"img",57),y(),v(23,"a",42),P(24,"img",43),y(),P(25,"br"),v(26,"a",40),P(27,"img",41),y(),v(28,"a",44),P(29,"img",45),y()()()())}function lQ(n,e){1&n&&(v(0,"div",12)(1,"div",13)(2,"h3",14),M(3,"Visualizer of Compiler Process"),y(),v(4,"h5",15),M(5,"April 2022 - May 2022"),y(),v(6,"div",16)(7,"button",100),M(8,"Project Document "),P(9,"i",18),y(),v(10,"button",101),M(11,"Project Repo "),P(12,"i",53),y()(),v(13,"div",19)(14,"a",20),P(15,"img",21),y(),v(16,"a",56),P(17,"img",57),y(),v(18,"a",42),P(19,"img",43),y(),P(20,"br"),v(21,"a",40),P(22,"img",41),y(),v(23,"a",44),P(24,"img",45),y()()()())}function uQ(n,e){1&n&&(v(0,"div",12)(1,"div",13)(2,"h3",14),M(3,"Sorting Algorithms Complexity Comparer"),y(),v(4,"h5",15),M(5,"Dec 2021 - Jan 2022"),y(),v(6,"div",16)(7,"button",102),M(8,"Project Document "),P(9,"i",18),y(),v(10,"button",103),M(11,"Project Repo "),P(12,"i",53),y()(),v(13,"div",19)(14,"a",70),P(15,"img",71),y()()()())}function dQ(n,e){1&n&&(v(0,"div",12)(1,"div",13)(2,"h3",14),M(3,"FPGA Traffic Light System"),y(),v(4,"h5",15),M(5,"Dec 2021 - Jan 2022"),y(),v(6,"div",16)(7,"button",104),M(8,"Project Document "),P(9,"i",18),y()(),v(10,"div",19)(11,"a",105),M(12," VHDL "),y()()()())}function hQ(n,e){1&n&&(v(0,"div",12)(1,"div",13)(2,"h3",14),M(3,"Minix3 & XV6 Modifying"),y(),v(4,"h5",15),M(5,"Nov 2021 - Jan 2022"),y(),v(6,"div",16)(7,"ul")(8,"li"),M(9,"Altered and built Minix3 to use different CPU scheduling algorithms as well as extents with different sizes"),y(),v(10,"li"),M(11,"Altered and built XV6 to use a different paging structure as well as different page replacement algorithms"),y()(),v(12,"button",106),M(13,"Project Document "),P(14,"i",18),y()(),v(15,"div",19)(16,"a",83),P(17,"img",84),y()()()())}function fQ(n,e){if(1&n){const t=rr();v(0,"div",12)(1,"div",13)(2,"h3",14),M(3,"Sports Tournament Manager"),y(),v(4,"h5",15),M(5,"Nov 2021 - Dec 2021"),y(),v(6,"div",16)(7,"button",107),M(8,"Project Document "),P(9,"i",18),y(),v(10,"button",108),M(11,"Project Repo "),P(12,"i",53),y()(),v(13,"div",54)(14,"img",55),pe("click",function(){return ki(t),Bi(rt().open("../../assets/projects/ASW.png"))}),y()(),v(15,"div",19)(16,"a",36),P(17,"img",37),y(),v(18,"a",38),P(19,"img",39),y(),v(20,"a",40),P(21,"img",41),y(),P(22,"br"),v(23,"a",66),P(24,"img",67),y(),v(25,"a",42),P(26,"img",43),y(),v(27,"a",44),P(28,"img",45),y(),P(29,"br"),v(30,"a",46),P(31,"img",47),y(),v(32,"a",48),P(33,"img",49),y()()()()}2&n&&(_e(14),fe("src","../../assets/projects/ASW.png",vr))}function pQ(n,e){1&n&&(v(0,"div",12)(1,"div",13)(2,"h3",14),M(3,"VHDL ALU and Register File"),y(),v(4,"h5",15),M(5,"May 2021 - June 2021"),y(),v(6,"div",19)(7,"a",105),M(8," VHDL "),y()()()())}const gQ=function(){return["Any","Python","Pytorch","OpenCV","Pandas","Scikit-learn","Seaborn","C++","Linux"]},mQ=function(){return["Any","Angular","Bootstrap","HTML","CSS","JavaScript","nodejs","TypeScript"]},_Q=function(){return["Any","Python","TensorFlow","Pandas","Scikit-learn","Seaborn"]},vQ=function(){return["Any","Python","QT","MongoDB"]},yQ=function(){return["Any","Android","Dart","Firebase","Flutter","Java"]},bQ=function(){return["Any","Python","AWS","MongoDB","C#","Unity","Linux"]},wQ=function(){return["Any","Python","TensorFlow","Pandas","Scikit-learn","Seaborn","QT","OpenCV"]},Sw=function(){return["Any","C"]},Cw=function(){return["Any","Python","QT","HTML","CSS","JavaScript"]},xQ=function(){return["Any","Python","OpenCV","Linux"]},MQ=function(){return["Any","Python","AWS","Bootstrap","HTML","CSS","JavaScript","SQL"]},SQ=function(){return["Any","Python","Scikit-learn"]},CQ=function(){return["Any","Java","HTML"]},EQ=function(){return["Any","Java"]},JN=function(){return["Any","VHDL"]},TQ=function(){return["Any","Angular","Bootstrap","HTML","CSS","JavaScript","Firebase","nodejs","TypeScript"]},DQ=[{path:"",component:(()=>{class n{openModal(){var t=this;return Ll(function*(){t.displayM="block";for(var i=1;i<=100;i++)t.opacityM=i.toString()+"%",yield new Promise(r=>setTimeout(r,1))})()}onCloseHandled(){var t=this;return Ll(function*(){for(var i=99;i>=0;i--)t.opacityM=i.toString()+"%",yield new Promise(r=>setTimeout(r,1));t.displayM="none"})()}constructor(t){this.router=t,this.displayM="none",this.opacityM="0%"}ngOnInit(){const t=new SP,i=new gi(75,window.innerWidth/window.innerHeight,.1,3e4);i.position.set(0,-7.5,20);const r=new MP({alpha:!0});r.setSize(window.innerWidth,window.innerHeight),document.getElementById("scenediv").appendChild(r.domElement);const o=new lK(i,r.domElement);o.enableDamping=!0;let a,c,l,u,d,h=!1,f=!1,p=!1,_=!1,m=!1,g=!1,b=!1,w=!1,x=!1,S=!1,T=!1,E=!1,O=!1;const C=new dK,I=new qh(new Ne(16764108),2);I.position.set(-1,1,1),t.add(I);const V=new qh(new Ne(13434828),2);V.position.set(1,1,1),t.add(V);const X=new qh(new Ne(13421823),2);X.position.set(0,-1,0),t.add(X);let J,k=[],j=(new ic).load("assets/skybox/ft.jpg"),Y=(new ic).load("assets/skybox/bk.jpg"),Z=(new ic).load("assets/skybox/up.jpg"),ge=(new ic).load("assets/skybox/dn.jpg"),Q=(new ic).load("assets/skybox/rt.jpg"),se=(new ic).load("assets/skybox/lf.jpg");k.push(new fi({map:j})),k.push(new fi({map:Y})),k.push(new fi({map:Z})),k.push(new fi({map:ge})),k.push(new fi({map:Q})),k.push(new fi({map:se}));for(let D=0;D<6;D++)k[D].side=1;let H=new qa(1e4,1e4,1e4),ee=new Ci(H,k);t.add(ee),C.load("assets/glbs/zap.glb",D=>{D.scene.scale.set(30,30,30),D.scene.position.z+=4.1,D.scene.position.y-=13.5,D.scene.position.x+=.5,t.add(D.scene),h=!0;const me=(new ds).setFromObject(D.scene);o.target.x=(me.min.x+me.max.x)/2,o.target.y=(me.min.y+me.max.y)/2+1,o.target.z=(me.min.z+me.max.z)/2},D=>{console.log(D)}),C.load("assets/glbs/jokerp5mask.glb",D=>{D.scene.scale.set(65,65,65),D.scene.position.z+=7.25,D.scene.position.y-=16.35,D.scene.position.x+=2.5,D.scene.rotation.x-=1.5,D.scene.rotation.z-=.5,t.add(D.scene),f=!0},D=>{console.log(D)}),C.load("assets/glbs/desk.glb",D=>{D.scene.scale.set(1,1,1.2),D.scene.position.z+=4,D.scene.position.y-=25.75,D.scene.position.x-=9.75,D.scene.rotation.y+=2.75,t.add(D.scene),b=!0},D=>{console.log(D)}),C.load("assets/glbs/laptop.glb",D=>{D.scene.scale.set(1,1,1),D.scene.position.z+=6.85,D.scene.position.y-=14,D.scene.position.x-=12.15,D.scene.rotation.y-=14.5,t.add(D.scene),w=!0},D=>{console.log(D)}),C.load("assets/glbs/cdplayer.glb",D=>{D.scene.scale.set(.05,.05,.05),D.scene.position.z+=5.75,D.scene.position.y-=14.01,D.scene.position.x-=11.9,d=new Xh(D.scene),d.clipAction(D.animations[0]).play(),t.add(D.scene),O=!0},D=>{console.log(D)}),C.load("assets/glbs/mouse.glb",D=>{D.scene.scale.set(.05,.05,.05),D.scene.position.z+=6.5,D.scene.position.y-=13.98,D.scene.position.x-=12.5,D.scene.rotation.y-=.75,t.add(D.scene),x=!0},D=>{console.log(D)}),C.load("assets/glbs/pewdiepiechair.glb",D=>{D.scene.scale.set(1.25,1.25,1.25),D.scene.position.z+=10,D.scene.position.y-=15.5,D.scene.position.x-=13,D.scene.rotation.y+=1.5,t.add(D.scene),S=!0},D=>{console.log(D)}),C.load("assets/glbs/slifer.glb",D=>{D.scene.scale.set(.1,.1,.1),D.scene.position.z-=20,D.scene.position.y+=10,D.scene.position.x-=30,D.scene.rotation.y+=1,D.scene.rotation.z+=1,t.add(D.scene),T=!0},D=>{console.log(D)}),C.load("assets/glbs/naruto.glb",D=>{D.scene.position.y-=15.5,a=new Xh(D.scene),a.clipAction(D.animations[0]).play(),J=D.scene,t.add(D.scene),p=!0},D=>{console.log(D)}),C.load("assets/glbs/pikachu.glb",D=>{D.scene.position.y-=14.5,D.scene.position.x+=4.5,D.scene.position.z+=4.5,c=new Xh(D.scene),c.clipAction(D.animations[1]).play(),t.add(D.scene),_=!0},D=>{console.log(D)}),C.load("assets/glbs/spiderman.glb",D=>{D.scene.position.y-=8.5,D.scene.position.x+=4.5,D.scene.position.z+=2.5,D.scene.rotation.z+=3.1,u=new Xh(D.scene),u.clipAction(D.animations[0]).play(),t.add(D.scene),g=!0},D=>{console.log(D)}),C.load("assets/glbs/sans.glb",D=>{D.scene.scale.set(.03,.03,.03),D.scene.position.y-=15.5,D.scene.position.x+=7,D.scene.position.z+=1,D.scene.rotation.y-=1,l=new Xh(D.scene),l.clipAction(D.animations[0]).play(),t.add(D.scene),m=!0},D=>{console.log(D)}),C.load("assets/glbs/treehouse.glb",D=>{t.add(D.scene),E=!0},D=>{console.log(D)}),window.addEventListener("resize",function ye(){i.aspect=window.innerWidth/window.innerHeight,i.updateProjectionMatrix(),r.setSize(window.innerWidth,window.innerHeight),Be()},!1);const Me=new SN;var xe=0;function Be(){r.render(t,i)}let wt=document.getElementById("loading"),At=document.getElementById("mainscreen"),Ye=!0;!function Ge(){requestAnimationFrame(Ge),o.update();let D=Me.getDelta();p&&a.update(D),p&&function He(){J.rotation.y=-(xe+=.01),J.position.x=11*Math.cos(xe),J.position.z=11*Math.sin(xe)}(),_&&c.update(D),m&&l.update(D),g&&u.update(D),O&&d.update(D),h&&f&&p&&_&&m&&g&&b&&w&&x&&S&&T&&E&&Ye&&(wt.hidden=!0,At.hidden=!1,Ye=!1),Be()}()}onPage(t){var i=this;return Ll(function*(){let r=document.getElementById("loading"),s=document.getElementById("mainscreen");r.style.opacity="0",s.hidden=!0,r.hidden=!1;for(var o=1;o<=100;o++)r.style.opacity=o.toString()+"%",yield new Promise(a=>setTimeout(a,10));yield new Promise(a=>setTimeout(a,40)),i.router.navigate([t])})()}static#e=this.\u0275fac=function(i){return new(i||n)(U(xr))};static#t=this.\u0275cmp=ci({type:n,selectors:[["app-mainpage"]],decls:90,vars:4,consts:[["lang","en",2,"background-color","#CBC3E3"],["charset","UTF-8"],["href","https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css","rel","stylesheet","integrity","sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH","crossorigin","anonymous"],["id","scenediv"],["id","loading",1,"content"],[2,"height","30%"],["src","assets/loading.gif"],["id","mainscreen","hidden","true"],["type","button",1,"btn","cornerleft",3,"click"],[1,"bi","bi-badge-cc-fill"],["type","button",1,"btn","cornerbtn",3,"click"],[1,"bi","bi-clipboard-heart-fill"],["id","centerbody"],[1,"content"],[1,"text_shadows"],[1,"container"],[1,"row"],[1,"col"],["type","button",1,"btn",3,"click"],["id","bottom"],["tabindex","-1","role","dialog",1,"modal",3,"ngStyle"],["role","document",1,"modal-dialog","modal-dialog-centered","modal-dialog-scrollable"],[1,"modal-content",2,"background-color","#CBC3E3"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close","mod",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"contrib"],["href","https://skfb.ly/oLFnE"],["href","https://skfb.ly/oGpXs"],["href","https://skfb.ly/onEsu"],["href","https://skfb.ly/oFLUy"],["href","https://skfb.ly/orQHW"],["href","https://skfb.ly/6YDFF"],["href","https://skfb.ly/6VGPD"],["href","https://skfb.ly/orFM9"],["href","https://skfb.ly/oy88W"],["href","https://skfb.ly/6AEGA"],["href","https://skfb.ly/osLIQ"],["href","https://www.microsoft.com/en-us/garage/wall-of-fame/3d-models-in-office/"],[1,"modal-footer"],["type","button",1,"btn","btn-default","mod",3,"click"]],template:function(i,r){1&i&&(v(0,"html",0)(1,"head"),P(2,"meta",1)(3,"link",2),y(),v(4,"body"),P(5,"div",3),v(6,"div",4)(7,"div",5),P(8,"img",6),y()(),v(9,"div",7)(10,"button",8),pe("click",function(){return r.openModal()}),P(11,"i",9),y(),v(12,"button",10),pe("click",function(){return r.onPage("favourites")}),P(13,"i",11),y(),v(14,"div",12)(15,"div",13)(16,"h1",14),M(17,"Anthony Amgad"),y()(),v(18,"div",15)(19,"div",16)(20,"div",17)(21,"div",13)(22,"button",18),pe("click",function(){return r.onPage("about")}),M(23,"About"),y()()(),v(24,"div",17)(25,"div",13)(26,"button",18),pe("click",function(){return r.onPage("experience")}),M(27,"Experience"),y()()()(),v(28,"div",16)(29,"div",17)(30,"div",13)(31,"button",18),pe("click",function(){return r.onPage("projects")}),M(32,"Projects"),y()()()()()(),v(33,"div",19)(34,"h6"),M(35,"Portfolio"),P(36,"br"),M(37,"Explore the Enviroment"),y()()()()(),v(38,"div",20)(39,"div",21)(40,"div",22)(41,"div",23)(42,"h4",24),M(43,"3D Models Creators"),y(),v(44,"button",25),pe("click",function(){return r.onCloseHandled()}),v(45,"span",26),M(46,"\xd7"),y()()(),v(47,"div",27)(48,"p"),M(49,"It is important to note that none of the 3D models were created by me and are under Creative Commons Attribution License. I'd like to thank all of the models' creators respectively <3"),y(),v(50,"div",28)(51,"a",29),M(52,"LouisHackney | CD Player"),y(),P(53,"br"),v(54,"a",30),M(55,"GeniusPilot2016 | Laptop"),y(),P(56,"br"),v(57,"a",31),M(58,"ribot02 | Desk"),y(),P(59,"br"),v(60,"a",32),M(61,"Josevan Danusastra | Persona Joker Mask"),y(),P(62,"br"),v(63,"a",33),M(64,"Felix Yadomi | Mouse"),y(),P(65,"br"),v(66,"a",34),M(67,"Monhoo | Naruto"),y(),P(68,"br"),v(69,"a",35),M(70,"Niekjes10 | Pewdiepie Chair"),y(),P(71,"br"),v(72,"a",36),M(73,"Raghav Gupta | Pikachu"),y(),P(74,"br"),v(75,"a",37),M(76,"VibaPop | Sans"),y(),P(77,"br"),v(78,"a",38),M(79,"jovankastrol | Slifer the Sky Dragon"),y(),P(80,"br"),v(81,"a",39),M(82,"KhangDuyNguyen189 | Superior Spiderman"),y(),P(83,"br"),v(84,"a",40),M(85,"Microsoft | Minecraft Treehouse & Zap Sign"),y(),P(86,"br"),y()(),v(87,"div",41)(88,"button",42),pe("click",function(){return r.onCloseHandled()}),M(89,"Close"),y()()()()()),2&i&&(_e(38),fe("ngStyle",Ur(1,jK,r.displayM,r.opacityM)))},dependencies:[Zy],styles:["#corner[_ngcontent-%COMP%]{position:fixed!important;top:0!important;left:0!important;margin-left:1%;margin-top:1%;width:20%;background-color:#e0b0ff;border-radius:25%;padding:1%;opacity:40%}#bottom[_ngcontent-%COMP%]{position:fixed!important;bottom:0!important;text-align:center;width:100%;color:#fff}.toptip[_ngcontent-%COMP%]{color:#bf40bf;text-wrap:wrap;display:block;margin:auto;text-align:center}.cornerbtn[_ngcontent-%COMP%]{position:fixed!important;top:0!important;right:0!important;margin-right:1%;margin-top:1%;width:5%}.cornerleft[_ngcontent-%COMP%]{position:fixed!important;top:0!important;left:0!important;margin-left:1%;margin-top:1%;width:5%}button[_ngcontent-%COMP%]{background-color:#e0b0ff;box-shadow:0 8px 16px #0003,0 6px 20px #00000030}button[_ngcontent-%COMP%]:hover{background-color:#9f2b68}button[_ngcontent-%COMP%]:active{background-color:#bf40bf!important}*[_ngcontent-%COMP%]:not(body):not(#scenediv):not(html):not(.modal){position:relative}.content[_ngcontent-%COMP%]{display:flex;align-content:center;justify-content:center}.text_shadows[_ngcontent-%COMP%]{text-shadow:3px 3px 0 #E0B0FF,6px 6px 0 #CF9FFF,9px 9px #9F2B68,12px 12px 0 #CBC3E3;font-family:trashfort,sans-serif;font-weight:400;text-transform:uppercase;font-size:calc(2rem + 5vw);text-align:center;margin:0;color:#bf40bf;animation:_ngcontent-%COMP%_shadows 1.2s ease-in infinite,move 1.2s ease-in infinite;letter-spacing:.4rem}@keyframes _ngcontent-%COMP%_shadows{0%{text-shadow:none}10%{text-shadow:3px 3px 0 #E0B0FF}20%{text-shadow:3px 3px 0 #E0B0FF,6px 6px 0 #CF9FFF}30%{text-shadow:3px 3px 0 #E0B0FF,6px 6px 0 #CF9FFF,9px 9px #9F2B68}40%{text-shadow:3px 3px 0 #E0B0FF,6px 6px 0 #CF9FFF,9px 9px #9F2B68,12px 12px 0 #CBC3E3}50%{text-shadow:3px 3px 0 #E0B0FF,6px 6px 0 #CF9FFF,9px 9px #9F2B68,12px 12px 0 #CBC3E3}60%{text-shadow:3px 3px 0 #E0B0FF,6px 6px 0 #CF9FFF,9px 9px #9F2B68,12px 12px 0 #CBC3E3}70%{text-shadow:3px 3px 0 #E0B0FF,6px 6px 0 #CF9FFF,9px 9px #9F2B68}80%{text-shadow:3px 3px 0 #E0B0FF,6px 6px 0 #CF9FFF}90%{text-shadow:3px 3px 0 #E0B0FF}to{text-shadow:none}}@keyframes _ngcontent-%COMP%_move{0%{transform:translate(0)}40%{transform:translate(-12px,-12px)}50%{transform:translate(-12px,-12px)}60%{transform:translate(-12px,-12px)}to{transform:translate(0)}}body[_ngcontent-%COMP%]{margin:0;min-height:100vh;font-family:kbdunktank,sans-serif;font-weight:300;font-size:1.75rem;display:flex;flex-direction:column;justify-content:center;overflow:hidden;background-color:#eff8e2}#scenediv[_ngcontent-%COMP%]{position:fixed;top:0;left:0}*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}#loading[_ngcontent-%COMP%]{height:100vh;background-color:#fff;opacity:100%}.mod[_ngcontent-%COMP%]{background-color:transparent;border:transparent;padding:6px!important;box-shadow:none}.close[_ngcontent-%COMP%]:hover{background-color:transparent!important;color:#bf40bf}.modal-body[_ngcontent-%COMP%] > .contrib[_ngcontent-%COMP%]{text-align:center}@media all and (max-width: 801px){.cornerbtn[_ngcontent-%COMP%], .cornerleft[_ngcontent-%COMP%]{padding:0}}"]})}return n})()},{path:"about",component:(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=ci({type:n,selectors:[["app-aboutpage"]],decls:168,vars:0,consts:[[2,"padding","20px 30px 20px 30px"],["align","center",1,"text_shadows"],["id","compview"],[1,"row"],[1,"col"],["align","left",1,"glitch"],["align","center"],["href","https://eng.asu.edu.eg/","target","_blank","rel","noreferrer"],["src","https://eng.asu.edu.eg/img/logo.png","alt","asu","width","40","height","40"],["href","https://uel.ac.uk/","target","_blank","rel","noreferrer"],["src","https://upload.wikimedia.org/wikipedia/commons/thumb/1/15/University_of_East_London_logo.svg/800px-University_of_East_London_logo.svg.png","alt","uel","height","40"],["id","mobview"],["align","left",1,"noglitch"],["align","left",1,"matrix"],["href","https://linkedin.com/in/anthony-amgad","target","blank"],["align","center","src","https://raw.githubusercontent.com/rahuldkjain/github-profile-readme-generator/master/src/images/icons/Social/linked-in-alt.svg","alt","anthony-amgad","height","30","width","40"],["href","https://github.com/anthony-amgad","target","blank"],["align","center","src","https://raw.githubusercontent.com/rahuldkjain/github-profile-readme-generator/master/src/images/icons/Social/github.svg","alt","anthony-amgad","height","30","width","40"],["href","https://developer.android.com","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/android/android-original-wordmark.svg","alt","android","width","40","height","40"],["href","https://angular.io","target","_blank","rel","noreferrer"],["src","https://angular.io/assets/images/logos/angular/angular.svg","alt","angular","width","40","height","40"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/angularjs/angularjs-original-wordmark.svg","alt","angularjs","width","40","height","40"],["href","https://www.arduino.cc/","target","_blank","rel","noreferrer"],["src","https://cdn.worldvectorlogo.com/logos/arduino-1.svg","alt","arduino","width","40","height","40"],["href","https://aws.amazon.com","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/amazonwebservices/amazonwebservices-original-wordmark.svg","alt","aws","width","40","height","40"],["href","https://www.blender.org/","target","_blank","rel","noreferrer"],["src","https://download.blender.org/branding/community/blender_community_badge_white.svg","alt","blender","width","40","height","40"],["href","https://getbootstrap.com","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/bootstrap/bootstrap-plain-wordmark.svg","alt","bootstrap","width","40","height","40"],["href","https://www.cprogramming.com/","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/c/c-original.svg","alt","c","width","40","height","40"],["href","https://www.w3schools.com/cpp/","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/cplusplus/cplusplus-original.svg","alt","cplusplus","width","40","height","40"],["href","https://www.w3schools.com/cs/","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/csharp/csharp-original.svg","alt","csharp","width","40","height","40"],["href","https://www.w3schools.com/css/","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/css3/css3-original-wordmark.svg","alt","css3","width","40","height","40"],["href","https://dart.dev","target","_blank","rel","noreferrer"],["src","https://www.vectorlogo.zone/logos/dartlang/dartlang-icon.svg","alt","dart","width","40","height","40"],["href","https://www.figma.com/","target","_blank","rel","noreferrer"],["src","https://www.vectorlogo.zone/logos/figma/figma-icon.svg","alt","figma","width","40","height","40"],["href","https://firebase.google.com/","target","_blank","rel","noreferrer"],["src","https://www.vectorlogo.zone/logos/firebase/firebase-icon.svg","alt","firebase","width","40","height","40"],["href","https://flutter.dev","target","_blank","rel","noreferrer"],["src","https://www.vectorlogo.zone/logos/flutterio/flutterio-icon.svg","alt","flutter","width","40","height","40"],["href","https://git-scm.com/","target","_blank","rel","noreferrer"],["src","https://www.vectorlogo.zone/logos/git-scm/git-scm-icon.svg","alt","git","width","40","height","40"],["href","https://hadoop.apache.org/","target","_blank","rel","noreferrer"],["src","https://www.vectorlogo.zone/logos/apache_hadoop/apache_hadoop-icon.svg","alt","hadoop","width","40","height","40"],["href","https://www.w3.org/html/","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/html5/html5-original-wordmark.svg","alt","html5","width","40","height","40"],["href","https://ifttt.com/","target","_blank","rel","noreferrer"],["src","https://www.vectorlogo.zone/logos/ifttt/ifttt-ar21.svg","alt","ifttt","width","40","height","40"],["href","https://www.java.com","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/java/java-original.svg","alt","java","width","40","height","40"],["href","https://developer.mozilla.org/en-US/docs/Web/JavaScript","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/javascript/javascript-original.svg","alt","javascript","width","40","height","40"],["href","https://kotlinlang.org","target","_blank","rel","noreferrer"],["src","https://www.vectorlogo.zone/logos/kotlinlang/kotlinlang-icon.svg","alt","kotlin","width","40","height","40"],["href","https://www.linux.org/","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/linux/linux-original.svg","alt","linux","width","40","height","40"],["href","https://www.mongodb.com/","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/mongodb/mongodb-original-wordmark.svg","alt","mongodb","width","40","height","40"],["href","https://www.mysql.com/","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/mysql/mysql-original-wordmark.svg","alt","mysql","width","40","height","40"],["href","https://nodejs.org","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/nodejs/nodejs-original-wordmark.svg","alt","nodejs","width","40","height","40"],["href","https://opencv.org/","target","_blank","rel","noreferrer"],["src","https://www.vectorlogo.zone/logos/opencv/opencv-icon.svg","alt","opencv","width","40","height","40"],["href","https://pandas.pydata.org/","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/2ae2a900d2f041da66e950e4d48052658d850630/icons/pandas/pandas-original.svg","alt","pandas","width","40","height","40"],["href","https://www.photoshop.com/en","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/photoshop/photoshop-line.svg","alt","photoshop","width","40","height","40"],["href","https://www.postgresql.org","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/postgresql/postgresql-original-wordmark.svg","alt","postgresql","width","40","height","40"],["href","https://www.python.org","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/python/python-original.svg","alt","python","width","40","height","40"],["href","https://pytorch.org/","target","_blank","rel","noreferrer"],["src","https://www.vectorlogo.zone/logos/pytorch/pytorch-icon.svg","alt","pytorch","width","40","height","40"],["href","https://www.qt.io/","target","_blank","rel","noreferrer"],["src","https://upload.wikimedia.org/wikipedia/commons/0/0b/Qt_logo_2016.svg","alt","qt","width","40","height","40"],["href","https://scikit-learn.org/","target","_blank","rel","noreferrer"],["src","https://upload.wikimedia.org/wikipedia/commons/0/05/Scikit_learn_logo_small.svg","alt","scikit_learn","width","40","height","40"],["href","https://seaborn.pydata.org/","target","_blank","rel","noreferrer"],["src","https://seaborn.pydata.org/_images/logo-mark-lightbg.svg","alt","seaborn","width","40","height","40"],["href","https://www.selenium.dev","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/detain/svg-logos/780f25886640cef088af994181646db2f6b1a3f8/svg/selenium-logo.svg","alt","selenium","width","40","height","40"],["href","https://www.sqlite.org/","target","_blank","rel","noreferrer"],["src","https://www.vectorlogo.zone/logos/sqlite/sqlite-icon.svg","alt","sqlite","width","40","height","40"],["href","https://www.tensorflow.org","target","_blank","rel","noreferrer"],["src","https://www.vectorlogo.zone/logos/tensorflow/tensorflow-icon.svg","alt","tensorflow","width","40","height","40"],["href","https://www.typescriptlang.org/","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/typescript/typescript-original.svg","alt","typescript","width","40","height","40"],["href","https://unity.com/","target","_blank","rel","noreferrer"],["src","https://www.vectorlogo.zone/logos/unity3d/unity3d-icon.svg","alt","unity","width","40","height","40"],["href","https://zapier.com","target","_blank","rel","noreferrer"],["src","https://www.vectorlogo.zone/logos/zapier/zapier-icon.svg","alt","zapier","width","40","height","40"],["type","button","routerLink","/projects",1,"btn","clkbtn"],["type","button","routerLink","/experience",1,"btn","clkbtn"],["type","button","routerLink","/favourites",1,"btn","clkbtn"],[1,"bi","bi-clipboard-heart-fill"],[1,"scanlines"]],template:function(i,r){1&i&&(v(0,"body",0)(1,"h1",1),M(2,"Hi \u{1f44b}, I'm Anthony"),y(),v(3,"div",2)(4,"div",3)(5,"div",4)(6,"p",5),M(7,"\u{1f47e} A passionate Senior Computer Engineering student based in Cairo, Egypt, with a fervent interest in cutting-edge technologies and their applications."),y()(),v(8,"div",4)(9,"p",6)(10,"a",7),P(11,"img",8),y(),v(12,"a",9),P(13,"img",10),y()()()(),v(14,"div",3)(15,"div",4)(16,"li"),M(17,"\u{1f393} I\u2019m currently pursuing "),v(18,"b"),M(19,"a Bachelor's degree in Computer Engineering at Ain Shams University, with a dual degree from UEL UK. Throughout my academic journey, I've delved deep into various aspects of computer science, from machine learning and deep learning to big data and distributed computing."),y()()(),v(20,"div",4)(21,"li"),M(22,"\u{1f680} In my spare time, "),v(23,"b"),M(24,"I love tinkering with new technologies, whether it's experimenting with Unity to create a 3D Realtime Multiplayer Racing Game or simulating a Mars Rover Rock Sample Picking scenario using Python and OpenCV."),y()()()(),v(25,"div",3)(26,"div",4)(27,"li"),M(28,"\u{1f4a1} Passion projects drive me forward. "),v(29,"b"),M(30,"From developing a Football Players Tracking system using computer vision and deep learning to crafting a Secure Encrypted Outlook App for enhanced email privacy"),y()()(),v(31,"div",4)(32,"li"),M(33,"\u{1f4bb} Proficient in "),v(34,"b"),M(35,"a plethora of programming languages and tools including Python, C++, TensorFlow, PyTorch, and OpenCV, I am constantly expanding my skill set to stay at the forefront of technological innovation."),y()()()()(),v(36,"div",11)(37,"p",12),M(38,"\u{1f47e} A passionate Senior Computer Engineering student based in Cairo, Egypt, with a fervent interest in cutting-edge technologies and their applications."),y(),v(39,"li"),M(40,"\u{1f393} I\u2019m currently pursuing "),v(41,"b"),M(42,"a Bachelor's degree in Computer Engineering at Ain Shams University, with a dual degree from UEL UK. Throughout my academic journey, I've delved deep into various aspects of computer science, from machine learning and deep learning to big data and distributed computing."),y()(),v(43,"p",6)(44,"a",7),P(45,"img",8),y(),v(46,"a",9),P(47,"img",10),y()(),v(48,"li"),M(49,"\u{1f4a1} Passion projects drive me forward. "),v(50,"b"),M(51,"From developing a Football Players Tracking system using computer vision and deep learning to crafting a Secure Encrypted Outlook App for enhanced email privacy"),y()(),v(52,"li"),M(53,"\u{1f680} In my spare time, "),v(54,"b"),M(55,"I love tinkering with new technologies, whether it's experimenting with Unity to create a 3D Realtime Multiplayer Racing Game or simulating a Mars Rover Rock Sample Picking scenario using Python and OpenCV."),y()(),v(56,"li"),M(57,"\u{1f4bb} Proficient in "),v(58,"b"),M(59,"a plethora of programming languages and tools including Python, C++, TensorFlow, PyTorch, and OpenCV, I am constantly expanding my skill set to stay at the forefront of technological innovation."),y()()(),v(60,"h3",13),M(61,"Connect with me:"),y(),v(62,"p",6)(63,"a",14),P(64,"img",15),y(),v(65,"a",16),P(66,"img",17),y()(),v(67,"h3",13),M(68,"Languages and Tools:"),y(),v(69,"p",6)(70,"a",18),P(71,"img",19),y(),v(72,"a",20),P(73,"img",21),y(),v(74,"a",20),P(75,"img",22),y(),v(76,"a",23),P(77,"img",24),y(),v(78,"a",25),P(79,"img",26),y(),v(80,"a",27),P(81,"img",28),y(),P(82,"br"),v(83,"a",29),P(84,"img",30),y(),v(85,"a",31),P(86,"img",32),y(),v(87,"a",33),P(88,"img",34),y(),v(89,"a",35),P(90,"img",36),y(),v(91,"a",37),P(92,"img",38),y(),P(93,"br"),v(94,"a",39),P(95,"img",40),y(),v(96,"a",41),P(97,"img",42),y(),v(98,"a",43),P(99,"img",44),y(),v(100,"a",45),P(101,"img",46),y(),v(102,"a",47),P(103,"img",48),y(),P(104,"br"),v(105,"a",49),P(106,"img",50),y(),v(107,"a",51),P(108,"img",52),y(),v(109,"a",53),P(110,"img",54),y(),v(111,"a",55),P(112,"img",56),y(),v(113,"a",57),P(114,"img",58),y(),P(115,"br"),v(116,"a",59),P(117,"img",60),y(),v(118,"a",61),P(119,"img",62),y(),v(120,"a",63),P(121,"img",64),y(),v(122,"a",65),P(123,"img",66),y(),v(124,"a",67),P(125,"img",68),y(),P(126,"br"),v(127,"a",69),P(128,"img",70),y(),v(129,"a",71),P(130,"img",72),y(),v(131,"a",73),P(132,"img",74),y(),v(133,"a",75),P(134,"img",76),y(),v(135,"a",77),P(136,"img",78),y(),P(137,"br"),v(138,"a",79),P(139,"img",80),y(),v(140,"a",81),P(141,"img",82),y(),v(142,"a",83),P(143,"img",84),y(),v(144,"a",85),P(145,"img",86),y(),v(146,"a",87),P(147,"img",88),y(),P(148,"br"),v(149,"a",89),P(150,"img",90),y(),v(151,"a",91),P(152,"img",92),y(),v(153,"a",93),P(154,"img",94),y(),v(155,"a",95),P(156,"img",96),y(),v(157,"a",97),P(158,"img",98),y()(),P(159,"br"),v(160,"div",6)(161,"button",99),M(162,"Projects"),y(),v(163,"button",100),M(164,"Experience"),y(),v(165,"button",101),P(166,"i",102),y()(),P(167,"div",103),y())},dependencies:[Fl],styles:['body[_ngcontent-%COMP%]{background-color:#eff8e2;background-image:url(infrazap.7db3d0844fb678b2.png);background-repeat:no-repeat;background-attachment:fixed;background-position:center;background-size:auto}.text_shadows[_ngcontent-%COMP%]{text-shadow:3px 3px 0 #E0B0FF,6px 6px 0 #CF9FFF,9px 9px #9F2B68,12px 12px 0 #CBC3E3;font-family:trashfort,sans-serif;font-weight:400;text-transform:uppercase;font-size:calc(2rem + 5vw);text-align:center;margin:0;color:#bf40bf;animation:_ngcontent-%COMP%_shadows 1.2s ease-in infinite,move 1.2s ease-in infinite;letter-spacing:.4rem}@keyframes _ngcontent-%COMP%_shadows{0%{text-shadow:none}10%{text-shadow:3px 3px 0 #E0B0FF}20%{text-shadow:3px 3px 0 #E0B0FF,6px 6px 0 #CF9FFF}30%{text-shadow:3px 3px 0 #E0B0FF,6px 6px 0 #CF9FFF,9px 9px #9F2B68}40%{text-shadow:3px 3px 0 #E0B0FF,6px 6px 0 #CF9FFF,9px 9px #9F2B68,12px 12px 0 #CBC3E3}50%{text-shadow:3px 3px 0 #E0B0FF,6px 6px 0 #CF9FFF,9px 9px #9F2B68,12px 12px 0 #CBC3E3}60%{text-shadow:3px 3px 0 #E0B0FF,6px 6px 0 #CF9FFF,9px 9px #9F2B68,12px 12px 0 #CBC3E3}70%{text-shadow:3px 3px 0 #E0B0FF,6px 6px 0 #CF9FFF,9px 9px #9F2B68}80%{text-shadow:3px 3px 0 #E0B0FF,6px 6px 0 #CF9FFF}90%{text-shadow:3px 3px 0 #E0B0FF}to{text-shadow:none}}@keyframes _ngcontent-%COMP%_move{0%{transform:translate(0)}40%{transform:translate(-12px,-12px)}50%{transform:translate(-12px,-12px)}60%{transform:translate(-12px,-12px)}to{transform:translate(0)}}h1[_ngcontent-%COMP%]{text-shadow:3px 3px 0 #E0B0FF,6px 6px 0 #CF9FFF,9px 9px #9F2B68,12px 12px 0 #CBC3E3;font-family:trashfort,sans-serif;font-weight:400;text-transform:uppercase;font-size:calc(2rem + 5vw);text-align:center;margin:0;color:#bf40bf;letter-spacing:.4rem}h3[_ngcontent-%COMP%]{text-align:left;margin:0;color:#9f2b68;font-weight:700;letter-spacing:.4rem;text-shadow:3px 3px 0 #CBC3E3}.matrix[_ngcontent-%COMP%]{background-image:url(https://64.media.tumblr.com/ee29dfb226d65d557488c4cca54e2e96/697f4ca3ed0332a1-e2/s500x750/dd4fd831440e5e7b256f38f0b3f924441363ed7b.gif);background-size:cover;background-repeat:no-repeat;color:transparent;-moz-background-clip:text;-webkit-background-clip:text;text-shadow:none}.glitch[_ngcontent-%COMP%]{text-align:left;margin:0;color:#9f2b68;font-style:italic;font-weight:700;letter-spacing:.4rem;text-shadow:3px 3px 0 #CBC3E3;position:relative;animation:_ngcontent-%COMP%_glitch 5s 5s infinite}.noglitch[_ngcontent-%COMP%]{text-align:left;margin:0;color:#9f2b68;font-style:italic;font-weight:700;letter-spacing:.4rem;text-shadow:3px 3px 0 #CBC3E3;position:relative}.glitch[_ngcontent-%COMP%]:before{content:attr(data-text);left:-2px;text-shadow:-5px 0 magenta;background:black;overflow:hidden;top:0;animation:_ngcontent-%COMP%_noise-1 3s linear infinite alternate-reverse,glitch 5s 5.05s infinite}.glitch[_ngcontent-%COMP%]:after{content:attr(data-text);left:2px;text-shadow:-5px 0 lightgreen;background:black;overflow:hidden;top:0;animation:_ngcontent-%COMP%_noise-2 3s linear infinite alternate-reverse,glitch 5s 5s infinite}@keyframes _ngcontent-%COMP%_glitch{1%{transform:rotateX(10deg) skew(90deg)}2%{transform:rotateX(0) skew(0)}}@keyframes _ngcontent-%COMP%_noise-1{3.3333333333%{clip-path:inset(80px 0 12px 0)}6.6666666667%{clip-path:inset(57px 0 22px 0)}10%{clip-path:inset(67px 0 28px 0)}13.3333333333%{clip-path:inset(13px 0 22px 0)}16.6666666667%{clip-path:inset(40px 0 53px 0)}20%{clip-path:inset(20px 0 64px 0)}23.3333333333%{clip-path:inset(88px 0 5px 0)}26.6666666667%{clip-path:inset(89px 0 12px 0)}30%{clip-path:inset(20px 0 11px 0)}33.3333333333%{clip-path:inset(11px 0 65px 0)}36.6666666667%{clip-path:inset(61px 0 14px 0)}40%{clip-path:inset(8px 0 83px 0)}43.3333333333%{clip-path:inset(40px 0 47px 0)}46.6666666667%{clip-path:inset(13px 0 51px 0)}50%{clip-path:inset(19px 0 64px 0)}53.3333333333%{clip-path:inset(2px 0 75px 0)}56.6666666667%{clip-path:inset(11px 0 73px 0)}60%{clip-path:inset(93px 0 8px 0)}63.3333333333%{clip-path:inset(34px 0 31px 0)}66.6666666667%{clip-path:inset(49px 0 18px 0)}70%{clip-path:inset(69px 0 11px 0)}73.3333333333%{clip-path:inset(80px 0 16px 0)}76.6666666667%{clip-path:inset(2px 0 33px 0)}80%{clip-path:inset(95px 0 3px 0)}83.3333333333%{clip-path:inset(31px 0 47px 0)}86.6666666667%{clip-path:inset(85px 0 6px 0)}90%{clip-path:inset(67px 0 4px 0)}93.3333333333%{clip-path:inset(76px 0 25px 0)}96.6666666667%{clip-path:inset(25px 0 68px 0)}to{clip-path:inset(6px 0 80px 0)}}@keyframes _ngcontent-%COMP%_noise-2{0%{clip-path:inset(81px 0 8px 0)}3.3333333333%{clip-path:inset(40px 0 1px 0)}6.6666666667%{clip-path:inset(13px 0 76px 0)}10%{clip-path:inset(28px 0 27px 0)}13.3333333333%{clip-path:inset(56px 0 43px 0)}16.6666666667%{clip-path:inset(91px 0 5px 0)}20%{clip-path:inset(27px 0 40px 0)}23.3333333333%{clip-path:inset(80px 0 20px 0)}26.6666666667%{clip-path:inset(72px 0 15px 0)}30%{clip-path:inset(23px 0 34px 0)}33.3333333333%{clip-path:inset(37px 0 33px 0)}36.6666666667%{clip-path:inset(37px 0 9px 0)}40%{clip-path:inset(60px 0 35px 0)}43.3333333333%{clip-path:inset(38px 0 24px 0)}46.6666666667%{clip-path:inset(64px 0 19px 0)}50%{clip-path:inset(80px 0 7px 0)}53.3333333333%{clip-path:inset(89px 0 11px 0)}56.6666666667%{clip-path:inset(69px 0 28px 0)}60%{clip-path:inset(96px 0 4px 0)}63.3333333333%{clip-path:inset(68px 0 28px 0)}66.6666666667%{clip-path:inset(43px 0 44px 0)}70%{clip-path:inset(46px 0 16px 0)}73.3333333333%{clip-path:inset(22px 0 33px 0)}76.6666666667%{clip-path:inset(99px 0 2px 0)}80%{clip-path:inset(82px 0 5px 0)}83.3333333333%{clip-path:inset(7px 0 71px 0)}86.6666666667%{clip-path:inset(98px 0 2px 0)}90%{clip-path:inset(44px 0 23px 0)}93.3333333333%{clip-path:inset(90px 0 3px 0)}96.6666666667%{clip-path:inset(96px 0 2px 0)}to{clip-path:inset(8px 0 55px 0)}}.scanlines[_ngcontent-%COMP%]{overflow:hidden;mix-blend-mode:difference;pointer-events:none}.scanlines[_ngcontent-%COMP%]:before{content:"";position:fixed;width:100%;height:100%;top:0;left:0;background:repeating-linear-gradient(to bottom,transparent 0%,rgba(255,255,255,.05) .5%,transparent 1%);animation:_ngcontent-%COMP%_fudge 7s ease-in-out alternate infinite}@keyframes _ngcontent-%COMP%_fudge{0%{transform:translate(0)}to{transform:translateY(2%)}}li[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace;text-align:left;margin:5px 0 7px;text-shadow:2px 2px 0 #CBC3E3}a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:5px}button[_ngcontent-%COMP%]{background-color:#e0b0ff;box-shadow:0 8px 16px #0003,0 6px 20px #00000030;font-family:kbdunktank,sans-serif;font-weight:300;font-size:1.75rem;margin:5px}button[_ngcontent-%COMP%]:hover{background-color:#9f2b68}button[_ngcontent-%COMP%]:active{background-color:#bf40bf!important}#mobview[_ngcontent-%COMP%]{display:none}@media all and (max-width: 801px){#compview[_ngcontent-%COMP%]{display:none}#mobview[_ngcontent-%COMP%]{display:block}.clkbtn[_ngcontent-%COMP%]{padding:1px}}']})}return n})()},{path:"experience",component:(()=>{class n{constructor(){this.displayKS="none",this.opacityKS="0%",this.displayFoto="none",this.opacityFoto="0%",this.displayWe="none",this.opacityWe="0%",this.displayNTI="none",this.opacityNTI="0%",this.displayWiro="none",this.opacityWiro="0%",this.displayAB="none",this.opacityAB="0%"}ngOnInit(){}openModal(t){var i=this;return Ll(function*(){switch(t){case"KS":i.displayKS="block";for(var r=1;r<=100;r++)i.opacityKS=r.toString()+"%",yield new Promise(s=>setTimeout(s,1));break;case"Foto":for(i.displayFoto="block",r=1;r<=100;r++)i.opacityFoto=r.toString()+"%",yield new Promise(o=>setTimeout(o,1));break;case"We":for(i.displayWe="block",r=1;r<=100;r++)i.opacityWe=r.toString()+"%",yield new Promise(o=>setTimeout(o,1));break;case"NTI":for(i.displayNTI="block",r=1;r<=100;r++)i.opacityNTI=r.toString()+"%",yield new Promise(o=>setTimeout(o,1));break;case"Wiro":for(i.displayWiro="block",r=1;r<=100;r++)i.opacityWiro=r.toString()+"%",yield new Promise(o=>setTimeout(o,1));break;case"AB":for(i.displayAB="block",r=1;r<=100;r++)i.opacityAB=r.toString()+"%",yield new Promise(o=>setTimeout(o,1))}})()}onCloseHandled(t){var i=this;return Ll(function*(){switch(t){case"KS":for(var r=99;r>=0;r--)i.opacityKS=r.toString()+"%",yield new Promise(s=>setTimeout(s,1));i.displayKS="none";break;case"Foto":for(r=99;r>=0;r--)i.opacityFoto=r.toString()+"%",yield new Promise(o=>setTimeout(o,1));i.displayFoto="none";break;case"We":for(r=99;r>=0;r--)i.opacityWe=r.toString()+"%",yield new Promise(o=>setTimeout(o,1));i.displayWe="none";break;case"NTI":for(r=99;r>=0;r--)i.opacityNTI=r.toString()+"%",yield new Promise(o=>setTimeout(o,1));i.displayNTI="none";break;case"Wiro":for(r=99;r>=0;r--)i.opacityWiro=r.toString()+"%",yield new Promise(o=>setTimeout(o,1));i.displayWiro="none";break;case"AB":for(r=99;r>=0;r--)i.opacityAB=r.toString()+"%",yield new Promise(o=>setTimeout(o,1));i.displayAB="none"}})()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=ci({type:n,selectors:[["app-experiencepage"]],decls:219,vars:24,consts:[["href","https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css","rel","stylesheet","integrity","sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH","crossorigin","anonymous"],[1,"text_shadows"],[1,"tcont"],[1,"timeline"],[1,"outer"],[1,"card"],[1,"info"],[1,"title"],[1,"subtitle"],["href","https://korastats.com/site/",1,"rightlogo"],["src","https://korastats.com/site/themes/dashcore/assets/img/__logo/korastats.svg","height","60px"],[2,"text-shadow","none"],["type","button","hidden","",1,"btn","rightbtn",3,"click"],[1,"bi","bi-clipboard"],["href","https://fotopiatech.com/",1,"leftlogo",2,"margin-left","20px"],["src","https://fotopiatech.com/wp-content/uploads/2022/06/cropped-cropped-Fotopia-logo-.png?is-pending-load=1","height","60px"],["align","right"],["type","button",1,"btn","leftbtn",3,"click"],["href","https://www.te.eg/wps/portal/te/Personal",1,"rightlogo",2,"margin-right","10px"],["src","https://www.te.eg/TEStaticThemeResidential8/themes/Portal8.0/css/tedata/images/svgfallback/logo.png","height","60px"],["href","https://www.nti.sci.eg/",1,"leftlogo",2,"margin-left","20px"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAABhlBMVEX///8adbz8/////v/5//////r///33/////v38//z9/v/9//r0//8hc7X//v4AZ7MRecAMaaXt///G5++Ltc0PbrYVeLjt//sDaK6w1OQKYKnS5+rz/vobdMCuytpgka9rnL4AWKew2uOPssU/ga3///QAYaBflLkda5wdaqJFfq0AYJ3C3ePm//8AZKNhk73g9fzj9/vF3utxlq2cxdnb//91pcQDbK4ad60AVpsAYJbF19wzcZJUg58ubpgbZos8e6p/rMo1b6tgkMGszuRPh63A5eiTv8lqobkxeayk0Nk0f6XK6/j9/+/i//iAsL+XtMSMt9d3nsSpwc0AUone5ObE0+LV5+IcXIhLdo1niJoYdMl1pbqBvdM9irs+baCKnbhCk7Vcepq+7PtipNBWnNRnjZSar7VmttYrW3xpkaqQxd6Boqs6aoM1gbqmvNaty8wAZ8Cv3txIgYEiVGJwhZZac3xec48tdpNMj6kDWXtnoK+btdbQ2uowfZsAO14AO1AOUF1URmepAAAcxElEQVR4nO18i3/axr6nGM1DIw3EiIeNeRYsG8IjEpYhBYPtNiR2gmti1z3EIcnpTdvUaZxm7+6e2/TsuXf3P9/fCCe2KThp2rTurr6f4IAQ0nzn95vfY+Y3UhQfPnz48OHDhw8fPnz48OHDhw8fPnz48OHDhw8fPnz48OHDhw8fPnz48OHDhw8fPnz48OHDhw8fPnz8fwHt9DX+oF1y5l8RlHNCOOKGwQEhVTEMqiCE/ux2/X7QKNU0xIGT4YEiXVEBf3a7fj+EqKbrxCIGl7w0yyJE0/+fYkiJgjATpll1HLtaNU3GGEJa6M9u12+BBuOMUlBFRKii4PlkppC7vlNqLQPKxc1ezk0kTaQQonPMFEoRgl74S0EzGDMMsJmUOYmtpfDiYrnV2uxlc7lGbmWp2CoD088+d/sCWxboK0GY/MUYgvXkJERZ9dYK0Cn1ou5txxSgmhJMVJO372wvAc+daN3UNJVof70xCXYEiciou1DejNYdhhRVR3BMegtiWYahKqyazORKrdY91xFI/+s5SKpU735dXt4sJIXgVNWIRjWq61KEGHMq/Yeqc8VJ5GqL5UYSlJT+2U1+LyCMgI1hGVTcvbe8vFIRREMMjIjnEc+fScEO6QrVFGy7O+WFVUdRMTdCV968SoYhjA0RWfpkcfu2SIEFoYhfZkQIFdXMvcXFqMktgq9+mCO1kFCn0Sqv9Bk3wLMTcrkCyhBAMd3N4k6Cwel/WEs/GCAxlii27tVTu6qOQ4bBsFTI2QCxI53sfhGtlW/Y1pUejDKWpqqKza1wLToP71KgdfZewUGXMiQygmPgLSKfL5cSCoTl/A9r8q+EwcFIGsjuLW9GmC6PQKQyaDYHSHk/yZj3w+WCGSJXliGGUUfY7fVP9h3GvfEEsjsIlw7O5YWXgVgisfNJ9gtyZZ0/Aychbi3W7jCIMT3rSSmxS0smVd7LB2BmUSdbvm5bV5UiNgzhtkoJSHNVzdM0IOoUVwTR9ff5vQy+SSq3uBn5uO38IIQoJ1TfRW6rGEGaLiM0eRhkCAwZQe+lpTLkCYXEVuumvavpV2wwapQbGkm55W5fnHNpwNssAUP+/j5AV0W0tWnTqxbDUcoRsm7VihFsaGcq+QEMNQhxCuXg2lUbi9QIYVEvFyOKpZ1zDR/AkIONYo3lrHnFAlSDqtgpLicscN7KWVzyIQw5jEbxenHro7Tzw8F11ewtu+hChI1wClMzfAOT9/OHZ9DMe+W7KYsZVydKpSrbW86ZBjmfGiDMERkz/HUqp4esfrHYJ8T4fVv5W6Cy/PAzEzz+eRuP0KFDzdKvZ6ggCyfCPXP3KjGs3luuKyFwi+cOIqXdYR/CkBrIMnMt94rMiWtID1EcrW2BtVHViybF7A6qRWBIf914ogYmpFps2VdjGIIn1IxIeac6RaVQY/j05q9n6CHlfnnnauTDlKiaWKkljClhFrkVfvmhDLlIiquhpZSGUKLVY9aU76x+Mx38QIaKZan4tzbu94GOWK9VJ8aUMIs6pXTsgxkS5YrMguv67dYNoU3LzAkwDABDVdXleJWHuAYfIM/CcoKKGBjPyjsO6xL5et0xIOWYcRI//KpeSQDqlTZWVSf5vkiF1MNk8m9vPuqXRsEazrUibOrcA6nupANZZFFikbEgNfmXWE7l4G7ERBx4zsodM+XYwrVauNTKmZo2K79k9nChFq7VwguLHdOyvvpyYeHa++DTBErlas3TkxeGTuoSgipJftIzkapNsaUQlQJDhhlGGHtraRql8Lb94KB9cPSgAKnWTIZmNxAMPkwH4uEotmYxVHEj9jAt0cwgaiSaD9PB90D6WkWlkW4w4J0diG2hy7JRVYkuu5RC2vNLTfIY7ow8HAjqMdQw7m/YzDKwk+kcVQSeoYAs9/BhABAM1BJ4lhIRqx5Oy7PiXUdTeT4cCM69D4oVFQLpwPhDvBghsychNI2Kz9arIbAJ0xjarXQgvbS02YuHG4J7DBXMBqscomoDUspKZ9WRwQ/VNG/OP3QWMRiZZjAeD4B4AhCier3zy9sLGOlzc4HAXPpzRoRVb6bTXqeMuyY4fgtvguNDpwimFyqU82gsEJcfYzvm7iwt9Wac6ss5PKMLSD4cC8YemWJtp9lgXo+EsMFyDQUZMDDhLiKznjEx9TRcR/o5Flq/eNqeudh10zLQNGujEtHzZBiLEo1b+WY6Fi6Vim/QTI8JBbulM4QXAsDQ0nB+4aHHMNCYvTqL5GTDVjkxc8bXbW2FHz+x2d9XgCE9ZYgaXYQMhDRCLC7szmqKm3IxQE6vnvl44hTfdno4x+BOU7pRJWwrJs9YSBgKMAyXtuq2+Rb3m/K7uXRxzXl7zKm7vXAtTyiK1NIew6aLZlcUUIrF5k1z1lw8bvTWyl/nv3v6b09r0FGSIcVUud+KeGyQYUEPicJ6X84MgBGi5yJ3Ym6eqVXTNQmZEuEggqILHsO8pXKrvt5HslFwKU41hKKnDIcmOdd3WNS7FUJCa6W0p7zhBFVnjkNCWbKcU6bdXIJ1+/Plx6JRzPfLbxgiTb1Vi2qg33AnD/1vWlvy/0SiUmm/vZUlrp/yA1VLh/NT3T+kLa7HohYhqpE6TEmtknNGAF05ZRhPFyXDU0i3pTlJy9CqRU+JA82ENk0/PFBOWGY5A/nF9O9TX6H55es0+mk10mq8mQDQlH5riTFEuHm03OqtrKzc+Obbb77NZm/cWMk+fxuoGWhJcpM2Asz73Ge2pUHMMDEFx7mS8ViEI0ThGLotRE/XgTSu0GhsrAJlU9XegIDAQJPgv/nyXHqs4VSbNZugIcIatSSaNUsBaYe5/HhtPVrptxr4rRDMbq2dAmcvIt1Eot1u1zMHuVY+n0g8dw/e/hZpkmFQWn8wqXPXevOaIQuOLtwAwv3MwpihQS92MzV0PmaYji/PTxln6vxy/JQhUWdlMcDQXCqZfFbQw3Vg+O3XCfHdrfBYS8eNz8Z6jBPCxJFcl5KlJiJzVMXP3PyziwyDgTkpg3g8mG6O5LQNuxiMX8JQ+10YglbbxRtgF2eoMVW1+XBwxWSRVvAcQ81dqNUR5xwlGfVW9pGWyj948UMvOyHD4FwgXgI5ghDTy65A2sQa8cdnyEmkvIWsSxmml7rd9WDgHENqh+d6gsuFAAjYOZWeYNde+X6n1EieXVuRWjoXXGmUYCimbwbSxQomE1noR2cIYylRdg0yiyHRqRlu3hesvxw7Nw6pWAmGoymqjheotBA1jEGr9Li0s22G3pQsjhmmY1mzE3s4jkmKtjURxWpcex+Gi/NTCPBULfiW4SxLgwgtlPNTPdUpQ2KGX64nzaP74QY+01KWCAdKfaKeLt9onDFze7261Rtheo6hlF0sK+w3rh/YTrRE/9gMdYJHZQgaZ+V4kmG5F3nuDvKlxtlJ1KiE02nQUzxmqIqDNhMOSW6vm9DOcUvfMsS83jp1jOEtdtErfnSGISIaYQd81GUMl8xcsVopNc7WMzS0FUjPXdsS46VwDbnDB+AeafvRxoGUoHqRIWFu+DSWriUu0vjoDKkmVkoOxAszoraxDKu9ol0v749P0uTcFbsOnu5h7a5CuMwrxPFKHxQeDx49PWkzrr1hGJCZQpYZltmAGDoeuDmXLvUVQz+7229hiFLhdzPkaup6t/oOhtn8c3dVxqVSwTQsJw0iN9OBWCBdqnOwUqrSbpuKqmpstGfWj+3TON/zFpIh5hY3e7HATWAYiG9WU6rx9nZ/CMPNdzAES+NUO98v7I+jtuSwWAqHwdM9LgHFPrQee1VGIDhn7wVD7pEYD9gzhhBrIrsLkQ14xTh413NlRX8MQ/MdDNNbySTkifvjcZhcljntXDD2faOUTu/0wYxyCCcNquP2nQNqmUcHbJIhpFk8UgzEwfUH5xa2xB+spSBD/VKGwaXOg87N2P64AclwoLlQK8UDS2u9YCC2aXODyykQgsSzOxWNc/vYucgQGRzDjdxFEOJcGvLz/BmVj84QEexZmlkroB7DeM8UIIH9sYnE+dYtkOlSoHTbeQKX37SJwZAKcY2AYSj9T6HAQzriOr4elOLOYhm3yrzZi23iENv0iQ7B0B/FMNcChvgyS/N4e1B98ENzzFAj1e5SnhnJYmwP9YvBQPyejWVKhIgzeMGoikn1xIGWc5VdjwND8BZexxCj2vMmXYLp4JKDtHHC9tEZQuo7akWIdinD3lqnEY2U90+vaxwWhgeW4V4rOVxO6AV3+tRCyGTtzDNGgCEZRMG40IsMwdpgpxuXPjEdaGaFRfEfwlAnqNCqgCebEbaNGYq94VoSGHonYdVi94fCMBuLK0L0gWKgVGecH/Xv3H0l6/pBmOtVTLSLDBUNNDcyjI8z/lpUWH+MluoUua0Mn1n3OmZodnqRyMK+nIdRqKU4260CePFqcGEPpewl8OWlA2z0j7N7Scg2KOPKaoZNMoTAR6fcDc9J4xNLl/LGruKV8bxXbvEbxiGnlXIUXRp5lx+PXtlHTxf3sWVgrBuJ4uMf5EpD/vuFcFQgJxdOB4o5kyXXV0WKgAgt1O6Az1PxdSmxdPZtzhvSzFEzDrTjc8GiTWTuBjJ/M4vxcRhCjm+3cphfFnmHmw2BD3YgAwaTiURiuPL69etO5/V3r28Em706RpnP0vFmty64oYPPQPByjh0Yh79gCOZGxjZxmdWFl6oGZJWUf3yGZrdrXu7xAzey2RvBOERtmoqqpeDjr7e3o4/2Hm3dgMim1Snk79fABdS2HA4uAC5FEes4SP0lQ4QtYn8WvOnlrU2v8oNrH5khwURki/bMGmCPYWwrcSvxMgbZk4i4+3Fv+iwYDDabMbD84R/uDH788f5CMNAsuVVGvUlh9MLByi8ZagYNsX7Ls6fpWM0VFv7oDGEkMEiBZ84myhy//HJT0Eoptq+RRAtYyUAFwsvgQ3hzM1A2icGtlJ1tBR4urN+tUtBSbMoJKo9h+gJDCtYGu8vjedxAKcLB0imZ8Mf1+ATXl/cgY5jBUNXM8jfR1bUHt8KQH+bktAT8Gy+I3Aw8DMwtJBhQDCkiki02Y6Xuft02nRcDRt4wjGUvXpuYWwuQesUhVujaOjHQB8vw/WYxIOo3S/fEtDX8twxXzKWXcr5UMdxwqbS5tLR5fScYi8c3u6Vit/RTVa4Kq8Qwb+9db4UXyrXwsCDwTIacyrWYOUkx2AMFoJnYx2QoN8KgbC0yq1TSY3gDbS1X68DQ6g8TgglhrmV7P/Revlybnzer//lcYFXlTC6OCCfhDtxbtgFeaBZDhRB7Jx6X62Xp8Egw4+MyBB9OSGZxj1/K0DxaSfTDDY1Fl0wNEvzEcFUkO9uL+0y1lJXlAlP1lFxL4QSiTawYhrfyNoOhHtJwvRWfA0UNBMOuIB9XSz2W1damqalT67o8j//t6NXag6fFfeR0b3FqVBvDKKNm99FSMcNUPvq22zYEcDu/Y0Gulo7naeQsxi+ve7eVHi+DliIoc20GQ66jSxlemC+9jCHhN8r1S71FTiiZzVhDcTdMi9U3u3kGEfvqo07+OIKU0Up+ferq3GUMzWjNM6eBYHctMUuGvxtDShLlbcan+ouxx++tPl8JP2yIzQI2C6XYt9FCNLp345vuo5c7jhItujuZXXEJwyl22jB74+XdQDDrlj42Q4WIpZKdwsqUsTieTcxDFBq9Nqq3+pGlcDzwMBZuxm4GYtJcrAh3ofTYrc5gmJ4hQ81w3iyfNl+OVzkj9JcMld+HIeKW+2kUhDhlJALD+TIkc5Zxd/FRdsXtNhdq5VaxWywVw7F0vFhsDfLXAhuvuwNwPBP3UNGSd/8e00KTnYcs/rQkV6bG7lUyTHgh3IVeUE/XD9OB5eqUxqnztTfrh+TyrVZINYthh+AppV1EN+YhPySIJq7dvBlslhoRu1qVm9bX6kuxr9fMR63vwy/tyuP1gZhcG1Cr9x6C00tvmlRVJ8YAlxs4w3K15lSSgVjGYsaF0UwtlRY8KxR4WKxOLUkrPvR+30xQ47IKOmoQFl3eUqxpNVFvGUqLF1yKcE2n43IvI1HrVi2xEo7to/br28PIJMNQpJiWDFu2ooYmrs10DbGtZuCshgQM2UQXa0RH4yoGeY0pS+QkUoyPKxWiiF4mQ2poRnWnZE+t+pJaKhlCfJxuZqtEwxBZc13nnNqLC5EQsUvNkSwldk/MidIhlAgH56RbT2CdGhOL27pKIOaPBc4Awe+EoDWD3RgTDIYTU6IuCLHGDGM5xi+1pVwFJ95aYVNW2KhC5pd7cjUlX4zlTGzISPbUJIhw8w42jFutPaWyhFhhNLHoghrBm17zRhhNMrQ4k571s3MMwzaZ0DTdckrxsaWJ7U8pScMrsbEOpLsCXVYFqSEVQpFeMyMr1sZumyBi2F84HiIbvX4y2f8h/LJ/sTqwX4rd6PeT/ZXtvvukn3y6WbcMQxl3E0e6LorpYHoOxLhZVY2JLvaSLMPol+beEEw33YknFmgklRlXhIE52nEmZRTS7FLaq6CShR7s3dXI/daSQ5Q3DLGBVxeXP/30008++eS/XYN3y+F4eCg/naEVDoZbny4vXwu3WqVauRwu2ilunK6sQTTYbjVLNVnCNGyr0+qPESJyp9ybQqfljpiUofkALiHRXGgVJovpdWXUajbD8uuF1gPznZvrdC1ay2HtVAEJRmK0efff86e4LessEon8BSQSp8fg761bbiJRWjGxNdYmCMWVZOUNDqczhNRJVM7QNiZaiVi7fvpdvtKe3AYfCrXP/Za9U4QauP0WhMHGKUPORsFvch5Wc/v7+7nt1dXt3EWsrnpf7edWtwGr38TKAzY2yJqGnecRw0KW3AbOkTptWwKVAfoZNGRNtFL+dmy45d9fXoBY1ulGc42++5kcRDA7XIxQC3l0MSHtO4XCYFC4BNFotHB2wgDOhsR3vGZqiVx5ixOmyeomTqYyJNAbKkgSwZjVwXucriifQcc4FPKKo3Rt8jsJmdwK+CnSNF1/Z808DAqWWb7pEGRwPjZ86FfDuxI0G94WFq5fkSr2N8CccBxtQf4Hov9Ne3l0jViKu/DEvho7Ed5CTnMSnKuBsSCnwY366yF/poOKVorNPrli+w+9WkpdrCyvVNlvkyEyWL5UrLNLH1LwJ4DIpVyDmCvLWfN0O72sfkRecYwcYWcvuTSo6/JBNWAM+ZsBKM/iEIxRjeW7Cwk6c0nSA9W8YtRzvUDlw2BAcSbTELjoRLQgrfMH9B4lnBNDtaqfl3v22NJwTZuWFlPNewKPZXHJDm4GQe+pgkJbNMLcWjGPGbp0p7OcH/IYvm08DJIQZCChiWJfWTx3MalSvIep/XqGSD54hVHLEPvLS3/zii6MqY800Qh0qXyOWSgUko/jIXKp4rSCBvoJi71yLGEx/C6GGoj8fP/RsTooFx27Lqu0J7oZhbQPGQHy+SQYGSi0O781/Jd3KJVKTXtamajqKh8/ko5aEMById54O1UjTnbx3m2mco1eupGIUMwYPl8VLmfpGJ5Y5Qt5dY8T8ZBglz+IZNYtxUGFhlLtf6V0fpjy7mO+Sk7bJlH570h1Bgeue2fggOck+Hn7bUuJsrrYs7mVktHIpbej+PAA+JwnpIv2IbtIESKztuATsQ4c+hBHhPjOjoPpqqvLh2NY9McDLE4OBDIg1eUa3tWJjHMEJry+jpAzKrx8HB2A8CzV7LyCfDik6ZqFNMMumJjSlKXvwk9UHcI/CGk4s1QCJxBqYSwf2GcYllr/H46ONfDCGMkV2vYrwh48YwJiNw2GjGVwrHEVjXIplezCgAlpECClMgMF/c8BzRxAUMvlphaSeRVKQfxnpOjYIs4EQ0uPC4w0XJU7yRQxs1EHVYUFHxyc0mzRtxnCqaRjWMCQEaY0XIVzkXRU3GkruJq0hWWYjmMawklCtztVMzmfgrcWdkRyfnc+aercYUTYjDmmbWNLr3KLwb0sA/4Y5tZ9M7VmarqThDsJx0w6TDVCqLAvdLMaMRGcdsjF1raDnWpqa1QVwmRwQ5GLwlVTSWFwNDlgJxji9cTPSZChctS51xGDe0v/4WRfKfWN3nFBHK6vrg8zPHnyesMVHkNMGwNquuuvT5Kkk0H1B9+dVAyns76+ZxbWOyd1epB9UPw8+mQxiuxO9skw0d3oCL5eR+Ik6aznTr68Iw6PBRqc3DsRL3qb/2b+WNr8h6w1qpx01l8wZ72xfuyiFEF7+2iQW19ft4nb7RS+Kt77x+HfD9o7m/+wjw4UdJQ4+GznP0T9p9fdxLsexBnC3X6hYzZczWBm78Dc/oGJ3qvqMCHsYd1pZUTiWIgqenpMPIYCNdzdw5M17D5HnYRz/NTMPzCPRoLz9smacIviTtFZ++mf5tOW0/8yYY7W16rdDFqvULHRr264LLFRTW6YmY0+Niwsqq9f4egjzDqv1k7uCnujsjZ0zcRQpCxgqAye2KBSyslT0IfoSODVghIdYfE6o+CjV8r+D0r1JMLqJzCEL31QJcVF2+wmQPfsQad0h60WLOPrV/WuuctzW9WhvWsPBUsc9UogQ7kPAWSoZJb2nm13zU6+3t17tvfz2s9rgsD9rV1nGLmTM5TsXYpaf7OHJvnxc0xuuEq3bkmGw75V/dk5PDFXozBGhV3o3IwqhShlr19FhlWLN/bWNhzLGTpjhtF9RKIjNHpyK5Uq/F0R21FaKFgcGLKju8rWnd3b4eiL0ZeQP1/KkLEnfe3u+rZrDt21FVdZvW8pvbv1TdPCjS1nWN11vmQHm8nIRqq+LlROyTcD8qqXb9fbopeoLOXb7QowNCxltcB2qxuRg5GG/nmXsi+/sMvC+HGFaSuS4a65EXFaNjGH1eTP7LkLCaR57K6NCqxQQDT7qr7BLLK15Ww4BE4DC7S1TaINTAojKm7trLLoSGP//F/Ksy2LZ10uGb64QyrFPCTDl6qoR3G9HxLZklv5SdDrA+VFFKFexvm5z6rdut0yQS7iuatEhibIUDWQlivgyEkVHLvSydvHfcYoW48KjN2fqiyzYbrbFMH92dCxh4y4rzHKuazjsv6wbw5tXv0ZGKJBp8qVPozHbFQUthh7ftf++V/MPEk4G7Zll2xE0N9HtLCKaWEE/vnfu6yQE9p2gQ2+EcqoIda6d8mLR8w5jrApc+4T0NFJMqTZQ5d1c9n/HIjMcFUcHRjuxuikIewvBUn+l8h0R52hUz9GqoGV1QERhY3R8wP04BUeHG9nnyn149dHz8zXD14cJ5TBc4KlLfivvj3UjTvfKej5AMFFO92++Nnhzv92kv+HVXtPtv8hTrLPN6Poq+FqtfNKcYejB6tV+2dbaimi6EUO7a0iPFhlD0b39nB9eOSsPmNffdlx6sPnnSWXZzaOTPd4tDp4pwgtMNmGkQT9/yppg12uVFKHtmUm22D7edISLMlFpAKGPVW3VIPBmQSZyUzdMQ5TBpZvMLITlUPNrLRhAB0mrVTStpSkbkXUXSdpabZj4UrdSZpWxODsEImkalTriUNmf5V0/kZEpY2Ttpb6Vz4CHucQHFISHCVybOsLW8NOkiW/qqeMVLKNDx1VT9ZNnkw4jmOIdpsJO1F33sUQFAKCaEJlOOltPVLkQ4PlqqBCNDiE6HhvGkSriOgcepfLPUhyHiWky73B1Hsp3j5LOXMClwOvHFJUC4W4BpdF8msIYzWKeUhXQwpSiefE5LycnGqBu2P5+EkIAOR+TflYX4hLFYiD5QaHkEYUeBE5EanCS4crwi+I1y6iTdse6sOHDx8+fPjw4cOHDx8+fPjw4cOHDx8+fPjw4cOHDx8+fPjw4cOHDx8+fPjw4cOHDx8+fPjw4cOHDx8+fPj4Ffi/Z6npFbd3mswAAAAASUVORK5CYII=","height","60px"],[1,"rightlogo",2,"margin-right","20px"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAABBVBMVEXDpfstKkfDpf3Dp/bKr/POtO/Dp/PBov8tKknDpvotK0PDpf8tKkXDpvguKkHBp/sbEz+0oOJ5aJ6+pe4oIkgkIjzKq/6Ida5vYJQoIkEiHz2ijs0bGDt2ZKMqLEEZGjhjVpItKExHO2qsk9wlJj2Tgb/Jsv9qXo0fGkEuIVJOQ22ij8t3aZ4hIUGxnOIuIk4pIDucj8NGO2bWv+ueh8xwXZa8oeuDbaigicu5p+sRETMmIzQaDTIpHz8ZADgjIUgVFzBSSnOJfK44K1ReU4G5o95AMF9XR3gmFz5/b6YOADIaE0IiGUhXRntmXIY0JUlvaJNKQmi2quTGuf+CdZ4fKDI9K2EV+83IAAAN2klEQVR4nO2cC1fbuBLHbTk1lh8RxrETJyE0ITEpIUBzW8C7m9sFwmtLaXv33v3+H+XOyHbsJIQ326Ou/udAifFDP0szmhmpKP8qvSn91FLeOB5Z+ZmlvCE60X5mKW+oTn5qKW8UnSg/tSSh+JKE4ksSii9JKL4kofiShOJLEoovSSi+JKH4koTiSxKKL0koviSh+JKE4ksSii9JKL4kofiShOJLEoovSSi+JKH4koTiSxKKL0koviSh+JKE4ksSii9JKL4kofiShOJLEoovSSi+JKH4koTiSxKKL0koviSh+JKE4ksSii9JKL7+cYTOygr/00OUUvi27CKqEEoVhj9aFr8cvlkUtQL/8N9a/MQZOQ6eRpRlr5Q6uu7wP31E8Sb4aWkTnkxIV0gUJNK15YTQgCBg/KykFZajBdl1nJAFtwmajX+catltNbgXtIaxgOEP1FnehCcTWmS3tra2tg6qfaDL7g8v+8P6Oj/rW+0Aj7APH/HT+traxwMkVLTa+qIOq0e7UWAt7UONBlHc6FXhzF4jjoLXIFyh73+pjCtjULPKllxDqFbautz/NUT95uKRqHaJ14Rd/99I6Cje9T5oPCv/V//T+Y4bkNsZaaBXLyrZdZXOoR68PCGjgw01Ub0aLBlPFtGDWmgbeJbddC1CnWCna/KryqsutRQgrNjqogzVtv3fjwcR0wi8hlwOjBcaf2v6+VWmWe9vuTpZ2uVPI3QeSWgkhCzYSduWE94CmGr/shbDTYqElqJ5J3vD4lkm3Lx+XfVY4rSEIrSNymlDm+kaSzub/G7bxX43sceN5uRM/6GEaka49gjCtmGU+70gbziMWHdUL9uGUXwPqtFuG6Z/CiP19oG6fN65g5CRRvPBhIZhm2ZzNyVUC4TMmrFDu6DsUKUX8GkP3iqxnLPz0CziweiAHkTTNo13Z87skJ6+F7IE/U5C5ZUJs/aXy3sDmAsSX6nFo4ox75nQK6VDOnaWDVQL9GMISYHQzjrF4F+JzHJ4Gif+1FJKE18tjlA77UM7Ae1eRLdxZKHSKxO27iUM+/0matxs9uuhaSb2a9j28G1gYfOI1uubYHXp+d1uvVn3u107MUscrJfVYGUR0PEajcGgsbm5Se6ifAahygk33LsJ92/OdjMdVY+Hvp2h2KsfGAYVND6fWqcajjtXR5u7jcPOMO9UG7p7rg0Emur+sdrsf/78x8fgFit9CUIjJ3SW26E/ibA1iuMw+EV0NulPWx5eRHg77aoyhR6O3usaND8IosFo38zOHO4Ei4TkoA9WYqvdreAuh/MyhHf0YXcScH/iUAyriRJVr6c8zQa21euk3Wqow0mM9sXQuIJ4kt3DMM8P5iCAkLlNIDRb4615/L+DMO1DmLX9t4GT/TlYB51fVB0aBu+dcr2mKZQMPnEQw2iFX0oapGMEJwL40id1U03iin6P0ZmpAQipy4eDHW7dGb6+rh1CA7tvA1p4ArFYfFNJvKWtvitBV9SGSXhktCquXrAoy4nbiSM27OGWpswTOgmh6r8a4cP6cI4Q2qm5e2bSM/bqrsK8bTX5qG5UtYLzJxSdbDJjmOrImw1Pfzjh0j7U6IoVbHW/cjtsNXsKc42y2eYfDc/KCwswVxLLO+V92C6bFRcin9chJAqMD5ZIwVmIkucQcvUqZmJ54bfAGmQPtG90i82Emlrw0c9a0yCapSShWgbp9tuIWLRDYi1MnA/oQ8dRsiAQIsmXIHSTsBxuAI4+e6Dtn+hkltCxqlPCHuPZSKHsYx00zbQPnelBshD83E9Iqd4YYPAwaDQ2HeVhhMvtEGS57XZCqE4C0ssI61VNmSVUrME8IdZ5nETEa5bxVzAfZoe0W8oeDyBUoutmqo5G6JTwab4U2717mhCqSHg0JewxZ5aQrDRyQsXhhAebUw3GfC5p3eSHdrWF8OZ+O6Q02jN4i1R/m8dHzxmlBAIg0viUMNl2YZSqfpVphYQea21gpEZOiH7A2lyt47vu9/vXl+UWf0jYv+6nmujPI7QfTHjHKKVacFJPZovWsAoT/sYdhI36HCHZ3TOSLAwuT2KhNk9DuLo3+uM9zdMIl3saqun6dqvNB2mrf6SQ948ipIM2RGom4rTMLNhTMXpDdW+iecAHzYfRu5TQeBKhNiUk3FM4g37LQCtWW589RRnUH0PoAKGRpJmQXnFfaua5ZXcrWpjDH0DIpoTtGcKHehrNyQnB1enxOQRjkCYadrcTOcrRckKNDBb6sPHVnhLmlSsjUbe2WFF/VB+Gy/pwWfa0QAhBeHw8xAsxvx1WlccSKmCHKaE65csJt16L8GF9iCs+mru9j5VQJDSaB5bG5gkLHX4r4TUvtfu+Xw8zUB+FR/9GwkL2NImmCzOR7u60wzL/DVw+rDmzhEQvTGdwFyRUc0I86uyur6F2QN8qHLH9fW1nLdFOT1+Y8p9B+DA79G8OsTn8q7a9B+l84h6AcM9dJMz9rgVeyZoh5L9iWpRGydF/sLyDcenUvUQRfULU9tw+vDn5DcZQFwfSPnr1xHqAsF+NIPFnjRTC8E/gUz5KkZD0MsKNlBATZIzPFMqY1+czvr+lpGkHxdD7WYTtJ9hh+PbPCZJxg7FVM52mTbt+XMLVRGVK2L0JHGbNECpXWdS20VDSAQxBI8iyFOpeJ32/Na1EEbzmsYQQw0fv0imnux0RjLwVJEzT1uZ9nuZjELfN8syKBJYOux18sGU5bsXgSZDdHekKzeNS8DREH9lpkl8fvF4GDIR7SbnkNkL7PkK/FnjvKzNrLhhldU93Ce8QGo8MNZne+lgFLxJqjX4KqJ7Gyswy20sSElKqpITl0TyhuoSw6EsDWtoZz9Tsjfaw4yoJIdFrYTmZEtqjUk6IU0vpOExz/PCLRmfq3s8iTJeAfB4fwCAl7jitSJunHloDpP3aRfJsIIzv6UNIkJR4254WguEc9XpLJ1ay04E4vXErKYMbzXW+PExTvxFUm8lD2hCis6WEj6u1Qex+2eJmobZOPYbuaSW4ylYu7XFP48k+gywdq+4wcX/1Vu6d8S16VikbRiu9TaVzVCosrcWnGaHavNKwVOPgF4tO0mKi+rXVdqkyv9CEhPjrce0x9VJKvLTEbrTCCXSPZUWD6RKEbZy74M8tFm+HGeGxdl/2hDFNdNI0prY4iVmhO0hUG6bmaZj+1kGgWCsWYYFXy1czwppO6Twh+NI2Tj/howhhCq4NzaROZNa/D0ol76o9Dd3tcnh6Ekf6YATHEkJ/51bC2T4EN6inJoXqD1gxi6Pup7QwBdGAv1cbeFHkDdbeDe2MsHW9ifa/UO75XBlDqLbxqJo3JeyonywPtcGrVyp712FhaRYeWW/u7TUTq7IhCe27jnJ/9gTOKT41sxvZpy7MZrzBhFdJdsDe+FIT9KId1vvv9q77Y1xQTAjb/sfAcuZr3oqiHV5VQVdHd64FzxGCAeij/G0bxVW9FDKLSuDVQv4zweFD6b0ZMHEGYzUxcNUML7JVfCxqUBZ3wmTBN1Mxa7DN9rmH6x5zhNRxIJlGOXfuZVgkzArNKeECYv54QIUBh4R3Zk9pjl/a6aeEqr16osGrTAipRrXda8O0Fx6UvdKm60CktkCo6/hu0wWfxxBSfdLN3ucioVE8VB5+K4G7f0gfKjC1b4cGfz2QADfPmOWkhNDQ4P1+efFVJm/D7p+AqWuzngZnS17XxADu7tX8W/YmgjvFfR5GEQkdC/ieXDh6IBKPHb5Rb1kfYlKaVjEIY7vtMi+UIuf3mFhp07APol5FNXOD50/AE80W7tpQlu4iJPdvV7iF0NLcvbA8Y4u2bdbD2S0VcNgfuckuwqWeJiFM0h7KtJNxK7ttfSfC3SLTMFsfnGdBtjotUMB3v/3ee9H9NLwpRHfPx1O74E9r9092Vo2sWIBZhdH+fBwrK/w9Lp0PC4R4Foz/bNZvfRpgMpgnEtrB5HNYtAX+7+qF6921hP1EQgts5tsvvpqGaqDm+SDQBu/8nNAcfv4vRF6U20FOaM8QGjOEEBPG59NxaJ/GuJk0fSaW6mGabaZuLCXcOO3pmCa9NCEuCSils5tx93/Yf/74ctSDkBh8c/X8ct/HGpm/b2x5aB28SJvYYYuPrPLqLt99GVfSkRZO8vmYssaqmYzy8q/+xNNWirHNCvvz/XGlPgRz6HZV369c9ErOc/ft3d6HuEoJQ8rrrV10Op3J4WakOdw3M71x+LYzGn1Z/+BFzMoJaXA4GnVQo7/4/lLmnXdSrbO8DxzvKj0Kp//1wZlxEhQsNfKOribbo86XL1dHXsST+Vcg5OKbHoMIxfjOI5yQ4JWzQIuiIABHiJ5wSqjpUSq+zxcOZJ+jfCszIdr0vBJ8LbSf31PTS6VSpGl8MZ++CmG60RsXRBGNUDAk/IE6OP1AWIyVBprsBJ8SJqfwTVh8+qBK/jkn1KenEdwQ7hRXinD2UBhjmCTxTJix+ybzpxI+RbhNvfjRufXlO3hafqJz746tl9BL/W+Euf1lt283m9uIdv+etJfQCxHORRZLAg0yG4I8aPPks/WDCf8GxH/c/5n5CSUJxZckFF+SUHxJQvElCcWXJBRfklB8SULxJQnFlyQUX5JQfElC8SUJxZckFF+SUHxJQvElCcWXJBRfklB8SULxJQnFlyQUX5JQfElC8SUJxZckFF+SUHxJQvElCcWXJBRfklB8SULxJQnFlyQUX5JQfElC8SUJxZckFF+SUHxJQuH1f7uIsoeZAIfPAAAAAElFTkSuQmCC","height","60px"],["type","button",1,"btn","rightbtn",3,"click"],["href","https://sprints.ai/",1,"leftlogo",2,"margin-left","10px"],["src","https://master-sprints-new.s3.eu-central-1.amazonaws.com/store/1/1681366422_logo.svg","height","60px"],["align","center"],["type","button","routerLink","/projects",1,"btn","clkbtn"],["type","button","routerLink","/about",1,"btn","clkbtn"],["type","button","routerLink","/favourites",1,"btn","clkbtn"],[1,"bi","bi-clipboard-heart-fill"],["tabindex","-1","role","dialog",1,"modal",3,"ngStyle"],["role","document",1,"modal-dialog","modal-dialog-centered","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close","mod",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-default","mod",3,"click"],[1,"mimgcon"],["src","https://media.licdn.com/dms/image/D4D2DAQHGy1Jz6eEGbg/profile-treasury-image-shrink_800_800/0/1696007069105?e=1710525600&v=beta&t=9XYKjaCyjfw91B8ny2YTpdZQNPfCU2CJn_oGDkz6pg8","onclick","window.open('https://media.licdn.com/dms/image/D4D2DAQHGy1Jz6eEGbg/profile-treasury-image-shrink_800_800/0/1696007069105?e=1710525600&v=beta&t=9XYKjaCyjfw91B8ny2YTpdZQNPfCU2CJn_oGDkz6pg8')",1,"mimg"],["src","https://media.licdn.com/dms/image/D4D2DAQHfIq4L-7OqtA/profile-treasury-image-shrink_800_800/0/1696006931106?e=1710525600&v=beta&t=DL4QHG0zM7qkMNwQPC12jxKKVriw6ggf1UU2DRjv55c","onclick","window.open('https://media.licdn.com/dms/image/D4D2DAQHfIq4L-7OqtA/profile-treasury-image-shrink_800_800/0/1696006931106?e=1710525600&v=beta&t=DL4QHG0zM7qkMNwQPC12jxKKVriw6ggf1UU2DRjv55c')",1,"mimg"],["src","assets/cert/vex_go.jpg","onclick","window.open('assets/cert/vex_go.jpg')",1,"mimg"],["src","assets/cert/vex_iq.jpg","onclick","window.open('assets/cert/vex_iq.jpg')",1,"mimg"],["src","assets/cert/Android Development Certificate.jpg","onclick","window.open('assets/cert/Android Development Certificate.jpg')",1,"mimg"],["src","assets/cert/Scoring Android app Task Dashboard.jpg","onclick","window.open('assets/cert/Scoring Android app Task Dashboard.jpg')",1,"mimg"],["src","assets/cert/Login Form with ConstraintaLayout + Activity Navigation Task Dashboard.jpg","onclick","window.open('assets/cert/Login Form with ConstraintaLayout + Activity Navigation Task Dashboard.jpg')",1,"mimg"],["src","assets/cert/ConstraintLayout Task Task Dashboard.jpg","onclick","window.open('assets/cert/ConstraintLayout Task Task Dashboard.jpg')",1,"mimg"],["src","assets/cert/LinearRelative Layouts Task Task Dashboard.jpg","onclick","window.open('assets/cert/LinearRelative Layouts Task Task Dashboard.jpg')",1,"mimg"],["src","assets/cert/OOP 102 Task Dashboard.jpg","onclick","window.open('assets/cert/OOP 102 Task Dashboard.jpg')",1,"mimg"],["src","assets/cert/OOP 101 Task Dashboard.jpg","onclick","window.open('assets/cert/OOP 101 Task Dashboard.jpg')",1,"mimg"],["src","assets/cert/Data Structure Task Dashboard.jpg","onclick","window.open('assets/cert/Data Structure Task Dashboard.jpg')",1,"mimg"]],template:function(i,r){1&i&&(v(0,"head"),P(1,"link",0),y(),v(2,"body")(3,"h1",1),M(4,"Anthony's Experience"),y(),v(5,"div",2)(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",6)(10,"h3",7),M(11,"Machine Learning, Graduation Project Intern"),y(),v(12,"h4",8),M(13,"KoraStats"),y(),v(14,"h5",8),M(15,"Oct 2023 - Present"),y(),v(16,"a",9),P(17,"img",10),y(),v(18,"p")(19,"b",11),M(20,"Project Title: Football Players Tracking from Multiple Cameras using Deep Learning"),y(),P(21,"br"),M(22," \u25cf\t5-module system that tracks football players in a match across 2-3 cameras using computer vision and deep learning"),P(23,"br"),M(24," \u25cf\tImplemented the path predictor module using an Encoder-Decoder Network to efficiently get the trajectory of the player on the screen to predict occlusions with other players"),P(25,"br"),M(26," \u25cf\tIntegrated the 5 modules into a multithreaded system that efficiently manages memory and CPU resources"),P(27,"br"),y(),v(28,"button",12),pe("click",function(){return r.openModal("KS")}),P(29,"i",13),y()()(),v(30,"div",5)(31,"div",6)(32,"h3",7),M(33,"Machine Learning Intern"),y(),v(34,"h4",8),M(35,"Fotopia Technologies"),y(),v(36,"h5",8),M(37,"Aug 2023 - Sep 2023"),y(),v(38,"a",14),P(39,"img",15),y(),v(40,"p",16),M(41,"\tUsed different machine learning techniques to improve the accuracy of OCRs \u25cf"),P(42,"br"),M(43," Developed a pipeline that parses scanned documents into digital format files \u25cf"),P(44,"br"),M(45," Integrated individually developed modules with the team into one pipeline \u25cf "),y(),v(46,"button",17),pe("click",function(){return r.openModal("Foto")}),P(47,"i",13),y()()(),v(48,"div",5)(49,"div",6)(50,"h3",7),M(51,"Big Data Analytics Trainee"),y(),v(52,"h4",8),M(53,"Telecom Egypt"),y(),v(54,"h5",8),M(55,"July 2023 - Aug 2023"),y(),v(56,"a",18),P(57,"img",19),y(),v(58,"p"),M(59," \u25cf\tUtilized PowerBI to analyze multiple realistic datasets."),P(60,"br"),M(61," \u25cf\tLearned about the Hadoop Distributed File System (HDFS) and how it is used."),P(62,"br"),M(63," \u25cf\tUsed the acquired skills to analyze the S&P500 as a final project "),y(),v(64,"button",12),pe("click",function(){return r.openModal("We")}),P(65,"i",13),y()()(),v(66,"div",5)(67,"div",6)(68,"h3",7),M(69,"Datacenter Virtualization Trainee"),y(),v(70,"h4",8),M(71,"National Telecommunication Institute - NTI (With VMware & Amazon Academies)"),y(),v(72,"h5",8),M(73,"July 2022 - Aug 2022"),y(),v(74,"a",20),P(75,"img",21),y(),v(76,"p",16),M(77,"Learned about the VMware Virtualization concepts (Cloud, Software-Defined Storage, and Network Virtualization) \u25cf"),P(78,"br"),M(79," Used Amazon Web Services (AWS) services to deploy servers of various uses \u25cf "),y(),v(80,"button",17),pe("click",function(){return r.openModal("NTI")}),P(81,"i",13),y()()(),v(82,"div",5)(83,"div",6)(84,"h3",7),M(85,"Part-time Robotics Instructor"),y(),v(86,"h4",8),M(87,"WIRO PLUS"),y(),v(88,"h5",8),M(89,"April 2022 - July 2022"),y(),v(90,"a",22),P(91,"img",23),y(),v(92,"button",24),pe("click",function(){return r.openModal("Wiro")}),P(93,"i",13),y()()(),v(94,"div",5)(95,"div",6)(96,"h3",7),M(97,"Android Development Trainee"),y(),v(98,"h4",8),M(99,"Sprints"),y(),v(100,"h5",8),M(101,"Aug 2021 - Oct 2021"),y(),v(102,"a",25),P(103,"img",26),y(),v(104,"button",17),pe("click",function(){return r.openModal("AB")}),P(105,"i",13),y()()()()()(),v(106,"div",27)(107,"button",28),M(108,"Projects"),y(),v(109,"button",29),M(110,"About"),y(),v(111,"button",30),P(112,"i",31),y()(),P(113,"br"),y(),v(114,"div",32)(115,"div",33)(116,"div",34)(117,"div",35)(118,"h4",36),M(119,"Model Title"),y(),v(120,"button",37),pe("click",function(){return r.onCloseHandled("KS")}),v(121,"span",38),M(122,"\xd7"),y()()(),v(123,"div",39)(124,"p"),M(125,"Model body text"),y()(),v(126,"div",40)(127,"button",41),pe("click",function(){return r.onCloseHandled("KS")}),M(128,"Close"),y()()()()(),v(129,"div",32)(130,"div",33)(131,"div",34)(132,"div",35)(133,"h4",36),M(134,"Fotopia Technologies"),y(),v(135,"button",37),pe("click",function(){return r.onCloseHandled("Foto")}),v(136,"span",38),M(137,"\xd7"),y()()(),v(138,"div",39)(139,"div",42),P(140,"img",43),y()(),v(141,"div",40)(142,"button",41),pe("click",function(){return r.onCloseHandled("Foto")}),M(143,"Close"),y()()()()(),v(144,"div",32)(145,"div",33)(146,"div",34)(147,"div",35)(148,"h4",36),M(149,"Telecom Egypt"),y(),v(150,"button",37),pe("click",function(){return r.onCloseHandled("We")}),v(151,"span",38),M(152,"\xd7"),y()()(),v(153,"div",39),P(154,"div",42),y(),v(155,"div",40)(156,"button",41),pe("click",function(){return r.onCloseHandled("We")}),M(157,"Close"),y()()()()(),v(158,"div",32)(159,"div",33)(160,"div",34)(161,"div",35)(162,"h4",36),M(163,"National Telecommunication Institute - NTI"),y(),v(164,"button",37),pe("click",function(){return r.onCloseHandled("NTI")}),v(165,"span",38),M(166,"\xd7"),y()()(),v(167,"div",39)(168,"div",42),P(169,"img",44),y()(),v(170,"div",40)(171,"button",41),pe("click",function(){return r.onCloseHandled("NTI")}),M(172,"Close"),y()()()()(),v(173,"div",32)(174,"div",33)(175,"div",34)(176,"div",35)(177,"h4",36),M(178,"WIRO PLUS"),y(),v(179,"button",37),pe("click",function(){return r.onCloseHandled("Wiro")}),v(180,"span",38),M(181,"\xd7"),y()()(),v(182,"div",39)(183,"div",42),P(184,"img",45),y(),v(185,"div",42),P(186,"img",46),y()(),v(187,"div",40)(188,"button",41),pe("click",function(){return r.onCloseHandled("Wiro")}),M(189,"Close"),y()()()()(),v(190,"div",32)(191,"div",33)(192,"div",34)(193,"div",35)(194,"h4",36),M(195,"Sprints"),y(),v(196,"button",37),pe("click",function(){return r.onCloseHandled("AB")}),v(197,"span",38),M(198,"\xd7"),y()()(),v(199,"div",39)(200,"div",42),P(201,"img",47),y(),v(202,"div",42),P(203,"img",48),y(),v(204,"div",42),P(205,"img",49),y(),v(206,"div",42),P(207,"img",50),y(),v(208,"div",42),P(209,"img",51),y(),v(210,"div",42),P(211,"img",52),y(),v(212,"div",42),P(213,"img",53),y(),v(214,"div",42),P(215,"img",54),y()(),v(216,"div",40)(217,"button",41),pe("click",function(){return r.onCloseHandled("AB")}),M(218,"Close"),y()()()()()),2&i&&(_e(114),fe("ngStyle",Ur(6,Au,r.displayKS,r.opacityKS)),_e(15),fe("ngStyle",Ur(9,Au,r.displayFoto,r.opacityFoto)),_e(15),fe("ngStyle",Ur(12,Au,r.displayWe,r.opacityWe)),_e(14),fe("ngStyle",Ur(15,Au,r.displayNTI,r.opacityNTI)),_e(15),fe("ngStyle",Ur(18,Au,r.displayWiro,r.opacityWiro)),_e(17),fe("ngStyle",Ur(21,Au,r.displayAB,r.opacityAB)))},dependencies:[Zy,Fl],styles:['.text_shadows[_ngcontent-%COMP%]{text-shadow:3px 3px 0 #E0B0FF,6px 6px 0 #CF9FFF,9px 9px #9F2B68,12px 12px 0 #CBC3E3;font-family:trashfort,sans-serif;font-weight:400;text-transform:uppercase;font-size:calc(2rem + 5vw);text-align:center;margin:0;color:#bf40bf;animation:_ngcontent-%COMP%_shadows 1.2s ease-in infinite,move 1.2s ease-in infinite;letter-spacing:.4rem}@keyframes _ngcontent-%COMP%_shadows{0%{text-shadow:none}10%{text-shadow:3px 3px 0 #E0B0FF}20%{text-shadow:3px 3px 0 #E0B0FF,6px 6px 0 #CF9FFF}30%{text-shadow:3px 3px 0 #E0B0FF,6px 6px 0 #CF9FFF,9px 9px #9F2B68}40%{text-shadow:3px 3px 0 #E0B0FF,6px 6px 0 #CF9FFF,9px 9px #9F2B68,12px 12px 0 #CBC3E3}50%{text-shadow:3px 3px 0 #E0B0FF,6px 6px 0 #CF9FFF,9px 9px #9F2B68,12px 12px 0 #CBC3E3}60%{text-shadow:3px 3px 0 #E0B0FF,6px 6px 0 #CF9FFF,9px 9px #9F2B68,12px 12px 0 #CBC3E3}70%{text-shadow:3px 3px 0 #E0B0FF,6px 6px 0 #CF9FFF,9px 9px #9F2B68}80%{text-shadow:3px 3px 0 #E0B0FF,6px 6px 0 #CF9FFF}90%{text-shadow:3px 3px 0 #E0B0FF}to{text-shadow:none}}@keyframes _ngcontent-%COMP%_move{0%{transform:translate(0)}40%{transform:translate(-12px,-12px)}50%{transform:translate(-12px,-12px)}60%{transform:translate(-12px,-12px)}to{transform:translate(0)}}h1[_ngcontent-%COMP%]{text-shadow:3px 3px 0 #E0B0FF,6px 6px 0 #CF9FFF,9px 9px #9F2B68,12px 12px 0 #CBC3E3;font-family:trashfort,sans-serif;font-weight:400;text-transform:uppercase;font-size:calc(2rem + 5vw);text-align:center;margin:0;color:#bf40bf;letter-spacing:.4rem}*[_ngcontent-%COMP%]{margin:0;padding:0}button[_ngcontent-%COMP%]{background-color:#eff8e2}.mod[_ngcontent-%COMP%]{background-color:transparent;border:transparent;padding:6px!important}.close[_ngcontent-%COMP%]:hover{background-color:transparent!important;color:#bf40bf}.clkbtn[_ngcontent-%COMP%]{box-shadow:0 8px 16px #0003,0 6px 20px #00000030;font-family:kbdunktank,sans-serif;font-weight:300;font-size:1.75rem;margin:5px;padding:7px!important}.mimgcon[_ngcontent-%COMP%]{width:inherit;overflow:hidden;border-radius:10px;border-style:solid;border-width:3px;border-color:#bf40bf;margin-bottom:5px;align-self:center}.mimg[_ngcontent-%COMP%]{width:100%;transform:scale(1);transition:.3s ease-in-out}.mimg[_ngcontent-%COMP%]:hover{transform:scale(1.3)}button[_ngcontent-%COMP%]:hover{background-color:#cbc3e3;color:#bf40bf}body[_ngcontent-%COMP%]{background:#555;background-image:url(bgdoodle.ce46917460a30c6a.png)}.tcont[_ngcontent-%COMP%]{font-family:#9F2B68;display:flex;justify-content:center}.timeline[_ngcontent-%COMP%]{margin:20px auto;padding:20px}.card[_ngcontent-%COMP%]{position:relative;background:transparent;border:0}.card[_ngcontent-%COMP%]:nth-child(odd){padding:30px 0 30px 30px}.card[_ngcontent-%COMP%]:nth-child(2n){padding:30px 30px 30px 0}.card[_ngcontent-%COMP%]:before{content:"";position:absolute;width:50%;border:solid #BF40BF}.card[_ngcontent-%COMP%]:nth-child(odd):before{left:0;top:-4.5px;bottom:-4.5px;border-width:5px 0 5px 5px;border-radius:50px 0 0 50px}.card[_ngcontent-%COMP%]:nth-child(2n):before{right:0;top:0;bottom:0;border-width:5px 5px 5px 0;border-radius:0 50px 50px 0}.card[_ngcontent-%COMP%]:first-child:before{border-top:0;border-top-left-radius:0}.card[_ngcontent-%COMP%]:last-child:nth-child(odd):before{border-bottom:0;border-bottom-left-radius:0}.card[_ngcontent-%COMP%]:last-child:nth-child(2n):before{border-bottom:0;border-bottom-right-radius:0}.info[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:transparent;color:#e0b0ff;text-shadow:1px 1px 0 #eff8e2;border-radius:10px;padding:10px}.title[_ngcontent-%COMP%], .subtitle[_ngcontent-%COMP%]{color:#cbc3e3;position:relative}.rightlogo[_ngcontent-%COMP%]{position:absolute;align-self:flex-end}.leftlogo[_ngcontent-%COMP%]{position:absolute;align-self:flex-start}.rightbtn[_ngcontent-%COMP%]{position:absolute;align-self:flex-end}.leftbtn[_ngcontent-%COMP%]{position:absolute;align-self:flex-start}.title[_ngcontent-%COMP%]:before{content:"";position:absolute;width:15px;height:15px;background:#555;border-radius:999px;border:3px solid #BF40BF}.card[_ngcontent-%COMP%]:nth-child(2n) > .info[_ngcontent-%COMP%] > .title[_ngcontent-%COMP%]{text-align:right}.card[_ngcontent-%COMP%]:nth-child(2n) > .info[_ngcontent-%COMP%] > .subtitle[_ngcontent-%COMP%]{text-align:right}.card[_ngcontent-%COMP%]:nth-child(odd) > .info[_ngcontent-%COMP%] > .title[_ngcontent-%COMP%]:before{left:-45px}.card[_ngcontent-%COMP%]:nth-child(2n) > .info[_ngcontent-%COMP%] > .title[_ngcontent-%COMP%]:before{right:-45px}.btn[_ngcontent-%COMP%]{padding:0}.modal[_ngcontent-%COMP%]{background-color:#555;background-image:url(bgdoodle.ce46917460a30c6a.png)}@media all and (max-width: 801px){.leftlogo[_ngcontent-%COMP%], .rightlogo[_ngcontent-%COMP%]{position:relative;align-self:center;margin:10px 0}}']})}return n})()},{path:"projects",component:(()=>{class n{constructor(){this.selected="Any"}SelectedValue(){var t=document.getElementById("Select");this.selected=t.options[t.selectedIndex].innerHTML}open(t){window.open(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=ci({type:n,selectors:[["app-projectspage"]],decls:100,vars:42,consts:[[1,"text_shadows"],["align","center"],["id","selectLabel","for","Select",1,"form-label"],["id","Select",1,"form-select",3,"change"],[1,"tcont"],[1,"timeline"],[1,"outer"],["class","card",4,"ngIf"],["type","button","routerLink","/experience",1,"btn","clkbtn"],["type","button","routerLink","/about",1,"btn","clkbtn"],["type","button","routerLink","/favourites",1,"btn","clkbtn"],[1,"bi","bi-clipboard-heart-fill"],[1,"card"],[1,"info"],[1,"title"],[1,"subtitle"],[1,"divcont"],["type","button","onclick","window.open('../../assets/projects/Thesis1.pdf')",1,"btn"],[1,"bi","bi-clipboard"],[1,"logos"],["href","https://www.python.org","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/python/python-original.svg","alt","python","width","40","height","40"],["href","https://pytorch.org/","target","_blank","rel","noreferrer"],["src","https://www.vectorlogo.zone/logos/pytorch/pytorch-icon.svg","alt","pytorch","width","40","height","40"],["href","https://opencv.org/","target","_blank","rel","noreferrer"],["src","https://www.vectorlogo.zone/logos/opencv/opencv-icon.svg","alt","opencv","width","40","height","40"],["href","https://pandas.pydata.org/","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/2ae2a900d2f041da66e950e4d48052658d850630/icons/pandas/pandas-original.svg","alt","pandas","width","40","height","40"],["href","https://scikit-learn.org/","target","_blank","rel","noreferrer"],["src","https://upload.wikimedia.org/wikipedia/commons/0/05/Scikit_learn_logo_small.svg","alt","scikit_learn","width","40","height","40"],["href","https://seaborn.pydata.org/","target","_blank","rel","noreferrer"],["src","https://seaborn.pydata.org/_images/logo-mark-lightbg.svg","alt","seaborn","width","40","height","40"],["href","https://www.w3schools.com/cpp/","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/cplusplus/cplusplus-original.svg","alt","cplusplus","width","40","height","40"],["href","https://www.linux.org/","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/linux/linux-original.svg","alt","linux","width","40","height","40"],["href","https://angular.io","target","_blank","rel","noreferrer"],["src","https://angular.io/assets/images/logos/angular/angular.svg","alt","angular","width","40","height","40"],["href","https://getbootstrap.com","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/bootstrap/bootstrap-plain-wordmark.svg","alt","bootstrap","width","40","height","40"],["href","https://www.w3schools.com/css/","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/css3/css3-original-wordmark.svg","alt","css3","width","40","height","40"],["href","https://www.w3.org/html/","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/html5/html5-original-wordmark.svg","alt","html5","width","40","height","40"],["href","https://developer.mozilla.org/en-US/docs/Web/JavaScript","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/javascript/javascript-original.svg","alt","javascript","width","40","height","40"],["href","https://nodejs.org","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/nodejs/nodejs-original-wordmark.svg","alt","nodejs","width","40","height","40"],["href","https://www.typescriptlang.org/","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/typescript/typescript-original.svg","alt","typescript","width","40","height","40"],["href","https://www.tensorflow.org","target","_blank","rel","noreferrer"],["src","https://www.vectorlogo.zone/logos/tensorflow/tensorflow-icon.svg","alt","tensorflow","width","40","height","40"],["type","button","onclick","window.open('https://github.com/Anthony-Amgad/Secure-Outlook')",1,"btn"],[1,"bi","bi-github"],[1,"mimgcon"],[1,"mimg",3,"src","click"],["href","https://www.qt.io/","target","_blank","rel","noreferrer"],["src","https://upload.wikimedia.org/wikipedia/commons/0/0b/Qt_logo_2016.svg","alt","qt","width","40","height","40"],["href","https://www.mongodb.com/","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/mongodb/mongodb-original-wordmark.svg","alt","mongodb","width","40","height","40"],["controls","",1,"mvid"],[3,"src"],["href","https://developer.android.com","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/android/android-original-wordmark.svg","alt","android","width","40","height","40"],["href","https://dart.dev","target","_blank","rel","noreferrer"],["src","https://www.vectorlogo.zone/logos/dartlang/dartlang-icon.svg","alt","dart","width","40","height","40"],["href","https://firebase.google.com/","target","_blank","rel","noreferrer"],["src","https://www.vectorlogo.zone/logos/firebase/firebase-icon.svg","alt","firebase","width","40","height","40"],["href","https://flutter.dev","target","_blank","rel","noreferrer"],["src","https://www.vectorlogo.zone/logos/flutterio/flutterio-icon.svg","alt","flutter","width","40","height","40"],["href","https://www.java.com","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/java/java-original.svg","alt","java","width","40","height","40"],["type","button","onclick","window.open('https://github.com/Anthony-Amgad/Distributed-Project')",1,"btn"],["allowfullscreen","","src","https://www.youtube.com/embed/hVoL1KevE1g",1,"mvid"],["href","https://aws.amazon.com","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/amazonwebservices/amazonwebservices-original-wordmark.svg","alt","aws","width","40","height","40"],["href","https://www.w3schools.com/cs/","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/csharp/csharp-original.svg","alt","csharp","width","40","height","40"],["href","https://unity.com/","target","_blank","rel","noreferrer"],["src","https://www.vectorlogo.zone/logos/unity3d/unity3d-icon.svg","alt","unity","width","40","height","40"],["type","button","onclick","window.open('../../assets/projects/Fruit Recognition.pdf')",1,"btn"],["type","button","onclick","window.open('https://github.com/Anthony-Amgad/Fruit-Recognition-Deep-Learning')",1,"btn"],["type","button","onclick","window.open('https://github.com/Anthony-Amgad/RTESProjectTeam1')",1,"btn"],["href","https://www.cprogramming.com/","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/c/c-original.svg","alt","c","width","40","height","40"],["type","button","onclick","window.open('../../assets/projects/automata.pdf')",1,"btn"],["type","button","onclick","window.open('https://github.com/Anthony-Amgad/automataProject')",1,"btn"],["type","button","onclick","window.open('../../assets/projects/CVP1.pdf')",1,"btn"],["type","button","onclick","window.open('../../assets/projects/CVP2.pdf')",1,"btn"],["type","button","onclick","window.open('https://github.com/Anthony-Amgad/Vision_Project_Team17')",1,"btn"],["allowfullscreen","","src","https://drive.google.com/file/d/1rXOvd5BzwLp6wOIZyeJ81OScdZb66bsj/preview","allow","autoplay",1,"mvid"],["href","https://www.mysql.com/","target","_blank","rel","noreferrer"],["src","https://raw.githubusercontent.com/devicons/devicon/master/icons/mysql/mysql-original-wordmark.svg","alt","mysql","width","40","height","40"],["type","button","onclick","window.open('../../assets/projects/mldoc.pdf')",1,"btn"],["type","button","onclick","window.open('../../assets/projects/Embedded.pdf')",1,"btn"],["type","button","onclick","window.open('https://github.com/Anthony-Amgad/Team1-CSE211-Project')",1,"btn"],["type","button","onclick","window.open('../../assets/projects/testing.pdf')",1,"btn"],["type","button","onclick","window.open('https://github.com/youssefg7/CSE338Project')",1,"btn"],["type","button","onclick","window.open('../../assets/projects/AI.pdf')",1,"btn"],["type","button","onclick","window.open('https://github.com/Anthony-Amgad/CSE472-Project')",1,"btn"],["type","button","onclick","window.open('../../assets/projects/compilers.pdf')",1,"btn"],["type","button","onclick","window.open('https://github.com/youssefg7/CSE439Team3Spring22')",1,"btn"],["type","button","onclick","window.open('../../assets/projects/DS.pdf')",1,"btn"],["type","button","onclick","window.open('https://github.com/Anthony-Amgad/SortingAlgorithmDSProject')",1,"btn"],["type","button","onclick","window.open('../../assets/projects/EDA.pdf')",1,"btn"],["target","_blank","rel","noreferrer",2,"margin","0 10px 0 10px","color","darkblue"],["type","button","onclick","window.open('../../assets/projects/Operating Systems.pdf')",1,"btn"],["type","button","onclick","window.open('../../assets/projects/ASW.pdf')",1,"btn"],["type","button","onclick","window.open('https://github.com/youssefg7/nazamly-blk')",1,"btn"]],template:function(i,r){1&i&&(v(0,"body"),P(1,"br"),v(2,"h1",0),M(3,"Projects \u{1f52c}"),y(),v(4,"div",1)(5,"label",2),M(6,"Tool Filter Menu"),y(),v(7,"select",3),pe("change",function(){return r.SelectedValue()}),v(8,"option"),M(9,"Any"),y(),v(10,"option"),M(11,"Python"),y(),v(12,"option"),M(13,"Pytorch"),y(),v(14,"option"),M(15,"TensorFlow"),y(),v(16,"option"),M(17,"Scikit-learn"),y(),v(18,"option"),M(19,"OpenCV"),y(),v(20,"option"),M(21,"Pandas"),y(),v(22,"option"),M(23,"Seaborn"),y(),v(24,"option"),M(25,"Linux"),y(),v(26,"option"),M(27,"C++"),y(),v(28,"option"),M(29,"C#"),y(),v(30,"option"),M(31,"C"),y(),v(32,"option"),M(33,"QT"),y(),v(34,"option"),M(35,"MongoDB"),y(),v(36,"option"),M(37,"Android"),y(),v(38,"option"),M(39,"Dart"),y(),v(40,"option"),M(41,"Firebase"),y(),v(42,"option"),M(43,"Flutter"),y(),v(44,"option"),M(45,"Java"),y(),v(46,"option"),M(47,"AWS"),y(),v(48,"option"),M(49,"Unity"),y(),v(50,"option"),M(51,"HTML"),y(),v(52,"option"),M(53,"CSS"),y(),v(54,"option"),M(55,"JavaScript"),y(),v(56,"option"),M(57,"TypeScript"),y(),v(58,"option"),M(59,"Bootstrap"),y(),v(60,"option"),M(61,"SQL"),y(),v(62,"option"),M(63,"Angular"),y(),v(64,"option"),M(65,"nodejs"),y(),v(66,"option"),M(67,"VHDL"),y()()(),v(68,"div",4)(69,"div",5)(70,"div",6),Oe(71,YK,38,0,"div",7),Oe(72,XK,24,0,"div",7),Oe(73,JK,26,0,"div",7),Oe(74,ZK,26,1,"div",7),Oe(75,KK,32,1,"div",7),Oe(76,QK,35,0,"div",7),Oe(77,eQ,35,0,"div",7),Oe(78,tQ,20,1,"div",7),Oe(79,nQ,25,0,"div",7),Oe(80,iQ,30,0,"div",7),Oe(81,rQ,31,1,"div",7),Oe(82,sQ,15,0,"div",7),Oe(83,oQ,21,0,"div",7),Oe(84,aQ,23,0,"div",7),Oe(85,cQ,30,0,"div",7),Oe(86,lQ,25,0,"div",7),Oe(87,uQ,16,0,"div",7),Oe(88,dQ,13,0,"div",7),Oe(89,hQ,18,0,"div",7),Oe(90,fQ,34,1,"div",7),Oe(91,pQ,9,0,"div",7),y()()(),v(92,"div",1)(93,"button",8),M(94,"Experience"),y(),v(95,"button",9),M(96,"About"),y(),v(97,"button",10),P(98,"i",11),y()(),P(99,"br"),y()),2&i&&(_e(71),fe("ngIf",Dn(21,gQ).includes(r.selected)),_e(1),fe("ngIf",Dn(22,mQ).includes(r.selected)),_e(1),fe("ngIf",Dn(23,_Q).includes(r.selected)),_e(1),fe("ngIf",Dn(24,vQ).includes(r.selected)),_e(1),fe("ngIf",Dn(25,yQ).includes(r.selected)),_e(1),fe("ngIf",Dn(26,bQ).includes(r.selected)),_e(1),fe("ngIf",Dn(27,wQ).includes(r.selected)),_e(1),fe("ngIf",Dn(28,Sw).includes(r.selected)),_e(1),fe("ngIf",Dn(29,Cw).includes(r.selected)),_e(1),fe("ngIf",Dn(30,xQ).includes(r.selected)),_e(1),fe("ngIf",Dn(31,MQ).includes(r.selected)),_e(1),fe("ngIf",Dn(32,SQ).includes(r.selected)),_e(1),fe("ngIf",Dn(33,Sw).includes(r.selected)),_e(1),fe("ngIf",Dn(34,CQ).includes(r.selected)),_e(1),fe("ngIf",Dn(35,Cw).includes(r.selected)),_e(1),fe("ngIf",Dn(36,Cw).includes(r.selected)),_e(1),fe("ngIf",Dn(37,EQ).includes(r.selected)),_e(1),fe("ngIf",Dn(38,JN).includes(r.selected)),_e(1),fe("ngIf",Dn(39,Sw).includes(r.selected)),_e(1),fe("ngIf",Dn(40,TQ).includes(r.selected)),_e(1),fe("ngIf",Dn(41,JN).includes(r.selected)))},dependencies:[Vo,Fl],styles:['select[_ngcontent-%COMP%]{width:60%;background-color:#07e5a0;color:#3107e5}select[_ngcontent-%COMP%]:hover{box-shadow:3px 3px #e5a007}option[_ngcontent-%COMP%]{text-align:center}#selectLabel[_ngcontent-%COMP%]{font-family:trashfort;font-weight:bolder;font-size:larger}.text_shadows[_ngcontent-%COMP%]{text-shadow:3px 3px 0 #b9169b,6px 6px 0 #07e5a0,9px 9px #e5a007,12px 12px 0 #3107e5;font-family:trashfort,sans-serif;font-weight:400;text-transform:uppercase;font-size:calc(2rem + 5vw);text-align:center;margin:0;color:#a007e5;animation:_ngcontent-%COMP%_shadows 1.2s ease-in infinite,move 1.2s ease-in infinite;letter-spacing:.4rem}@keyframes _ngcontent-%COMP%_shadows{0%{text-shadow:none}10%{text-shadow:3px 3px 0 #b9169b}20%{text-shadow:3px 3px 0 #b9169b,6px 6px 0 #07e5a0}30%{text-shadow:3px 3px 0 #b9169b,6px 6px 0 #07e5a0,9px 9px #e5a007}40%{text-shadow:3px 3px 0 #b9169b,6px 6px 0 #07e5a0,9px 9px #e5a007,12px 12px 0 #3107e5}50%{text-shadow:3px 3px 0 #b9169b,6px 6px 0 #07e5a0,9px 9px #e5a007,12px 12px 0 #3107e5}60%{text-shadow:3px 3px 0 #b9169b,6px 6px 0 #07e5a0,9px 9px #e5a007,12px 12px 0 #3107e5}70%{text-shadow:3px 3px 0 #b9169b,6px 6px 0 #07e5a0,9px 9px #e5a007}80%{text-shadow:3px 3px 0 #b9169b,6px 6px 0 #07e5a0}90%{text-shadow:3px 3px 0 #b9169b}to{text-shadow:none}}@keyframes _ngcontent-%COMP%_move{0%{transform:translate(0)}40%{transform:translate(-12px,-12px)}50%{transform:translate(-12px,-12px)}60%{transform:translate(-12px,-12px)}to{transform:translate(0)}}h1[_ngcontent-%COMP%]{text-shadow:3px 3px 0 #b9169b,6px 6px 0 #07e5a0,9px 9px #e5a007,12px 12px 0 #3107e5;font-family:trashfort,sans-serif;font-weight:400;text-transform:uppercase;font-size:calc(2rem + 5vw);text-align:center;margin:0;color:#a007e5;letter-spacing:.4rem}body[_ngcontent-%COMP%]{background:#eff8e2;background-image:url(bgxo.a29218a351792c51.png)}.clkbtn[_ngcontent-%COMP%]{box-shadow:0 8px 16px #0003,0 6px 20px #00000030;font-family:kbdunktank,sans-serif;font-weight:300;font-size:1.75rem;margin:5px;padding:7px!important}.tcont[_ngcontent-%COMP%]{font-family:#e5a007;display:flex;justify-content:center}.timeline[_ngcontent-%COMP%]{margin:20px auto;padding:20px;min-width:100%}.card[_ngcontent-%COMP%]{position:relative;background:transparent;border:0}.card[_ngcontent-%COMP%]:nth-child(odd){padding:30px 0 30px 30px}.card[_ngcontent-%COMP%]:nth-child(2n){padding:30px 30px 30px 0}.card[_ngcontent-%COMP%]:before{content:"";position:absolute;width:50%;border:solid #a007e5;pointer-events:none}.card[_ngcontent-%COMP%]:nth-child(odd):before{left:0;top:-4.5px;bottom:-4.5px;border-width:5px 0 5px 5px;border-radius:50px 0 0 50px;pointer-events:none}.card[_ngcontent-%COMP%]:nth-child(2n):before{right:0;top:0;bottom:0;border-width:5px 5px 5px 0;border-radius:0 50px 50px 0;pointer-events:none}.card[_ngcontent-%COMP%]:first-child:before{border-top:0;border-top-left-radius:0;pointer-events:none}.card[_ngcontent-%COMP%]:last-child:nth-child(odd):before{border-bottom:0;border-bottom-left-radius:0;pointer-events:none}.card[_ngcontent-%COMP%]:last-child:nth-child(2n):before{border-bottom:0;border-bottom-right-radius:0;pointer-events:none}button[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;background-color:#07e5a0;color:#a007e5;margin:10px 5px 0}button[_ngcontent-%COMP%]:hover{background-color:#e5a007;color:#a007e5}.info[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:transparent;color:#b9169b;text-shadow:1px 1px 0 #eff8e2;border-radius:10px;padding:10px;font-weight:700}.title[_ngcontent-%COMP%], .subtitle[_ngcontent-%COMP%]{color:#3107e5;position:relative}.logos[_ngcontent-%COMP%]{position:absolute;align-self:flex-end;text-align:right}.divimgs[_ngcontent-%COMP%]{position:absolute;align-self:flex-end;margin-top:90px;width:25%}.mimgcon[_ngcontent-%COMP%]{overflow:hidden;border-radius:10px;border-style:solid;border-width:3px;border-color:#a007e5;margin-bottom:5px;width:30%;background-color:#000;align-self:center;margin-top:10px}.mimg[_ngcontent-%COMP%], .mvid[_ngcontent-%COMP%]{width:100%;transform:scale(1);transition:.3s ease-in-out}.mimg[_ngcontent-%COMP%]:hover{transform:scale(1.3)}.title[_ngcontent-%COMP%]:before{content:"";position:absolute;width:15px;height:15px;background:#eff8e2;border-radius:999px;border:3px solid #a007e5}.card[_ngcontent-%COMP%]:nth-child(2n) > .info[_ngcontent-%COMP%] > .title[_ngcontent-%COMP%]{text-align:right}.card[_ngcontent-%COMP%]:nth-child(2n) > .info[_ngcontent-%COMP%] > .subtitle[_ngcontent-%COMP%]{text-align:right}.card[_ngcontent-%COMP%]:nth-child(2n) > .info[_ngcontent-%COMP%] > .logos[_ngcontent-%COMP%]{align-self:flex-start;text-align:left}.card[_ngcontent-%COMP%]:nth-child(2n) > .info[_ngcontent-%COMP%] > .divcont[_ngcontent-%COMP%]{text-align:right}.card[_ngcontent-%COMP%]:nth-child(2n) > .info[_ngcontent-%COMP%] > .divimgs[_ngcontent-%COMP%]{align-self:flex-start}.card[_ngcontent-%COMP%]:nth-child(2n) > .info[_ngcontent-%COMP%] > .divcont[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{direction:rtl}.card[_ngcontent-%COMP%]:nth-child(odd) > .info[_ngcontent-%COMP%] > .title[_ngcontent-%COMP%]:before{left:-45px}.card[_ngcontent-%COMP%]:nth-child(2n) > .info[_ngcontent-%COMP%] > .title[_ngcontent-%COMP%]:before{right:-45px}@media all and (max-width: 801px){.logos[_ngcontent-%COMP%]{position:relative;margin-top:10px}.mimgcon[_ngcontent-%COMP%]{width:70%}}']})}return n})()},{path:"favourites",component:(()=>{class n{constructor(){this.display=new Map([["contnet",!1]])}drawer(t){var i=document.getElementById(t);if(i.clientHeight)i.style.height="0";else{var r=document.getElementById("m"+t);i.style.height=r.clientHeight+10+"px"}}open(t){window.open(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=ci({type:n,selectors:[["app-favouritespage"]],decls:616,vars:6,consts:[["id","head"],["id","mid"],[1,"separator--line"],["type","button",1,"collapsible",3,"click"],["id","Album",1,"content"],["id","mAlbum"],[1,"divimgs"],[1,"mimgcon"],["onclick","window.open('https://open.spotify.com/album/3c0NHNo2Gn0X7uARad3hGv')",1,"mimg",3,"src"],["onclick","window.open('https://open.spotify.com/album/1S9MukUQEFAYCqlfrwqMd6')",1,"mimg",3,"src"],["href","https://www.albumoftheyear.org/album/498816-quadeca-i-didnt-mean-to-haunt-you.php"],["allowfullscreen","","src","https://www.youtube.com/embed/Ig17K38Fy0Y",1,"mvid"],["href","https://www.youtube.com/watch?v=VXR3wubNMiw"],["href","https://www.albumoftheyear.org/album/868978-quadeca-scrapyard.php"],["id","Animal",1,"content"],["id","mAnimal"],["id","Anime",1,"content"],["id","mAnime"],["id","Animechar",1,"content"],["id","mAnimechar"],["id","antihero",1,"content"],["id","mantihero"],["id","band",1,"content"],["id","mband"],["allowfullscreen","","src","https://www.youtube.com/embed/XFkzRNyygfk",1,"mvid"],["id","board",1,"content"],["id","mboard"],["id","card",1,"content"],["id","mcard"],["id","cmovie",1,"content"],["id","mcmovie"],["id","color",1,"content",2,"background-color","blueviolet"],["id","mcolor"],[2,"height","200px"],[2,"color","#aaa","font-weight","bold"],["id","drink",1,"content"],["id","mdrink"],["id","flavoric",1,"content"],["id","mflavoric"],["id","food",1,"content"],["id","mfood"],["id","game",1,"content"],["id","mgame"],["id","gamechar",1,"content"],["id","mgamechar"],["href","https://www.youtube.com/watch?v=0FCvzsVlXpQ"],["id","hero",1,"content"],["id","mhero"],["id","hobby",1,"content"],["id","mhobby"],["href","https://www.instagram.com/johncena/"],[1,"mimg",3,"src","click"],["id","holiday",1,"content"],["id","mholiday",2,"height","350px"],["id","movie",1,"content"],["id","mmovie"],["allowfullscreen","","src","https://www.youtube.com/embed/7GlsxNI4LVI",1,"mvid"],["id","myth",1,"content"],["id","mmyth"],["id","operson",1,"content"],["id","moperson"],["href","https://www.youtube.com/@ludwig"],["href","https://offbrand.gg/"],["href","https://www.twitch.tv/moistcr1tikal"],["id","podcast",1,"content"],["id","mpodcast"],["href","https://www.youtube.com/@jacksepticeye"],["href","https://www.youtube.com/@ethan"],["href","https://www.youtube.com/@brainleakpodcast"],["id","pokemon",1,"content"],["id","mpokemon"],["id","season",1,"content"],["id","mseason"],["id","tshost",1,"content"],["id","mtshost"],["allowfullscreen","","src","https://www.youtube.com/embed/4cjBFa6MdUQ",1,"mvid"],["id","tvshow",1,"content"],["id","mtvshow"],["href","https://www.imdb.com/title/tt0417299/"],["id","utensil",1,"content"],["id","mutensil",2,"height","350px"],["id","wrestler",1,"content"],["id","mwrestler"],["id","yugioh",1,"content"],["id","myugioh"]],template:function(i,r){1&i&&(P(0,"head"),v(1,"body"),P(2,"br"),v(3,"h1"),M(4,"You've Reached Anthony's Cabinet of"),y(),v(5,"header")(6,"h1",0)(7,"div"),M(8,"F"),y(),v(9,"div"),M(10,"A"),y(),v(11,"div"),M(12,"V"),y(),v(13,"div"),M(14,"O"),y(),v(15,"div"),M(16,"U"),y(),v(17,"div"),M(18,"R"),y(),v(19,"div"),M(20,"I"),y(),v(21,"div"),M(22,"T"),y(),v(23,"div"),M(24,"E"),y(),v(25,"div"),M(26,"S"),y()()(),v(27,"p",1)(28,"i"),M(29,"*click on a category to open its drawer*"),y()(),P(30,"hr",2),v(31,"button",3),pe("click",function(){return r.drawer("Album")}),M(32,"Album"),y(),v(33,"div",4)(34,"div",5)(35,"h2"),M(36,"I Didn't Mean to Haunt You + SCRAPYARD"),y(),v(37,"h3"),M(38,"By Quadeca"),y(),v(39,"h3"),M(40,"Genre: Folktronica, Art Pop, Alternative Hip Hop"),y(),v(41,"div",6)(42,"div",7),P(43,"img",8),y(),v(44,"div",7),P(45,"img",9),y()(),v(46,"p"),M(47," Quadeca, born Benjamin Lasky, is a rising star in the world of hip-hop. More than just a rapper, he's a multi-talented artist with an impressive range. He crafts not only his rhymes but also the instrumentals behind his music, showcasing his skills as a record producer. His career began on YouTube, where he initially focused on video games and comedy sketches. But his passion for music took hold, leading him to release mixtapes and eventually full-length albums. Quadeca's unique blend of technical rapping, introspective lyricism, and genre-bending production has garnered him a dedicated fanbase and established him as an artist to watch. "),y(),v(48,"p"),M(49,' In 2022 he released his LP "I Didn\'t Mean to Haunt You" (IDMTHY), which sonically sounded different than any thing he ever produced. It had a more glitchy pop sound that he flirted with on his previous LP "From Me To You". IDMTHY is posthumous album that is sung from the prespective of his ghost after death. The album sought major praise from the music industry and even placed #5 User Scored Album of 2022 on '),v(50,"a",10),M(51,"AOTY"),y(),M(52,". "),y(),v(53,"div",6)(54,"div",7),P(55,"iframe",11),y()(),v(56,"p"),M(57," In 2024 he released his Mixtape SCRAPYARD which was a collection of scraped songs off of IDMTHY that wouldn't fit on other projects. This album also gained a lot of praise even getting a 9/10 rating from "),v(58,"a",12),M(59,"TheNeedleDrop (aka. Anthony Fantano)"),y(),M(60," and as of 11-3-2024 it is ranked as #1 best album of 2024 on "),v(61,"a",13),M(62,"AOTY"),y(),M(63,". "),y(),v(64,"p"),M(65," Honorable Mentions: "),y(),v(66,"ul")(67,"li"),M(68,"OK Computer - Radiohead"),y(),v(69,"li"),M(70,"Salad Days - Mac DeMarco"),y(),v(71,"li"),M(72,"Trench - Twenty One Pilots"),y(),v(73,"li"),M(74,"After Hours - The Weeknd"),y()()()(),v(75,"button",3),pe("click",function(){return r.drawer("Animal")}),M(76,"Animal"),y(),v(77,"div",14)(78,"div",15)(79,"h2"),M(80,"HAWK"),y(),v(81,"p"),M(82," Hawks always felt like royalty to me. In Egyptian mythology, the hawk is most famously associated with Horus, the sky god. Often depicted with a hawk's head, Horus symbolized kingship, protection, and victory. Pharaohs, believed to be descendants of Horus, wore crowns adorned with hawk imagery. "),y(),v(83,"p"),M(84," In Greek mythology, god of light, prophecy, and healing, Apollo was often accompanied by a hawk, seen as a messenger carrying divine messages. In some historical depictions and interpretations of Norse mythology, Odin is portrayed with a hawk perched on his shoulder or with hawks flying nearby. "),y(),v(85,"p"),M(86," Honorable Mentions: "),y(),v(87,"ul")(88,"li"),M(89,"Raven"),y(),v(90,"li"),M(91,"Dog"),y()()()(),v(92,"button",3),pe("click",function(){return r.drawer("Anime")}),M(93,"Anime"),y(),v(94,"div",16)(95,"div",17)(96,"h2"),M(97,"Death Parade"),y(),v(98,"p"),M(99," Imagine a mysterious bar where the deceased arrive unknowingly, paired with strangers. This is Quindecim, a limbo presided over by the enigmatic bartender Decim. Here, souls play deadly games with high stakes: victory leads to reincarnation, while defeat condemns them to oblivion. As the competition exposes their deepest secrets and chips away at their facades, Decim arbitrates their fates, but everything changes with the arrival of a mysterious woman who throws the very system of judgment into question. "),y(),v(100,"p"),M(101," Death Parade transcends the boundaries of a typical anime by weaving a profound exploration of human nature into its captivating narrative. Each episode throws new souls into the crucible of Quindecim's high-stakes games, forcing them to confront their regrets, hidden desires, and the burdens they carry. The playful yet morbid premise unveils the characters' vulnerabilities, stripping away their masks to expose their core humanity. This introspective journey, masterfully crafted with exceptional animation and a hauntingly beautiful soundtrack, compels you to not only be entertained, but also to grapple with their own mortality and the choices that define their lives. While opinions can be subjective, Death Parade's ability to blend philosophical depth with a suspenseful plot and emotional resonance positions it as one of the best, if not the best, anime there is. "),y(),v(102,"p"),M(103," Honorable Mentions: "),y(),v(104,"ul")(105,"li"),M(106,"Fullmetal Alchemist: Brotherhood"),y(),v(107,"li"),M(108,"Death Note"),y(),v(109,"li"),M(110,"Steins;Gate"),y()()()(),v(111,"button",3),pe("click",function(){return r.drawer("Animechar")}),M(112,"Anime Character"),y(),v(113,"div",18)(114,"div",19),P(115,"br"),v(116,"h2"),M(117,"Sasuke Uchiha"),y(),v(118,"h3"),M(119,"From Naruto"),y(),v(120,"p"),M(121," Unlike the typical cheerful protagonist, he embodied a cool, brooding demeanor. Witnessing the massacre of his entire clan by his beloved brother, Itachi, fueled a burning desire for revenge within him. "),y(),v(122,"p"),M(123," Sasuke's journey wasn't a linear path towards good. He made questionable choices, pushing away those who cared about him. Yet, his unwavering determination to avenge his family showcased a depth uncommon in many characters. Despite his darkness, the flicker of his past bond with Naruto, his rival turned friend, offered a glimpse of the good that remained within. This complexity, the internal struggle between vengeance and his past camaraderie, makes him a fascinating character to follow. "),y(),v(124,"p"),M(125," Honorable Mentions: "),y(),v(126,"ul")(127,"li"),M(128,"Gojo Satoru - Jujutsu Kaisen"),y(),v(129,"li"),M(130,"L - Death Note"),y(),v(131,"li"),M(132,"Kakashi Hatake - Naruto"),y(),v(133,"li"),M(134,"Ken Kaneki - Tokyo Ghoul"),y()()()(),v(135,"button",3),pe("click",function(){return r.drawer("antihero")}),M(136,"Anti-Hero"),y(),v(137,"div",20)(138,"div",21)(139,"h2"),M(140,"Deadpool"),y(),v(141,"p"),M(142," Deadpool breaks the fourth wall, directly acknowledging the comic book medium and interacting with the readers. This meta-humor adds a unique layer to his character and can be entertaining for fans. He combines dark humor with his fighting, creating a distinctive experience. "),y(),v(143,"p"),M(144," Despite his comedic facade, Deadpool has a tragic past that includes suffering from mental illness and undergoing a procedure that left him disfigured. Before becoming Deadpool, he was Wade Wilson, a mercenary diagnosed with terminal cancer. Desperate for a cure, he participates in the Weapon X program, a clandestine project experimenting with mutant abilities. While the experiment grants him a powerful healing factor, it also leaves him with extreme physical disfigurement and mental instability. This trauma contributes to his dark humor and erratic behavior. "),y(),v(145,"p"),M(146," He constantly battles the voices in his head, a manifestation of his fractured mental state. The brutal methods he employs and the lives he takes weigh heavily on him, despite his often flippant attitude. Despite his outward persona, Deadpool desires companionship and belonging. "),y(),v(147,"p"),M(148," Honorable Mentions: "),y(),v(149,"ul")(150,"li"),M(151,"Jason Todd - Robin/Red Hood"),y(),v(152,"li"),M(153,"Wolverine"),y(),v(154,"li"),M(155,"Eddie Brock - Venom"),y()()()(),v(156,"button",3),pe("click",function(){return r.drawer("band")}),M(157,"Band"),y(),v(158,"div",22)(159,"div",23),P(160,"br"),v(161,"h2"),M(162,"Radiohead"),y(),v(163,"p"),M(164,' Radiohead isn\'t just about catchy tunes. They weave intricate soundscapes that draw me in. Layers of guitars intertwine with Thom Yorke\'s unique, emotionally charged vocals. Their music isn\'t afraid to explore complex themes. From the anxieties of modern life in "Paranoid Android" to the haunting beauty of loss in "Pyramid Song," they tackle emotions that resonate deeply. '),y(),v(165,"p"),M(166,' Furthermore, Radiohead constantly reinvented themselves. They\'re not content with staying in one genre. From the raw rock of "OK Computer" to the electronic experimentation in "Kid A," their evolution keeps their music fresh and surprising. This willingness to push boundaries allowed them to stay relevant and constantly challenge listeners, offering a unique experience with every album. '),y(),v(167,"div",6)(168,"div",7),P(169,"iframe",24),y()(),v(170,"p"),M(171," Honorable Mentions: "),y(),v(172,"ul")(173,"li"),M(174,"Twenty One Pilots"),y(),v(175,"li"),M(176,"Nirvana"),y(),v(177,"li"),M(178,"Daft Punk"),y()()()(),v(179,"button",3),pe("click",function(){return r.drawer("board")}),M(180,"Board Game"),y(),v(181,"div",25)(182,"div",26)(183,"h2"),M(184,"C"),v(185,"span"),M(186,"o"),y(),M(187,"n"),v(188,"span"),M(189,"n"),y(),M(190,"e"),v(191,"span"),M(192,"c"),y(),M(193,"t "),v(194,"span"),M(195,"F"),y(),M(196,"o"),v(197,"span"),M(198,"u"),y(),M(199,"r"),y(),v(200,"p"),M(201," I'll crush you in this game, trust me. "),y(),v(202,"p"),M(203," Honorable Mentions: "),y(),v(204,"ul")(205,"li"),M(206,"Risk"),y(),v(207,"li"),M(208,"Monopoly"),y(),v(209,"li"),M(210,"Clue"),y()()()(),v(211,"button",3),pe("click",function(){return r.drawer("card")}),M(212,"Card Game"),y(),v(213,"div",27)(214,"div",28)(215,"h2"),M(216,"Monopoly Deal"),y(),v(217,"p"),M(218," Firstly, the compact size and quick playtime are unbeatable. Unlike its board game counterpart that can stretch for hours, a game of Deal can be settled in a thrilling 15 minutes. "),y(),v(219,"p"),M(220," The gameplay itself is a perfect blend of strategy and chaos. You're constantly weighing the best use of your cards \u2013 collecting properties, forcing trades with opponents, or strategically stealing their hard-earned cash. Collecting those property sets feels equally satisfying, but the constant player interaction and card manipulation keep the game dynamic and unpredictable. It's the perfect pick-me-up for a game night. "),y(),v(221,"p"),M(222," Honorable Mentions: "),y(),v(223,"ul")(224,"li"),M(225,"\u0633\u0643\u0631\u0648"),y(),v(226,"li"),M(227,"Pok\xe9mon TCG"),y(),v(228,"li"),M(229,"Yu-Gi-Oh!"),y()()()(),v(230,"button",3),pe("click",function(){return r.drawer("cmovie")}),M(231,"Childhood Movie"),y(),v(232,"div",29)(233,"div",30)(234,"h2"),M(235,"Monsters Inc"),y(),v(236,"p"),M(237," I had that movie when I was a kid and memorized every line because of how much I watched it. "),y(),v(238,"p"),M(239," Honorable Mentions: "),y(),v(240,"ul")(241,"li"),M(242,"Cars"),y(),v(243,"li"),M(244,"Staurt Little"),y(),v(245,"li"),M(246,"Ratatouille"),y()()()(),v(247,"button",3),pe("click",function(){return r.drawer("color")}),M(248,"Color"),y(),v(249,"div",31)(250,"div",32),P(251,"div",33),v(252,"p",34),M(253," Honorable Mention "),y()()(),v(254,"button",3),pe("click",function(){return r.drawer("drink")}),M(255,"Drink"),y(),v(256,"div",35)(257,"div",36)(258,"h2"),M(259,"Milk Tea"),y(),v(260,"p"),M(261," Milk tea offers a delightful combination of smooth tea and creamy milk... Am I supposed to elaborate any more ? "),y(),v(262,"p"),M(263," Honorable Mentions: "),y(),v(264,"ul")(265,"li"),M(266,"Water"),y()()()(),v(267,"button",3),pe("click",function(){return r.drawer("flavoric")}),M(268,"Flavour of Ice Cream"),y(),v(269,"div",37)(270,"div",38)(271,"h2"),M(272,"Blueberry Yogurt"),y(),v(273,"p"),M(274," Blueberries offer a delightful tartness that cuts through the sweetness of the ice cream base, creating a refreshing and balanced flavor profile. In addition, yogurt based ice creams often boast a smooth and creamy texture, which pairs exceptionally well with the juicy bits of blueberries. "),y(),v(275,"p"),M(276," Honorable Mentions: "),y(),v(277,"ul")(278,"li"),M(279,"Chocolate"),y(),v(280,"li"),M(281,"Vanilla"),y()()()(),v(282,"button",3),pe("click",function(){return r.drawer("food")}),M(283,"Food"),y(),v(284,"div",39)(285,"div",40)(286,"h2"),M(287,"Burger"),y(),v(288,"p"),M(289," Only if executed right though. "),y(),v(290,"p"),M(291," Honorable Mentions: "),y(),v(292,"ul")(293,"li"),M(294,"Pizza"),y(),v(295,"li"),M(296,"Jelly Beans"),y()()()(),v(297,"button",3),pe("click",function(){return r.drawer("game")}),M(298,"Game"),y(),v(299,"div",41)(300,"div",42),P(301,"br"),v(302,"h2"),M(303,"Persona 5"),y(),v(304,"p"),M(305," Persona 5 is a critically-acclaimed role-playing game (RPG) where you take on the role of a high school student by day and a vigilante known as Joker by night. In modern-day Tokyo, you navigate the complexities of school life while wielding supernatural powers called Personas. These Personas manifest from the depths of your psyche and aid you in battling against corrupt individuals within distorted mental landscapes. As the Phantom Thieves, you fight to expose the darkness within these figures and bring about societal reform, all while forging bonds with your fellow thieves and managing your daily life. "),y(),v(306,"p"),M(307," Persona 5 tackles the concept of rebellion against societal corruption and personal growth. This theme combined with a well-crafted narrative is highly immersive. The game boasts a diverse cast beyond just your playable party. Each character, including villains, has well-developed backstories and motivations, making them feel real and adding depth to the narrative. The story focuses not just on fighting external villains but also on the characters' individual journeys. "),y(),v(308,"p"),M(309," Persona 5 doesn't shy away from portraying the complexities of human nature. While the Phantom Thieves are the protagonists, their methods of vigilantism can be morally ambiguous, sparking internal conflict and encouraging players to ponder the concept of justice. The narrative keeps players engaged with unexpected plot developments and revelations. Palaces, the distorted mental worlds you infiltrate, offer unique challenges and tie directly to the villains' inner darkness, further unraveling the story's layers. "),y(),v(310,"p"),M(311," These elements combine to craft a story that is both entertaining and thought-provoking. It goes beyond a simple good versus evil scenario, offering a nuanced exploration of human behavior. "),y(),v(312,"p"),M(313," Honorable Mentions: "),y(),v(314,"ul")(315,"li"),M(316,"Undertale"),y(),v(317,"li"),M(318,"Batman: Arkham Knight"),y(),v(319,"li"),M(320,"God of War (PS4)"),y(),v(321,"li"),M(322,"Minecraft"),y()()()(),v(323,"button",3),pe("click",function(){return r.drawer("gamechar")}),M(324,"Game Character"),y(),v(325,"div",43)(326,"div",44)(327,"h2"),M(328,"Sans"),y(),v(329,"h3"),M(330,"From Undertale"),y(),v(331,"p"),M(332," Undertale is an indie role-playing game where you control a human child who has fallen underground. The game revolves around your choices: fight or show mercy to the quirky monsters you encounter. Sans, a pivotal character, is a seemingly laid-back skeleton with an affinity for puns and hot dogs. Despite his goofy demeanor, Sans holds immense power and serves as a major challenge or even a final boss depending on your gameplay choices. Undertale's charm lies in its unique blend of humor, memorable characters like Sans, and a narrative that emphasizes the power of compassion and understanding. "),y(),v(333,"p"),M(334," Sans' constant use of puns and his laid-back attitude provide comedic relief throughout the game. His mysterious nature and occasional cryptic messages spark curiosity. Despite his seemingly carefree personality, Sans possesses immense power, particularly evident during certain routes in the game. This surprising contrast between his casualness and hidden strength is very intriguing. "),y(),v(335,"p"),M(336," Throughout the game, Sans drops subtle hints that suggest he acknowledges the player's control over the narrative. He makes comments about your actions in previous playthroughs, breaking the immersion and creating a sense of unease. Sans' dialogues often have a deeper layer, referencing mechanics or concepts outside the game world. For instance, he might mention \"coming back from a bad time,\" which could be interpreted as referencing the player reloading a save file after a character's death. In certain scenarios, Sans seems aware of the existence of alternate timelines and the choices the player has made. This adds to the mystery surrounding his character and his position within the game's narrative. "),y(),v(337,"p"),M(338," Sans' ability to break the 4th wall adds a unique layer of humor and intrigue to the narrative. It makes him unpredictable and forces players to question his true motives and understanding of the game world. Oh and there's also "),v(339,"a",45),M(340,"Megalovania"),y(),M(341,". "),y(),v(342,"p"),M(343," Honorable Mentions: "),y(),v(344,"ul")(345,"li"),M(346,"Connor - Detroit: Become Human"),y(),v(347,"li"),M(348,"Goro Ackechi - Persona 5"),y(),v(349,"li"),M(350,"Atreus - God of War"),y(),v(351,"li"),M(352,"The Arkham Knight - Batman: Arkham Knight"),y(),v(353,"li"),M(354,"Flowey - Undertale"),y()()()(),v(355,"button",3),pe("click",function(){return r.drawer("hero")}),M(356,"Hero"),y(),v(357,"div",46)(358,"div",47),P(359,"br"),v(360,"h2"),M(361,"Batman"),y(),v(362,"p"),M(363," Unlike most superheroes with superhuman abilities, Batman is a peak human, relying on his intellect, physicality, and technological advancements. This lack of superpowers allows viewers to connect with him on a more human level. Batman's backstory, fueled by witnessing his parents' murder, adds depth and complexity to his character. He operates in a moral gray area, constantly battling his inner demons while fighting for justice. "),y(),v(364,"p"),M(365," Batman boasts one of the most diverse and interesting villain lineups in comics. From the deranged Joker to the cunning Penguin, each villain presents a unique challenge, keeping the stories fresh and engaging. My favourite version of Batman is the Arkhamverse one. The Arkhamverse Batman isn't a flawless symbol of unwavering righteousness. He grapples with inner demons, resorting to brutal tactics and occasionally blurring the lines between hero and vigilante. While he has allies like Robin and Nightwing, the core narrative emphasizes Batman's solitary nature. He shoulders the burden of protecting Gotham alone, often pushing away those who care about him. As the series progresses, Batman faces not only external threats but also internal struggles. He confronts the psychological manipulation of his villains and the potential for darkness within himself. This ongoing battle shapes his character throughout the narrative. "),y(),v(366,"p"),M(367," The Arkhamverse's portrayal of Batman offers a complex and nuanced take on the character. He is a hero driven by a tragic past, a brilliant strategist with questionable methods, and a symbol of hope who grapples with his own inner darkness. "),y(),v(368,"p"),M(369," Honorable Mentions: "),y(),v(370,"ul")(371,"li"),M(372,"Peter Quill - Star-Lord"),y(),v(373,"li"),M(374,"Peter Parker & Miles Morales - Spider-man"),y(),v(375,"li"),M(376,"Dick Grayson - Robin/Nightwing"),y(),v(377,"li"),M(378,"Matt Murdock - Daredevil"),y()()()(),v(379,"button",3),pe("click",function(){return r.drawer("hobby")}),M(380,"Hobby"),y(),v(381,"div",48)(382,"div",49)(383,"h2"),M(384,"The Cards"),y(),v(385,"p"),M(386," Lately I've been creating these square cards for fun. Their content's meaning is up to the person's interpretation of it. It was kind of inpired by "),v(387,"a",50),M(388,"John Cena's Instagram"),y(),M(389,", but with a more coherent structure to the madness. "),y(),v(390,"div",6)(391,"div",7)(392,"img",51),pe("click",function(){return r.open("../../assets/fav/h.jpg")}),y()(),v(393,"div",7)(394,"img",51),pe("click",function(){return r.open("../../assets/fav/g.jpg")}),y()()(),v(395,"p"),M(396," You might've noticed that the previous card's theme is carried on to the next, which sort of connects them all together, and to be frank, I want to continue doing them without ever stating the main reason or meaning behind any of the cards, because that would just take the fun out of it. "),y(),v(397,"p"),M(398," I've been having a lot of fun creating these to be honest. "),y()()(),v(399,"button",3),pe("click",function(){return r.drawer("holiday")}),M(400,"Holiday"),y(),v(401,"div",52),P(402,"div",53),y(),v(403,"button",3),pe("click",function(){return r.drawer("movie")}),M(404,"Movie"),y(),v(405,"div",54)(406,"div",55)(407,"h2"),M(408,"Interstellar"),y(),v(409,"p"),M(410," The movie boasts breathtaking depictions of space phenomena like black holes and wormholes. The use of a combination of practical effects and CGI creates a realistic and awe-inspiring portrayal of the cosmos. Let me tell you about that cornfield... nah jk :p. Interstellar strives for a grounded approach in its depiction of space travel and the physics involved. Collaboration with renowned scientists ensures a level of scientific accuracy uncommon in sci-fi films. "),y(),v(411,"p"),M(412," The film's score by Hans Zimmer is widely praised for its emotional impact and ability to elevate the viewing experience. The music perfectly complements the visuals and the film's overall tone. "),y(),v(413,"div",6)(414,"div",7),P(415,"iframe",56),y()(),v(416,"p"),M(417," The movie delves into profound questions about humanity's place in the universe, the nature of time and space, and the lengths we go to for survival and the preservation of our species. The film features powerful performances by Matthew McConaughey, Anne Hathaway, and other talented actors, further drawing the audience into the characters' struggles and motivations. "),y(),v(418,"p"),M(419," Honorable Mentions: "),y(),v(420,"ul")(421,"li"),M(422,"Shawshank Redemption"),y(),v(423,"li"),M(424,"Memento"),y(),v(425,"li"),M(426,"The Batman"),y()()()(),v(427,"button",3),pe("click",function(){return r.drawer("myth")}),M(428,"Mythological Entity"),y(),v(429,"div",57)(430,"div",58)(431,"h2"),M(432,"Ouroboros"),y(),v(433,"p"),M(434," The image of a serpent biting its own tail is inherently striking. It creates a sense of endless cycle, representing concepts that loop back onto themselves. Ouroboros holds various symbolic interpretations. The Ouroboros symbol appears in various cultures throughout history, indicating a universal human interest in the cyclical nature of existence. The most prominent example is in the Egyptian mythology, which is Apophis, a giant serpent representing chaos and destruction. Often depicted encircling the sun god Ra, symbolizing the daily journey of the sun and the potential for darkness to consume light. "),y(),v(435,"p"),M(436," In Norse mythology there is Jormungandr, the Midgard Serpent, which encircles the entire world and bites its own tail. It represents the destructive potential of nature and is destined to battle the thunder god Thor during Ragnarok, the end of the world. Ouroboros itself appears in later Greek texts and alchemical traditions. Here, it embodies the cyclical nature of life, death, and rebirth. "),y(),v(437,"p"),M(438," Therefore, Ouroboros' captivating image, its profound symbolic interpretations, and its historical and cultural significance make it a compelling mythological entity that continues to spark curiosity and inspire thought. "),y(),v(439,"p"),M(440," Honorable Mentions: "),y(),v(441,"ul")(442,"li"),M(443,"Loki"),y(),v(444,"li"),M(445,"Osiris"),y(),v(446,"li"),M(447,"Odin"),y()()()(),v(448,"button",3),pe("click",function(){return r.drawer("operson")}),M(449,"Online Personality"),y(),v(450,"div",59)(451,"div",60)(452,"h2"),M(453,"Ludwig Ahgren"),y(),v(454,"p"),M(455," Ludwig is a multi-faceted internet personality. He rose to fame through live streaming on Twitch, initially focusing on video games like Super Smash Bros. Melee. Ludwig's engaging personality and comedic style garnered a large audience. However, his reach extends beyond gaming. Ludwig's subathon, which took place in March-April 2021, became a landmark event in the streaming world, as it ran for a staggering 31 days. Ludwig's initial goal was a modest 24-hour stream. However, due to overwhelming viewer support through subscriptions and donations, the timer kept extending. The subathon skyrocketed Ludwig's popularity. He broke the record for the most concurrent subscribers on Twitch at the time, reaching a peak of over 273,000. "),y(),v(456,"p"),M(457," As of 11-3-2024 he actively streams and creates content on "),v(458,"a",61),M(459,"Youtube"),y(),M(460,', tackling various topics beyond games, and even hosts his own highly produced events through his company, "'),v(461,"a",62),M(462,"Offbrand"),y(),M(463,'". Ludwig is also known for co-owning the esports organization Moist Esports alongside '),v(464,"a",63),M(465,"MoistCr1tikal"),y(),M(466,". His diverse content and willingness to experiment have solidified his position as a prominent figure in the online entertainment space. "),y(),v(467,"p"),M(468," Honorable Mentions: "),y(),v(469,"ul")(470,"li"),M(471,"Pewdiepie"),y(),v(472,"li"),M(473,"Markiplier"),y(),v(474,"li"),M(475,"jschlatt"),y()()()(),v(476,"button",3),pe("click",function(){return r.drawer("podcast")}),M(477,"Podcast"),y(),v(478,"div",64)(479,"div",65)(480,"h2"),M(481,"Brain Leak"),y(),v(482,"p"),M(483," It's the unfiltered thoughts of "),v(484,"a",66),M(485,"Sean McLoughlin (Jacksepticeye)"),y(),M(486," and "),v(487,"a",67),M(488,"Ethan Nestor (CrankGameplays)"),y(),M(489,' with the podcast "'),v(490,"a",68),M(491,"Brain Leak"),y(),M(492,'". This comedic show promises an "off-kilter" and "wildly irreverent" journey into their minds. No topic is off-limits, as they delve into the strange, funny, and even "slimy bits" that come up during their conversations. Expect unscripted discussions, weird tangents, and plenty of laughter as they explore the depths (and sometimes shallows) of their thought processes. '),y(),v(493,"div",6)(494,"div",7)(495,"img",51),pe("click",function(){return r.open("https://open.spotify.com/show/1L4biGtn1rrp8yBmV0MFlb")}),y()()(),v(496,"p"),M(497," Both Sean and Ethan are successful YouTubers with large followings. This pre-existing fanbase brings a built-in audience to the podcast, familiar with their humor and online personas. Jacksepticeye is known for his energetic and enthusiastic presence, while CrankGameplays offers a more sarcastic and dry wit. This dynamic creates a humorous interplay between the two, keeping the conversations interesting. "),y(),v(498,"p"),M(499," Honorable Mentions: "),y(),v(500,"ul")(501,"li"),M(502,"Trash Taste"),y(),v(503,"li"),M(504,"TMG Podcast"),y(),v(505,"li"),M(506,"Conan O'Brien Needs A Friend"),y()()()(),v(507,"button",3),pe("click",function(){return r.drawer("pokemon")}),M(508,"Pokemon"),y(),v(509,"div",69)(510,"div",70)(511,"h2"),M(512,"Pikachu"),y(),v(513,"p"),M(514," Yes I know... the poster boy of Pok\xe9mon, how generic of me.. am I right? But here me out for a second. I've loved Pikachu ever since I was like 4 years old. I have pictures from when I was kid wearing Pikachu merchandise. Plus Pikachu is the best electric type Pok\xe9mon there is anyway. "),y(),v(515,"p"),M(516," When I grew older and played some of the Pok\xe9mon games I remember looking up how to get Pikachu first thing whenever I picked up a new one of the games. So don't blame me, he's just been there from the start. "),y(),v(517,"p"),M(518," Honorable Mentions: "),y(),v(519,"ul")(520,"li"),M(521,"Charmander"),y(),v(522,"li"),M(523,"Gyarados"),y(),v(524,"li"),M(525,"Mew"),y()()()(),v(526,"button",3),pe("click",function(){return r.drawer("season")}),M(527,"Season of the Year"),y(),v(528,"div",71)(529,"div",72)(530,"h2"),M(531,"Winter"),y(),v(532,"p"),M(533," Winter coincides with holidays like Christmas and New Year, bringing a joyous ambiance and opportunities for family gatherings and celebrations. Colder weather often leads to seeking warmth and comfort. This can involve enjoying hot beverages, indulging in warm meals, or curling up with a good book by a fireplace. "),y(),v(534,"p"),M(535," There's also the greatest perk of them all, and that is that we get to be sweat free. "),y()()(),v(536,"button",3),pe("click",function(){return r.drawer("tshost")}),M(537,"Talk Show Host"),y(),v(538,"div",73)(539,"div",74)(540,"h2"),M(541,"Conan O'Brien"),y(),v(542,"p"),M(543,' Conan O\'Brien is a prominent figure in American late-night television, having spent nearly three decades entertaining audiences with his signature blend of wit and absurdity. O\'Brien\'s career began as a writer for iconic shows like "Saturday Night Live" and "The Simpsons" before he rose to fame hosting his own late-night programs. Over the years, he has captivated viewers with shows like "Late Night with Conan O\'Brien," "The Tonight Show with Conan O\'Brien," and most recently, "Conan" on TBS. While he stepped down from his TBS show in 2021, O\'Brien\'s legacy of comedic innovation and quirky charm continues to influence the late-night landscape. '),y(),v(544,"p"),M(545," O'Brien embraces the absurd and unexpected. His jokes often veer into the surreal, with a heavy dose of self-deprecation and awkward physical comedy. This creates a unique brand of humor that's distinct from the more traditional approaches of other hosts. He isn't afraid to poke fun at himself, the industry, and current events. This satirical wit adds a layer of intelligent humor that goes beyond the typical late-night monologue jokes. From remotes filled with awkward celebrity encounters to recurring bits like \"Clueless Gamer,\" he pushes the boundaries of the late-night format, keeping the audience engaged with surprise and laughter. "),y(),v(546,"p"),M(547," Throughout his career, O'Brien has successfully transitioned across different platforms and formats. From network television to cable and even podcasts, he has consistently reinvented himself while staying true to his core comedic style. This video by Renzy showcases why Conan is the best in my opinion. "),y(),v(548,"div",6)(549,"div",7),P(550,"iframe",75),y()()()(),v(551,"button",3),pe("click",function(){return r.drawer("tvshow")}),M(552,"TV Show"),y(),v(553,"div",76)(554,"div",77)(555,"h2"),M(556,"Avatar the Last Airbender"),y(),v(557,"p"),M(558,' You might\'ve expected a "Breaking Bad" or a "Game of Thrones", but no. Rated at #7 Top-TV on '),v(559,"a",78),M(560,"IMBD"),y(),M(561," Avatar The Last Airbender (ATLA) is an animated series set in a world where people can manipulate one of the four elements: water, earth, fire, or air. The story follows Aang, a young and playful Air Nomad who also happens to be the Avatar, the sole individual capable of mastering all elements. After a century in hiding, Aang awakens to a world ravaged by the Fire Nation's war. With the help of his waterbending sibling friends, Katara and Sokka, Aang embarks on a quest to master the elements, restore balance to the world, and defeat the ruthless Fire Lord. "),y(),v(562,"p"),M(563," Aang, the protagonist, embodies the classic hero's journey, but with a childlike innocence and a strong moral compass. The supporting cast, like the determined Katara and the sarcastic Sokka, offer relatable personalities and growth throughout the series. Even antagonists like Prince Zuko have complex motivations and grapple with inner conflict, making them more than one-dimensional villains. The show seamlessly blends lighthearted moments and slapstick comedy with themes of war, loss, and the importance of maintaining peace. This balance caters to a wider audience and allows viewers to connect with the characters on a deeper level. "),y(),v(564,"p"),M(565," A core message of the series is the potential for personal growth and the possibility of redemption. Characters like Zuko and Iroh embark on journeys of self-discovery, highlighting the importance of learning from mistakes and choosing the right path. The show's unique blend of action, humor, and emotional depth likely contributes to its enduring popularity and positive reception by many. "),y(),v(566,"p"),M(567," Honorable Mentions: "),y(),v(568,"ul")(569,"li"),M(570,"Invinsible"),y(),v(571,"li"),M(572,"Daredevil (The Netflix Series)"),y()()()(),v(573,"button",3),pe("click",function(){return r.drawer("utensil")}),M(574,"Utensil"),y(),v(575,"div",79),P(576,"div",80),y(),v(577,"button",3),pe("click",function(){return r.drawer("wrestler")}),M(578,"Wrestler"),y(),v(579,"div",81)(580,"div",82)(581,"h2"),M(582,"CM Punk"),y(),v(583,"p"),M(584," CM Punk, born Phillip Jack Brooks, is a multifaceted figure in the world of entertainment. He reigns supreme in the world of professional wrestling, holding the title of WWE Champion for a record-breaking 434 days. Beyond the ring, Punk has carved a path in mixed martial arts and explored the world of acting. Currently as of 11-3-2024, he is signed with WWE, he continues to captivate audiences with his outspoken personality, exceptional in-ring skills, and dedication to his craft. "),y(),v(585,"p"),M(586," CM Punk's ability to blur the lines between reality and scripted elements of professional wrestling is a defining aspect of his persona. In 2011, his infamous \"pipebomb\" promo stands as a prime example. He went off-script, criticizing WWE management, colleagues, and the industry itself. This unsanctioned tirade exposed the inner workings of the business, creating a sense of realness and blurring the lines between Punk the wrestler and Punk the individual. While maintaining his character to a degree, he's known to express personal opinions and frustrations that feel unscripted. This approach adds a layer of intrigue, making it difficult to discern where the character ends and the real person begins. "),y(),v(587,"p"),M(588," There's a sense of honesty and realness in his unscripted moments. Fans appreciate his willingness to express genuine opinions, even if they challenge the status quo. By blurring the lines, he subtly acknowledges the theatrical nature of professional wrestling. This adds a layer of meta-commentary that some fans find intriguing. "),y(),v(589,"p"),M(590,' This ability to straddle the line between wrestling persona and personal expression is a key element that sets him apart from many of his contemporaries and supports his self acclaimed title of "Best in the World". '),y()()(),v(591,"button",3),pe("click",function(){return r.drawer("yugioh")}),M(592,"Yu-Gi-Oh! Card"),y(),v(593,"div",83)(594,"div",84)(595,"h2"),M(596,"Shooting Quasar Dragon"),y(),v(597,"p"),M(598,' When I was young I used to play Yu-Gi-Oh! a bunch. However, this was the first card that ever got me to run an archetype which was Synchrons. It was the first ever card that made me learn and do combos. So in short this card got me into playing "meta" Yu-Gi-Oh! in a sense. That\'s why I consider it my favourite. '),y(),v(599,"div",6)(600,"div",7)(601,"img",51),pe("click",function(){return r.open("../../assets/fav/yugioh.jpg")}),y()()(),v(602,"p"),M(603," Honorable Mentions: "),y(),v(604,"ul")(605,"li"),M(606,"Level Eater"),y(),v(607,"li"),M(608,"Ultimate Conductor Tyranno"),y(),v(609,"li"),M(610,"Twin-Barrel Dragon"),y()()()(),P(611,"hr",2),v(612,"p",1)(613,"i"),M(614,"*Will update this list whenever I feel like it*"),y()(),P(615,"br"),y()),2&i&&(_e(43),fe("src","../../assets/fav/idmthycover.webp",vr),_e(2),fe("src","../../assets/fav/sycover.jpg",vr),_e(347),fe("src","../../assets/fav/h.jpg",vr),_e(2),fe("src","../../assets/fav/g.jpg",vr),_e(101),fe("src","../../assets/fav/podcast.jpg",vr),_e(106),fe("src","../../assets/fav/yugioh.jpg",vr))},styles:["body[_ngcontent-%COMP%]{background:#27416c;background-image:url(bgfav.ae46e2c595e162d6.png);color:#f5f5f5}#mid[_ngcontent-%COMP%]{font-weight:lighter;text-align:center;text-shadow:1px 1px 0 #999}header[_ngcontent-%COMP%], #head[_ngcontent-%COMP%]{margin:0}header[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center}#head[_ngcontent-%COMP%]{color:#fff;font-family:wiggle,Oswald,sans-serif;font-size:calc(2rem + 5vw);font-weight:700}@keyframes _ngcontent-%COMP%_example-1{0%{transform:translateY(0)}50%{transform:translateY(9px);opacity:.0625}}@keyframes _ngcontent-%COMP%_example-2{0%{transform:translateY(0)}50%{transform:translateY(10px);opacity:.125}}@keyframes _ngcontent-%COMP%_example-3{0%{transform:translateY(0)}50%{transform:translateY(11px);opacity:.1875}}@keyframes _ngcontent-%COMP%_example-4{0%{transform:translateY(0)}50%{transform:translateY(12px);opacity:.25}}@keyframes _ngcontent-%COMP%_example-5{0%{transform:translateY(0)}50%{transform:translateY(13px);opacity:.3125}}@keyframes _ngcontent-%COMP%_example-6{0%{transform:translateY(0)}50%{transform:translateY(14px);opacity:.375}}@keyframes _ngcontent-%COMP%_example-7{0%{transform:translateY(0)}50%{transform:translateY(15px);opacity:.4375}}@keyframes _ngcontent-%COMP%_example-8{0%{transform:translateY(0)}50%{transform:translateY(16px);opacity:.5}}@keyframes _ngcontent-%COMP%_example-9{0%{transform:translateY(0)}50%{transform:translateY(17px);opacity:.5625}}@keyframes _ngcontent-%COMP%_example-10{0%{transform:translateY(0)}50%{transform:translateY(18px);opacity:.625}}@keyframes _ngcontent-%COMP%_example-11{0%{transform:translateY(0)}50%{transform:translateY(19px);opacity:.6875}}#head[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){display:inline-block;text-shadow:4px 4px 0 #999;animation-name:_ngcontent-%COMP%_example-1;animation-duration:3s;animation-iteration-count:infinite;animation-delay:.2s;animation-timing-function:ease-in-out}#head[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){display:inline-block;text-shadow:4px 4px 0 #999;animation-name:_ngcontent-%COMP%_example-2;animation-duration:3s;animation-iteration-count:infinite;animation-delay:.4s;animation-timing-function:ease-in-out}#head[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){display:inline-block;text-shadow:4px 4px 0 #999;animation-name:_ngcontent-%COMP%_example-3;animation-duration:3s;animation-iteration-count:infinite;animation-delay:.6s;animation-timing-function:ease-in-out}#head[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){display:inline-block;text-shadow:4px 4px 0 #999;animation-name:_ngcontent-%COMP%_example-4;animation-duration:3s;animation-iteration-count:infinite;animation-delay:.8s;animation-timing-function:ease-in-out}#head[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(5){display:inline-block;text-shadow:4px 4px 0 #999;animation-name:_ngcontent-%COMP%_example-5;animation-duration:3s;animation-iteration-count:infinite;animation-delay:1s;animation-timing-function:ease-in-out}#head[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(6){display:inline-block;text-shadow:4px 4px 0 #999;animation-name:_ngcontent-%COMP%_example-6;animation-duration:3s;animation-iteration-count:infinite;animation-delay:1.2s;animation-timing-function:ease-in-out}#head[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(7){display:inline-block;text-shadow:4px 4px 0 #999;animation-name:_ngcontent-%COMP%_example-7;animation-duration:3s;animation-iteration-count:infinite;animation-delay:1.4s;animation-timing-function:ease-in-out}#head[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(8){display:inline-block;text-shadow:4px 4px 0 #999;animation-name:_ngcontent-%COMP%_example-8;animation-duration:3s;animation-iteration-count:infinite;animation-delay:1.6s;animation-timing-function:ease-in-out}#head[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(9){display:inline-block;text-shadow:4px 4px 0 #999;animation-name:_ngcontent-%COMP%_example-9;animation-duration:3s;animation-iteration-count:infinite;animation-delay:1.8s;animation-timing-function:ease-in-out}#head[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(10){display:inline-block;text-shadow:4px 4px 0 #999;animation-name:_ngcontent-%COMP%_example-10;animation-duration:3s;animation-iteration-count:infinite;animation-delay:2s;animation-timing-function:ease-in-out}h1[_ngcontent-%COMP%]{color:#fff;font-family:wiggle,Oswald,sans-serif;font-size:calc(2rem + 5vw);font-weight:700;text-shadow:4px 4px 0 #999;text-align:center}.collapsible[_ngcontent-%COMP%]{background-color:transparent;padding:18px;width:100%;border:none;text-align:center;outline:none;font-family:kbdunktank,sans-serif;font-size:calc(1rem + 1vw);color:#fff;text-shadow:4px 4px 0 #999}.collapsible[_ngcontent-%COMP%]:hover{color:#999;text-shadow:4px 4px 0 white}.content[_ngcontent-%COMP%]{padding:0 18px;height:0;overflow:hidden;transition:height .5s;border-radius:10px}p[_ngcontent-%COMP%]{font-weight:700;font-size:large}.separator--line[_ngcontent-%COMP%]{border:0;border-bottom:5px solid whitesmoke;width:0;animation:_ngcontent-%COMP%_separator-width 4s ease-in-out;animation-iteration-count:infinite}@keyframes _ngcontent-%COMP%_separator-width{0%{width:0}25%{width:100%}50%{margin-left:auto;width:0%}75%{margin-left:auto;width:100%}76%{margin-left:0}to{margin-left:0;width:0}}.divimgs[_ngcontent-%COMP%]{display:flex;justify-content:center}.divimgs[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:5px}.mimgcon[_ngcontent-%COMP%]{overflow:hidden;border-radius:10px;border-style:solid;border-width:3px;border-color:#fff;margin-bottom:5px;width:20%;background-color:#000;align-self:center;margin-top:10px}.mimg[_ngcontent-%COMP%], .mvid[_ngcontent-%COMP%]{width:100%;transform:scale(1);transition:.3s ease-in-out}@media all and (max-width: 801px){.mimgcon[_ngcontent-%COMP%]{overflow:hidden;border-radius:10px;border-style:solid;border-width:3px;border-color:#fff;margin-bottom:5px;width:70%;background-color:#000;align-self:center;margin-top:10px}}.mimg[_ngcontent-%COMP%]:hover{transform:scale(1.3)}#Album[_ngcontent-%COMP%]{background-image:url(quadeca.b89f67a0689c5e48.gif);background-repeat:no-repeat;background-size:cover;background-position:center}#Album[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:idmthy;font-size:calc(1rem + 2vw)}#Album[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:idmthy}#Album[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], #Album[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{text-shadow:2px 1px 0 #999}#Animal[_ngcontent-%COMP%]{background-image:url(hawk.32c3e5e4277c5462.webp);background-repeat:no-repeat;background-size:cover;background-position:center;color:#9f8700}#Animal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:hawk;font-size:calc(1rem + 3vw);text-shadow:-1px -1px 0 gold,1px -1px 0 gold,-1px 1px 0 gold,1px 1px 0 gold}#Animal[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], #Animal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{text-shadow:-1px -1px 0 gold,1px -1px 0 gold,-1px 1px 0 gold,1px 1px 0 gold}#Animal[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-weight:700}#Anime[_ngcontent-%COMP%]{background-image:url(deathparade.e77ee6a7eb47970f.gif);background-repeat:no-repeat;background-size:cover;background-position:center}#Anime[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:deathparade;font-size:calc(1rem + 3vw);text-shadow:-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000}#Anime[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], #Anime[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{text-shadow:-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000}#Animechar[_ngcontent-%COMP%]{background-image:url(sasuke.4c6a97bb4b3a62e0.gif);background-repeat:no-repeat;background-size:cover;background-position:center}#Animechar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:sasuke;font-size:calc(1rem + 3vw);text-shadow:2px 2px 0 #a0a}#Animechar[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:sasuke;text-shadow:2px 1px 0 #a0a}#Animechar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], #Animechar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{text-shadow:2px 1px 0 #a0a}#antihero[_ngcontent-%COMP%]{background-image:url(antihero.435e163fd07bc7fe.gif);background-repeat:no-repeat;background-size:cover;background-position:center;color:#ff0}#antihero[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:antihero;font-size:calc(1rem + 3vw);text-shadow:2px 2px 0 blue}#antihero[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], #antihero[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{text-shadow:2px 1px 0 blue}#band[_ngcontent-%COMP%]{background-image:url(radiohead.b683ab13c9395f6c.gif);background-repeat:no-repeat;background-size:cover;background-position:center}#band[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:radiohead;font-size:calc(1rem + 3vw);text-shadow:2px 2px 0 rgb(218,141,218)}#band[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], #band[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{text-shadow:2px 1px 0 rgb(218,141,218)}#board[_ngcontent-%COMP%]{background-image:url(connect4.120cb58fc0a4bfdc.gif);background-repeat:no-repeat;background-size:cover;background-position:center;color:gold}#board[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:connect;font-size:calc(1rem + 3vw);text-shadow:-1px -1px 0 red,1px -1px 0 red,-1px 1px 0 red,1px 1px 0 red}#board[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:red;text-shadow:-1px -1px 0 gold,1px -1px 0 gold,-1px 1px 0 gold,1px 1px 0 gold}#board[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], #board[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{text-shadow:-1px -1px 0 red,1px -1px 0 red,-1px 1px 0 red,1px 1px 0 red}#card[_ngcontent-%COMP%]{background-image:url(monopoly.79f73a1f33923f99.gif);background-repeat:no-repeat;background-size:cover;background-position:center;color:green}#card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:monopoly;font-size:calc(1rem + 3vw);text-shadow:-1px -1px 0 black,1px -1px 0 black,-1px 1px 0 black,1px 1px 0 black,2px 2px 0 rgb(75,196,75)}#card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], #card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{text-shadow:-1px -1px 0 black,1px -1px 0 black,-1px 1px 0 black,1px 1px 0 black,2px 2px 0 rgb(75,196,75);font-size:large}#cmovie[_ngcontent-%COMP%]{background-image:url(monsters.43f70410c0b441c9.gif);background-repeat:no-repeat;background-size:cover;background-position:center;color:#adff2f}#cmovie[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:monsters;font-size:calc(1rem + 3vw);text-shadow:2px 2px 0 lightseagreen}#cmovie[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], #cmovie[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{text-shadow:2px 1px 0 lightseagreen}#drink[_ngcontent-%COMP%]{background-image:url(tea.c667627d00c3c757.gif);background-repeat:no-repeat;background-size:cover;background-position:center;color:#3d1712}#drink[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:tea;font-size:calc(1rem + 3vw);text-shadow:2px 2px 0 rgb(225,210,144)}#drink[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], #drink[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{text-shadow:-1px -1px 0 rgb(225,210,144),1px -1px 0 rgb(225,210,144),-1px 1px 0 rgb(225,210,144),1px 1px 0 rgb(225,210,144)}#drink[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-weight:700}#flavoric[_ngcontent-%COMP%]{background-image:url(flavoric.7b0e78b1cd1826eb.gif);background-repeat:no-repeat;background-size:cover;background-position:center;color:#00f}#flavoric[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:flavoric;font-size:calc(1rem + 3vw);text-shadow:2px 2px 0 violet}#flavoric[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], #flavoric[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{text-shadow:2px 1px 0 violet}#flavoric[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-weight:700}#food[_ngcontent-%COMP%]{background-image:url(burger.fdeceaff52a7fe7b.gif);background-repeat:no-repeat;background-size:cover;background-position:center;color:#ff0}#food[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:burger;font-size:calc(1rem + 3vw);text-shadow:2px 2px 0 rgb(173,173,8)}#food[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], #food[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{text-shadow:2px 1px 0 rgb(173,173,8)}#food[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-weight:700}#game[_ngcontent-%COMP%]{background-image:url(persona.a094145d1ea3c471.gif);background-repeat:no-repeat;background-size:cover;background-position:center;color:red}#game[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:persona;font-size:calc(1rem + 3vw);text-shadow:-2px -2px 0 black,2px -2px 0 black,-2px 2px 0 black,2px 2px 0 black}#game[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], #game[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{text-shadow:-1px -1px 0 black,1px -1px 0 black,-1px 1px 0 black,1px 1px 0 black}#game[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-weight:700}#gamechar[_ngcontent-%COMP%]{background-image:url(sans.013a76c2b687c879.gif);background-repeat:no-repeat;background-size:cover;background-position:center;color:#fff}#gamechar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:sans;font-size:calc(1rem + 3vw);text-shadow:2px 2px 0 blue}#gamechar[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:sans;text-shadow:2px 2px 0 blue}#gamechar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], #gamechar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{text-shadow:-1px -1px 0 blue,1px -1px 0 blue,-1px 1px 0 blue,1px 1px 0 blue}#gamechar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-weight:700}#hero[_ngcontent-%COMP%]{background-image:url(hero.921e60f0c074c025.gif);background-repeat:no-repeat;background-size:cover;background-position:center;color:#fff}#hero[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:hero;font-size:calc(1rem + 3vw);text-shadow:2px 2px 0 black}#hero[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], #hero[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{text-shadow:-1px -1px 0 black,1px -1px 0 black,-1px 1px 0 black,1px 1px 0 black}#hero[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-weight:700}#hero[_ngcontent-%COMP%]   .mimgcon[_ngcontent-%COMP%]{border-color:purple}#hobby[_ngcontent-%COMP%]{background-image:url(hobby.8f58574fe85d463f.gif);background-repeat:no-repeat;background-size:cover;background-position:center;color:#fff}#hobby[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:hobby;font-size:calc(1rem + 3vw);text-shadow:2px 2px 0 purple}#hobby[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], #hobby[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{text-shadow:-1px -1px 0 purple,1px -1px 0 purple,-1px 1px 0 purple,1px 1px 0 purple}#hobby[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-weight:700}#hobby[_ngcontent-%COMP%]   .mimgcon[_ngcontent-%COMP%]{border-color:purple}#holiday[_ngcontent-%COMP%]{background-image:url(christmas.08bd8a9f411483e9.gif);background-repeat:no-repeat;background-size:cover;background-position:center}#movie[_ngcontent-%COMP%]{background-image:url(movie.d70272d3903b2e73.gif);background-repeat:no-repeat;background-size:cover;background-position:center;color:#fff}#movie[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:movie;font-size:calc(1rem + 3vw);text-shadow:2px 2px 0 rgb(7,0,85)}#movie[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], #movie[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{text-shadow:2px 1px 0 rgb(7,0,85)}#movie[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-weight:700}#movie[_ngcontent-%COMP%]   .mimgcon[_ngcontent-%COMP%]{border-color:#070055}#myth[_ngcontent-%COMP%]{background-image:url(myth.b4f33300b001cfc5.gif);background-repeat:no-repeat;background-size:cover;background-position:center;color:#fff}#myth[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:myth;font-size:calc(1rem + 3vw);text-shadow:2px 2px 0 black}#myth[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], #myth[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{text-shadow:2px 1px 0 black}#myth[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-weight:700}#operson[_ngcontent-%COMP%]{background-image:url(operson.3a76e73b954ed1bc.gif);background-repeat:no-repeat;background-size:cover;background-position:center;color:#af00af}#operson[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:operson;font-size:calc(1rem + 3vw);text-shadow:2px 2px 0 red}#operson[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], #operson[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{text-shadow:-1px -1px 0 pink,1px -1px 0 pink,-1px 1px 0 pink,1px 1px 0 pink}#operson[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-weight:700}#operson[_ngcontent-%COMP%]   .mimgcon[_ngcontent-%COMP%]{border-color:#09b197}#podcast[_ngcontent-%COMP%]{background-image:url(podcast.771f058c70572c84.gif);background-repeat:no-repeat;background-size:cover;background-position:top;color:#e561b7}#podcast[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:podcast;font-size:calc(1rem + 3vw);text-shadow:2px 2px 0 #09b197}#podcast[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], #podcast[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{text-shadow:2px 1px 0 #09b197}#podcast[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-weight:700}#podcast[_ngcontent-%COMP%]   .mimgcon[_ngcontent-%COMP%]{border-color:#09b197}#pokemon[_ngcontent-%COMP%]{background-image:url(pokemon.b34c018e2ae9ddf3.gif);background-repeat:no-repeat;background-size:cover;background-position:center;color:#ff0}#pokemon[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:pokemon;font-size:calc(1rem + 3vw);text-shadow:2px 2px 0 black}#pokemon[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], #pokemon[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{text-shadow:-1px -1px 0 black,1px -1px 0 black,-1px 1px 0 black,1px 1px 0 black}#pokemon[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-weight:700}#pokemon[_ngcontent-%COMP%]   .mimgcon[_ngcontent-%COMP%]{border-color:#ff0}#season[_ngcontent-%COMP%]{background-image:url(season.14f6b869463f298e.gif);background-repeat:no-repeat;background-size:cover;background-position:center;color:#000}#season[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:season;font-size:calc(1rem + 3vw);text-shadow:2px 2px 0 cyan}#season[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], #season[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{text-shadow:2px 1px 0 cyan}#season[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-weight:700}#season[_ngcontent-%COMP%]   .mimgcon[_ngcontent-%COMP%]{border-color:#0ff}#tshost[_ngcontent-%COMP%]{background-image:url(tshost.f655b2232b7f4601.gif);background-repeat:no-repeat;background-size:cover;background-position:center;color:orange}#tshost[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:tshost;font-size:calc(1rem + 3vw);text-shadow:2px 2px 0 yellow}#tshost[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], #tshost[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{text-shadow:1px 1px 0 yellow}#tshost[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-weight:700}#tshost[_ngcontent-%COMP%]   .mimgcon[_ngcontent-%COMP%]{border-color:#ff0}#tvshow[_ngcontent-%COMP%]{background-image:url(tvshow.88071094b007fa3e.gif);background-repeat:no-repeat;background-size:cover;background-position:center;color:#000}#tvshow[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:tvshow;font-size:calc(1rem + 3vw)}#tvshow[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], #tvshow[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{text-shadow:1px 1px 0 white}#tvshow[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-weight:700}#tvshow[_ngcontent-%COMP%]   .mimgcon[_ngcontent-%COMP%]{border-color:#000}#utensil[_ngcontent-%COMP%]{background-color:#fff;background-image:url(spoon.d5d06d59ab09c7fc.jpg);background-repeat:no-repeat;background-size:200px;background-position:center}#wrestler[_ngcontent-%COMP%]{background-image:url(wrestler.acd39079b58984d7.gif);background-repeat:no-repeat;background-size:cover;background-position:center;color:#fff}#wrestler[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:wrestler;font-size:calc(1rem + 3vw);text-shadow:1px 1px 0 black,2px 2px 0 red}#wrestler[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], #wrestler[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{text-shadow:1px 1px 0 black,2px 2px 0 red}#wrestler[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-weight:700}#wrestler[_ngcontent-%COMP%]   .mimgcon[_ngcontent-%COMP%]{border-color:#000}#yugioh[_ngcontent-%COMP%]{background-image:url(yugioh.8f43ecf9dd92fc55.gif);background-repeat:no-repeat;background-size:cover;background-position:center;color:#fff}#yugioh[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:yugioh;font-size:calc(1rem + 3vw);text-shadow:1px 1px 0 darkblue,2px 2px 0 cyan}#yugioh[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], #yugioh[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{text-shadow:1px 1px 0 darkblue,-1px 1px 0 darkblue,1px -1px 0 darkblue,-1px -1px 0 darkblue,2px 2px 0 cyan,-2px 2px 0 cyan,2px -2px 0 cyan,-2px -2px 0 cyan}#yugioh[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-weight:700}#yugioh[_ngcontent-%COMP%]   .mimgcon[_ngcontent-%COMP%]{border-color:#0ff}"]})}return n})()}];let AQ=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=an({type:n});static#n=this.\u0275inj=sn({imports:[AR.forRoot(DQ),AR]})}return n})(),IQ=(()=>{class n{constructor(){this.title="web-portfolio"}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=ci({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(i,r){1&i&&P(0,"router-outlet")},dependencies:[Tb]})}return n})();const RQ=["addListener","removeListener"],OQ=["addEventListener","removeEventListener"],PQ=["on","off"];function Ei(n,e,t,i){if(Tt(t)&&(i=t,t=void 0),i)return Ei(n,e,t).pipe(ub(i));const[r,s]=function LQ(n){return Tt(n.addEventListener)&&Tt(n.removeEventListener)}(n)?OQ.map(o=>a=>n[o](e,a,t)):function NQ(n){return Tt(n.addListener)&&Tt(n.removeListener)}(n)?RQ.map(ZN(n,e)):function FQ(n){return Tt(n.on)&&Tt(n.off)}(n)?PQ.map(ZN(n,e)):[];if(!r&&B_(n))return Kn(o=>Ei(o,e,t))(Zn(n));if(!r)throw new TypeError("Invalid event target");return new rn(o=>{const a=(...c)=>o.next(1<c.length?c:c[0]);return r(a),()=>s(a)})}function ZN(n,e){return t=>i=>n[t](e,i)}class kQ extends Fn{constructor(e,t){super()}schedule(e,t=0){return this}}const Xm={setInterval(n,e,...t){const{delegate:i}=Xm;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Xm;return(e?.clearInterval||clearInterval)(n)},delegate:void 0},KN={now:()=>(KN.delegate||Date).now(),delegate:void 0};class Zh{constructor(e,t=Zh.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}Zh.now=KN.now;const VQ=new class UQ extends Zh{constructor(e,t=Zh.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}(class BQ extends kQ{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,i=0){return Xm.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&Xm.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,So(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}});const{isArray:zQ}=Array;function t2(n){return 1===n.length&&zQ(n[0])?n[0]:n}function Ew(...n){const e=Df(n),t=t2(n);return t.length?new rn(i=>{let r=t.map(()=>[]),s=t.map(()=>!1);i.add(()=>{r=s=null});for(let o=0;!i.closed&&o<t.length;o++)Zn(t[o]).subscribe(dn(i,a=>{if(r[o].push(a),r.every(c=>c.length)){const c=r.map(l=>l.shift());i.next(e?e(...c):c),r.some((l,u)=>!l.length&&s[u])&&i.complete()}},()=>{s[o]=!0,!r[o].length&&i.complete()}));return()=>{r=s=null}}):Rr}function Tw(...n){const e=Df(n);return wn((t,i)=>{const r=n.length,s=new Array(r);let o=n.map(()=>!1),a=!1;for(let c=0;c<r;c++)Zn(n[c]).subscribe(dn(i,l=>{s[c]=l,!a&&!o[c]&&(o[c]=!0,(a=o.every(Jr))&&(o=null))},fa));t.subscribe(dn(i,c=>{if(a){const l=[c,...s];i.next(e?e(...l):l)}}))})}Math,Math,Math;const ine=["*"],Pne=["dialog"];function pc(n){return"string"==typeof n}function gc(n){return null!=n}function Fu(n){return(n||document.body).getBoundingClientRect()}const DF={animation:!0,transitionTimerDelayMs:5},Cie=()=>{},{transitionTimerDelayMs:Eie}=DF,df=new Map,hr=(n,e,t,i)=>{let r=i.context||{};const s=df.get(e);if(s)switch(i.runningTransition){case"continue":return Rr;case"stop":n.run(()=>s.transition$.complete()),r=Object.assign(s.context,r),df.delete(e)}const o=t(e,i.animation,r)||Cie;if(!i.animation||"none"===window.getComputedStyle(e).transitionProperty)return n.run(()=>o()),ot(void 0).pipe(function Mie(n){return e=>new rn(t=>e.subscribe({next:o=>n.run(()=>t.next(o)),error:o=>n.run(()=>t.error(o)),complete:()=>n.run(()=>t.complete())}))}(n));const a=new Wt,c=new Wt,l=a.pipe(function jQ(...n){return e=>Kd(e,ot(...n))}(!0));df.set(e,{transition$:a,complete:()=>{c.next(),c.complete()},context:r});const u=function Sie(n){const{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n);return 1e3*(parseFloat(e)+parseFloat(t))}(e);return n.runOutsideAngular(()=>{const d=Ei(e,"transitionend").pipe(Hn(l),ui(({target:f})=>f===e));(function n2(...n){return 1===(n=t2(n)).length?Zn(n[0]):new rn(function GQ(n){return e=>{let t=[];for(let i=0;t&&!e.closed&&i<n.length;i++)t.push(Zn(n[i]).subscribe(dn(e,r=>{if(t){for(let s=0;s<t.length;s++)s!==i&&t[s].unsubscribe();t=null}e.next(r)})))}}(n))})(function e2(n=0,e,t=VQ){let i=-1;return null!=e&&(Lx(e)?t=e:i=e),new rn(r=>{let s=function HQ(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}(u+Eie).pipe(Hn(l)),d,c).pipe(Hn(l)).subscribe(()=>{df.delete(e),n.run(()=>{o(),a.next(),a.complete()})})}),a.asObservable()};let l_=(()=>{class n{constructor(){this.animation=DF.animation}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kF=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=an({type:n});static#n=this.\u0275inj=sn({})}return n})(),BF=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=an({type:n});static#n=this.\u0275inj=sn({})}return n})(),HF=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=an({type:n});static#n=this.\u0275inj=sn({})}return n})(),zF=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=an({type:n});static#n=this.\u0275inj=sn({})}return n})();var ln=function(n){return n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown",n}(ln||{});typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const XF=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function JF(n){const e=Array.from(n.querySelectorAll(XF)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let lL=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=an({type:n});static#n=this.\u0275inj=sn({})}return n})(),hL=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=an({type:n});static#n=this.\u0275inj=sn({})}return n})();class bc{constructor(e,t,i){this.nodes=e,this.viewRef=t,this.componentRef=i}}let Cre=(()=>{class n{constructor(t,i){this._el=t,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe(xi(1)).subscribe(()=>{hr(this._zone,this._el.nativeElement,(t,i)=>{i&&Fu(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return hr(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}static#e=this.\u0275fac=function(i){return new(i||n)(U(qt),U(Ft))};static#t=this.\u0275cmp=ci({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(i,r){2&i&&(Ea("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),zt("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[Br],decls:0,vars:0,template:function(i,r){},encapsulation:2})}return n})();class fL{update(e){}close(e){}dismiss(e){}}const Ere=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],Tre=["animation","backdropClass"];class Dre{_applyWindowOptions(e,t){Ere.forEach(i=>{gc(t[i])&&(e[i]=t[i])})}_applyBackdropOptions(e,t){Tre.forEach(i=>{gc(t[i])&&(e[i]=t[i])})}update(e){this._applyWindowOptions(this._windowCmptRef.instance,e),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,e)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Hn(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Hn(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(e,t,i,r){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new Wt,this._dismissed=new Wt,this._hidden=new Wt,e.instance.dismissEvent.subscribe(s=>{this.dismiss(s)}),this.result=new Promise((s,o)=>{this._resolve=s,this._reject=o}),this.result.then(null,()=>{})}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function SF(n){return n&&n.then}(t)?!1!==t&&this._dismiss(e):t.then(i=>{!1!==i&&this._dismiss(e)},()=>{})}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():ot(void 0);e.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Ew(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var vx=function(n){return n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",n}(vx||{});let Are=(()=>{class n{constructor(t,i,r){this._document=t,this._elRef=i,this._zone=r,this._closed$=new Wt,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new et,this.shown=new Wt,this.hidden=new Wt}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":pc(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(xi(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,i={animation:this.animation,runningTransition:"stop"},o=Ew(hr(this._zone,t,()=>t.classList.remove("show"),i),hr(this._zone,this._dialogEl.nativeElement,()=>{},i));return o.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),o}_show(){const t={animation:this.animation,runningTransition:"continue"};Ew(hr(this._zone,this._elRef.nativeElement,(s,o)=>{o&&Fu(s),s.classList.add("show")},t),hr(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{Ei(t,"keydown").pipe(Hn(this._closed$),ui(r=>r.which===ln.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(vx.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;Ei(this._dialogEl.nativeElement,"mousedown").pipe(Hn(this._closed$),di(()=>i=!1),Zr(()=>Ei(t,"mouseup").pipe(Hn(this._closed$),xi(1))),ui(({target:r})=>t===r)).subscribe(()=>{i=!0}),Ei(t,"click").pipe(Hn(this._closed$)).subscribe(({target:r})=>{t===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(vx.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const i=t.querySelector("[ngbAutofocus]"),r=JF(t)[0];(i||r||t).focus()}}_restoreFocus(){const t=this._document.body,i=this._elWithFocus;let r;r=i&&i.focus&&t.contains(i)?i:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&hr(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static#e=this.\u0275fac=function(i){return new(i||n)(U(ni),U(qt),U(Ft))};static#t=this.\u0275cmp=ci({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(i,r){if(1&i&&Aa(Pne,7),2&i){let s;en(s=function tn(){return function xz(n,e){return n[ws].queries[e].queryList}(oe(),WM())}())&&(r._dialogEl=s.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(i,r){2&i&&(Xt("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),Ea("modal d-block"+(r.windowClass?" "+r.windowClass:"")),zt("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[Br],ngContentSelectors:ine,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(i,r){1&i&&(function GE(n){const e=oe()[Bn][Ai];if(!e.projection){const i=e.projection=dd(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?j4(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}(),v(0,"div",0,1)(2,"div",2),function jE(n,e=0,t){const i=oe(),r=Ut(),s=al(r,Ot+n,16,null,t||null);null===s.projection&&(s.projection=e),p0(),(!i[$s]||Bc())&&32!=(32&s.flags)&&function $B(n,e,t){qS(e[gt],0,e,t,H0(n,t,e),HS(t.parent||e[Ai],t,e))}(r,i,s)}(3),y()()),2&i&&Ea("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2})}return n})(),Ire=(()=>{class n{constructor(t){this._document=t}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:s,paddingRight:o}=r;if(t>0){const a=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${a+t}px`}return r.overflow="hidden",()=>{t>0&&(r.paddingRight=o),r.overflow=s}}static#e=this.\u0275fac=function(i){return new(i||n)(Ue(ni))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Rre=(()=>{class n{constructor(t,i,r,s,o,a,c){this._applicationRef=t,this._injector=i,this._environmentInjector=r,this._document=s,this._scrollBar=o,this._rendererFactory=a,this._ngZone=c,this._activeWindowCmptHasChanged=new Wt,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new et,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const l=this._windowCmpts[this._windowCmpts.length-1];((n,e,t,i=!1)=>{n.runOutsideAngular(()=>{const r=Ei(e,"focusin").pipe(Hn(t),kt(s=>s.target));Ei(e,"keydown").pipe(Hn(t),ui(s=>s.which===ln.Tab),Tw(r)).subscribe(([s,o])=>{const[a,c]=JF(e);(o===a||o===e)&&s.shiftKey&&(c.focus(),s.preventDefault()),o===c&&!s.shiftKey&&(a.focus(),s.preventDefault())}),i&&Ei(e,"click").pipe(Hn(t),Tw(r),kt(s=>s[1])).subscribe(s=>s.focus())})})(this._ngZone,l.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(l.location.nativeElement)}})}_restoreScrollBar(){const t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,i,r){const s=r.container instanceof HTMLElement?r.container:gc(r.container)?this._document.querySelector(r.container):this._document.body,o=this._rendererFactory.createRenderer(null,null);if(!s)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const a=new fL,c=(t=r.injector||t).get(ir,null)||this._environmentInjector,l=this._getContentRef(t,c,i,a,r);let u=!1!==r.backdrop?this._attachBackdrop(s):void 0,d=this._attachWindowComponent(s,l.nodes),h=new Dre(d,l,u,r.beforeDismiss);return this._registerModalRef(h),this._registerWindowCmpt(d),h.hidden.pipe(xi(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(o.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),a.close=f=>{h.close(f)},a.dismiss=f=>{h.dismiss(f)},a.update=f=>{h.update(f)},h.update(r),1===this._modalRefs.length&&o.addClass(this._document.body,"modal-open"),u&&u.instance&&u.changeDetectorRef.detectChanges(),d.changeDetectorRef.detectChanges(),h}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(i=>i.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t){let i=Py(Cre,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),t.appendChild(i.location.nativeElement),i}_attachWindowComponent(t,i){let r=Py(Are,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(r.hostView),t.appendChild(r.location.nativeElement),r}_getContentRef(t,i,r,s,o){return r?r instanceof Mn?this._createFromTemplateRef(r,s):pc(r)?this._createFromString(r):this._createFromComponent(t,i,r,s,o):new bc([])}_createFromTemplateRef(t,i){const s=t.createEmbeddedView({$implicit:i,close(o){i.close(o)},dismiss(o){i.dismiss(o)}});return this._applicationRef.attachView(s),new bc([s.rootNodes],s)}_createFromString(t){const i=this._document.createTextNode(`${t}`);return new bc([[i]])}_createFromComponent(t,i,r,s,o){const c=Py(r,{environmentInjector:i,elementInjector:wi.create({providers:[{provide:fL,useValue:s}],parent:t})}),l=c.location.nativeElement;return o.scrollable&&l.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new bc([[l]],c.hostView,c)}_setAriaHidden(t){const i=t.parentElement;i&&t!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==t&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,i)=>{t?i.setAttribute("aria-hidden",t):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const i=()=>{const r=this._modalRefs.indexOf(t);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(i,i)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const i=this._windowCmpts.indexOf(t);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}static#e=this.\u0275fac=function(i){return new(i||n)(Ue(ko),Ue(wi),Ue(ir),Ue(ni),Ue(Ire),Ue(gv),Ue(Ft))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ore=(()=>{class n{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}static#e=this.\u0275fac=function(i){return new(i||n)(Ue(l_))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Pre=(()=>{class n{constructor(t,i,r){this._injector=t,this._modalStack=i,this._config=r}open(t,i={}){const r={...this._config,animation:this._config.animation,...i};return this._modalStack.open(this._injector,t,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}static#e=this.\u0275fac=function(i){return new(i||n)(Ue(wi),Ue(Rre),Ue(Ore))};static#t=this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pL=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=an({type:n});static#n=this.\u0275inj=sn({providers:[Pre]})}return n})(),_L=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=an({type:n});static#n=this.\u0275inj=sn({})}return n})(),CL=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=an({type:n});static#n=this.\u0275inj=sn({})}return n})(),TL=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=an({type:n});static#n=this.\u0275inj=sn({})}return n})(),DL=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=an({type:n});static#n=this.\u0275inj=sn({})}return n})(),AL=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=an({type:n});static#n=this.\u0275inj=sn({})}return n})(),IL=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=an({type:n});static#n=this.\u0275inj=sn({})}return n})(),RL=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=an({type:n});static#n=this.\u0275inj=sn({})}return n})(),OL=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=an({type:n});static#n=this.\u0275inj=sn({})}return n})(),PL=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=an({type:n});static#n=this.\u0275inj=sn({})}return n})();new qe("live announcer delay",{providedIn:"root",factory:function Zre(){return 100}});let NL=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=an({type:n});static#n=this.\u0275inj=sn({})}return n})(),FL=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=an({type:n});static#n=this.\u0275inj=sn({})}return n})();const Qre=[kF,BF,HF,zF,lL,hL,pL,_L,FL,CL,TL,DL,AL,IL,RL,OL,PL,NL];let ese=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=an({type:n});static#n=this.\u0275inj=sn({imports:[Qre,kF,BF,HF,zF,lL,hL,pL,_L,FL,CL,TL,DL,AL,IL,RL,OL,PL,NL]})}return n})(),tse=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=an({type:n,bootstrap:[IQ]});static#n=this.\u0275inj=sn({imports:[fj,AQ,ese]})}return n})();dj().bootstrapModule(tse).catch(n=>console.error(n))},614:()=>{const Tt=":";const Tf=function(G,...z){if(Tf.translate){const ae=Tf.translate(G,z);G=ae[0],z=ae[1]}let K=N_(G[0],G.raw[0]);for(let ae=1;ae<G.length;ae++)K+=z[ae-1]+N_(G[ae],G.raw[ae]);return K},Ex=":";function N_(G,z){return z.charAt(0)===Ex?G.substring(function ju(G,z){for(let K=1,ae=1;K<G.length;K++,ae++)if("\\"===z[ae])ae++;else if(G[K]===Tt)return K;throw new Error(`Unterminated $localize metadata block in "${z}".`)}(G,z)+1):G}globalThis.$localize=Tf}},Tt=>{var Mo=So=>Tt(Tt.s=So);Mo(614),Mo(291)}]);